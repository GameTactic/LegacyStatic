!function(u,e){"function"==typeof define&&define.amd?define(["jquery"],function(h){return e(h)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(){!function(u){function e(a){return u.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,
ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){a=a.replace(this.re,this.ch)}),a}function h(a){var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c="(?:"+Object.keys(f).join("|")+")",d=new RegExp(c,"g");a=null==a?"":""+a;return(new RegExp(c)).test(a)?a.replace(d,function(a){return f[a]}):a}function l(a,f){var c=arguments,d=a,m=f;[].shift.apply(c);var k,t=this.each(function(){var a=u(this);if(a.is("select")){var f=a.data("selectpicker"),t="object"==typeof d&&
d;if(f){if(t)for(var g in t)t.hasOwnProperty(g)&&(f.options[g]=t[g])}else f=u.extend({},b.DEFAULTS,u.fn.selectpicker.defaults||{},a.data(),t),a.data("selectpicker",f=new b(this,f,m));"string"==typeof d&&(k=f[d]instanceof Function?f[d].apply(f,c):f.options[d])}});return"undefined"!=typeof k?k:t}String.prototype.includes||!function(){var a={}.toString,f=function(){try{var a={},c=Object.defineProperty,d=c(a,a,a)&&c}catch(f){}return d}(),c="".indexOf,d=function(d){if(null==this)throw TypeError();var f=
String(this);if(d&&"[object RegExp]"==a.call(d))throw TypeError();var b=f.length,n=String(d),B=n.length,g=1<arguments.length?arguments[1]:void 0,g=g?Number(g):0;g!=g&&(g=0);return B+Math.min(Math.max(g,0),b)>b?!1:-1!=c.call(f,n,g)};f?f(String.prototype,"includes",{value:d,configurable:!0,writable:!0}):String.prototype.includes=d}();String.prototype.startsWith||!function(){var a=function(){try{var a={},c=Object.defineProperty,f=c(a,a,a)&&c}catch(b){}return f}(),f={}.toString,c=function(a){if(null==
this)throw TypeError();var c=String(this);if(a&&"[object RegExp]"==f.call(a))throw TypeError();var b=c.length,t=String(a),n=t.length,B=1<arguments.length?arguments[1]:void 0,B=B?Number(B):0;B!=B&&(B=0);B=Math.min(Math.max(B,0),b);if(n+B>b)return!1;for(b=-1;++b<n;)if(c.charCodeAt(B+b)!=t.charCodeAt(b))return!1;return!0};a?a(String.prototype,"startsWith",{value:c,configurable:!0,writable:!0}):String.prototype.startsWith=c}();Object.keys||(Object.keys=function(a,f,c){c=[];for(f in a)c.hasOwnProperty.call(a,
f)&&c.push(f);return c});u.expr[":"].icontains=function(a,f,c){a=u(a);return(a.data("tokens")||a.text()).toUpperCase().includes(c[3].toUpperCase())};u.expr[":"].ibegins=function(a,f,c){a=u(a);return(a.data("tokens")||a.text()).toUpperCase().startsWith(c[3].toUpperCase())};u.expr[":"].aicontains=function(a,f,c){a=u(a);return(a.data("tokens")||a.data("normalizedText")||a.text()).toUpperCase().includes(c[3].toUpperCase())};u.expr[":"].aibegins=function(a,f,c){a=u(a);return(a.data("tokens")||a.data("normalizedText")||
a.text()).toUpperCase().startsWith(c[3].toUpperCase())};var b=function(a,f,c){c&&(c.stopPropagation(),c.preventDefault());this.$element=u(a);this.$lis=this.$menu=this.$button=this.$newElement=null;this.options=f;null===this.options.title&&(this.options.title=this.$element.attr("title"));this.val=b.prototype.val;this.render=b.prototype.render;this.refresh=b.prototype.refresh;this.setStyle=b.prototype.setStyle;this.selectAll=b.prototype.selectAll;this.deselectAll=b.prototype.deselectAll;this.remove=
this.destroy=b.prototype.remove;this.show=b.prototype.show;this.hide=b.prototype.hide;this.init()};b.VERSION="1.7.2";b.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(a,f){return 1==a?"{0} item selected":"{0} items selected"},maxOptionsText:function(a,f){return[1==a?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==f?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",
deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1};b.prototype=
{constructor:b,init:function(){var a=this,f=this.$element.attr("id");this.$element.addClass("bs-select-hidden");this.liObj={};this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$button=this.$newElement.children("button");this.$menu=this.$newElement.children(".dropdown-menu");this.$menuInner=this.$menu.children(".inner");this.$searchbox=this.$menu.find("input");this.options.dropdownAlignRight&&
this.$menu.addClass("dropdown-menu-right");"undefined"!=typeof f&&(this.$button.attr("data-id",f),u('label[for="'+f+'"]').click(function(c){c.preventDefault();a.$button.focus()}));this.checkDisabled();this.clickListener();this.options.liveSearch&&this.liveSearchListener();this.render();this.setStyle();this.setWidth();this.options.container&&this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",this);this.options.mobile&&this.mobile();this.$newElement.on("hide.bs.dropdown",
function(c){a.$element.trigger("hide.bs.select",c)});this.$newElement.on("hidden.bs.dropdown",function(c){a.$element.trigger("hidden.bs.select",c)});this.$newElement.on("show.bs.dropdown",function(c){a.$element.trigger("show.bs.select",c)});this.$newElement.on("shown.bs.dropdown",function(c){a.$element.trigger("shown.bs.select",c)});setTimeout(function(){a.$element.trigger("loaded.bs.select")})},createDropdown:function(){var a=this.multiple?" show-tick":"",f=this.$element.parent().hasClass("input-group")?
" input-group-btn":"",c=this.autofocus?" autofocus":"",d=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",b=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+h(this.options.liveSearchPlaceholder)+'"')+"></div>":"";return u('<div class="btn-group bootstrap-select'+a+f+'"><button type="button" class="'+
this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+c+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+d+b+(this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+
"</button></div></div>":"")+'<ul class="dropdown-menu inner" role="menu"></ul>'+(this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"")+"</div></div>")},createView:function(){var a=this.createDropdown(),f=this.createLi();return a.find("ul")[0].innerHTML=f,a},reloadLi:function(){this.destroyLi();var a=this.createLi();this.$menuInner[0].innerHTML=
a},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var a=this,f=[],c=0,d=document.createElement("option"),b=-1,k=function(a,c,d,f){return"<li"+("undefined"!=typeof d&""!==d?' class="'+d+'"':"")+("undefined"!=typeof c&null!==c?' data-original-index="'+c+'"':"")+("undefined"!=typeof f&null!==f?'data-optgroup="'+f+'"':"")+">"+a+"</li>"},t=function(c,d,f,b){return'<a tabindex="0"'+("undefined"!=typeof d?' class="'+d+'"':"")+("undefined"!=typeof f?' style="'+f+'"':"")+(a.options.liveSearchNormalize?
' data-normalized-text="'+e(h(c))+'"':"")+("undefined"!=typeof b||null!==b?' data-tokens="'+b+'"':"")+">"+c+'<span class="'+a.options.iconBase+" "+a.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(b--,!this.$element.find(".bs-title-option").length)){var n=this.$element[0];d.className="bs-title-option";d.appendChild(document.createTextNode(this.options.title));d.value="";n.insertBefore(d,n.firstChild);null===n.options[n.selectedIndex].getAttribute("selected")&&
(d.selected=!0)}return this.$element.find("option").each(function(d){var n=u(this);if(b++,!n.hasClass("bs-title-option")){var g=this.className||"",e=this.style.cssText,E=n.data("content")?n.data("content"):n.html(),y=n.data("tokens")?n.data("tokens"):null,h="undefined"!=typeof n.data("subtext")?'<small class="text-muted">'+n.data("subtext")+"</small>":"",v="undefined"!=typeof n.data("icon")?'<span class="'+a.options.iconBase+" "+n.data("icon")+'"></span> ':"",C=this.disabled||"OPTGROUP"===this.parentElement.tagName&&
this.parentElement.disabled;if(""!==v&&C&&(v="<span>"+v+"</span>"),a.options.hideDisabled&&C)return void b--;if(n.data("content")||(E=v+'<span class="text">'+E+h+"</span>"),"OPTGROUP"===this.parentElement.tagName&&!0!==n.data("divider")){if(0===n.index()){c+=1;var h=this.parentElement.label,v="undefined"!=typeof n.parent().data("subtext")?'<small class="text-muted">'+n.parent().data("subtext")+"</small>":"",n=n.parent().data("icon")?'<span class="'+a.options.iconBase+" "+n.parent().data("icon")+'"></span> ':
"",G=" "+this.parentElement.className||"",h=n+'<span class="text">'+h+v+"</span>";0!==d&&0<f.length&&(b++,f.push(k("",null,"divider",c+"div")));b++;f.push(k(h,null,"dropdown-header"+G,c))}f.push(k(t(E,"opt "+g+G,e,y),d,"",c))}else!0===n.data("divider")?f.push(k("",d,"divider")):!0===n.data("hidden")?f.push(k(t(E,g,e,y),d,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(b++,f.push(k("",null,"divider",c+"div"))),f.push(k(t(E,g,e,y),d)));a.liObj[d]=
b}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),f.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(a){var f,c=this;!1!==a&&this.$element.find("option").each(function(a){var d=c.findLis().eq(c.liObj[a]);c.setDisabled(a,this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled,d);c.setSelected(a,
this.selected,d)});this.tabIndex();a=this.$element.find("option").map(function(){if(this.selected){if(c.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentElement.tagName&&this.parentElement.disabled))return!1;var a,d=u(this),f=d.data("icon")&&c.options.showIcon?'<i class="'+c.options.iconBase+" "+d.data("icon")+'"></i> ':"";return a=c.options.showSubtext&&d.data("subtext")&&!c.multiple?' <small class="text-muted">'+d.data("subtext")+"</small>":"","undefined"!=typeof d.attr("title")?d.attr("title"):
d.data("content")&&c.options.showContent?d.data("content"):f+d.html()+a}}).toArray();f=this.multiple?a.join(this.options.multipleSeparator):a[0];if(this.multiple&&-1<this.options.selectedTextFormat.indexOf("count")){var d=this.options.selectedTextFormat.split(">");if(1<d.length&&a.length>d[1]||1==d.length&&2<=a.length)f=this.options.hideDisabled?", [disabled]":"",f=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+f).length,f=("function"==typeof this.options.countSelectedText?
this.options.countSelectedText(a.length,f):this.options.countSelectedText).replace("{0}",a.length.toString()).replace("{1}",f.toString())}void 0==this.options.title&&(this.options.title=this.$element.attr("title"));"static"==this.options.selectedTextFormat&&(f=this.options.title);f||(f="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText);this.$button.attr("title",u.trim(f.replace(/<[^>]*>?/g,"")));this.$button.children(".filter-option").html(f);this.$element.trigger("rendered.bs.select")},
setStyle:function(a,f){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var c=a?a:this.options.style;"add"==f?this.$button.addClass(c):"remove"==f?this.$button.removeClass(c):(this.$button.removeClass(this.options.style),this.$button.addClass(c))},liHeight:function(a){if(a||!1!==this.options.size&&!this.sizeInfo){a=document.createElement("div");var f=document.createElement("div"),c=document.createElement("ul"),
d=document.createElement("li"),b=document.createElement("li"),k=document.createElement("a"),t=document.createElement("span"),n=this.options.header?this.$menu.find(".popover-title")[0].cloneNode(!0):null,g=this.options.liveSearch?document.createElement("div"):null,q=this.options.actionsBox&&this.multiple?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,e=this.options.doneButton&&this.multiple?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(t.className="text",a.className=this.$menu[0].parentNode.className+
" open",f.className="dropdown-menu open",c.className="dropdown-menu inner",d.className="divider",t.appendChild(document.createTextNode("Inner text")),k.appendChild(t),b.appendChild(k),c.appendChild(b),c.appendChild(d),n&&f.appendChild(n),g)b=document.createElement("span"),g.className="bs-searchbox",b.className="form-control",g.appendChild(b),f.appendChild(g);q&&f.appendChild(q);f.appendChild(c);e&&f.appendChild(e);a.appendChild(f);document.body.appendChild(a);c=k.offsetHeight;n=n?n.offsetHeight:0;
g=g?g.offsetHeight:0;q=q?q.offsetHeight:0;e=e?e.offsetHeight:0;d=u(d).outerHeight(!0);b=(k=getComputedStyle?getComputedStyle(f):!1)?u(f):null;f=parseInt(k?k.paddingTop:b.css("paddingTop"))+parseInt(k?k.paddingBottom:b.css("paddingBottom"))+parseInt(k?k.borderTopWidth:b.css("borderTopWidth"))+parseInt(k?k.borderBottomWidth:b.css("borderBottomWidth"));k=f+parseInt(k?k.marginTop:b.css("marginTop"))+parseInt(k?k.marginBottom:b.css("marginBottom"))+2;document.body.removeChild(a);this.sizeInfo={liHeight:c,
headerHeight:n,searchHeight:g,actionsHeight:q,doneButtonHeight:e,dividerHeight:d,menuPadding:f,menuExtras:k}}},setSize:function(){this.findLis();this.liHeight();var a,f,c,d,b=this,k=this.$menu,t=this.$menuInner,n=u(window),g=this.$newElement[0].offsetHeight,q=this.sizeInfo.liHeight,e=this.sizeInfo.headerHeight,r=this.sizeInfo.searchHeight,E=this.sizeInfo.actionsHeight,y=this.sizeInfo.doneButtonHeight,h=this.sizeInfo.dividerHeight,v=this.sizeInfo.menuPadding,C=this.sizeInfo.menuExtras,G=this.options.hideDisabled?
".disabled":"",L=function(){c=b.$newElement.offset().top-n.scrollTop();d=n.height()-c-g};(L(),this.options.header&&k.css("padding-top",0),"auto"===this.options.size)?(h=function(){var n;n=function(a,c){return function(d){return c?d.classList?d.classList.contains(a):u(d).hasClass(a):!(d.classList?d.classList.contains(a):u(d).hasClass(a))}};var g=b.$menuInner[0].getElementsByTagName("li"),g=Array.prototype.filter?Array.prototype.filter.call(g,n("hidden",!1)):b.$lis.not(".hidden");n=Array.prototype.filter?
Array.prototype.filter.call(g,n("dropdown-header",!0)):g.filter(".dropdown-header");L();a=d-C;b.options.container?(k.data("height")||k.data("height",k.height()),f=k.data("height")):f=k.height();b.options.dropupAuto&&b.$newElement.toggleClass("dropup",c>d&&f>a-C);b.$newElement.hasClass("dropup")&&(a=c-C);n=3<g.length+n.length?3*q+C-2:0;k.css({"max-height":a+"px",overflow:"hidden","min-height":n+e+r+E+y+"px"});t.css({"max-height":a-e-r-E-y-v+"px","overflow-y":"auto","min-height":Math.max(n-v,0)+"px"})},
h(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",h),n.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",h)):this.options.size&&"auto"!=this.options.size&&this.$lis.not(G).length>this.options.size&&(G=this.$lis.not(".divider").not(G).children().slice(0,this.options.size).last().parent().index(),G=this.$lis.slice(0,G+1).filter(".divider").length,a=q*this.options.size+G*h+v,b.options.container?(k.data("height")||k.data("height",
k.height()),f=k.data("height")):f=k.height(),b.options.dropupAuto&&this.$newElement.toggleClass("dropup",c>d&&f>a-C),k.css({"max-height":a+e+r+E+y+"px",overflow:"hidden","min-height":""}),t.css({"max-height":a-v+"px","overflow-y":"auto","min-height":""}))},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var a=this.$menu.parent().clone().appendTo("body"),f=this.options.container?this.$newElement.clone().appendTo("body"):a,c=a.children(".dropdown-menu").outerWidth(),
d=f.css("width","auto").children("button").outerWidth();a.remove();f.remove();this.$newElement.css("width",Math.max(c,d)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},
selectPosition:function(){var a,f,c=this,d=u("<div />"),b=function(c){d.addClass(c.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",c.hasClass("dropup"));a=c.offset();f=c.hasClass("dropup")?0:c[0].offsetHeight;d.css({top:a.top+f,left:a.left,width:c[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){c.isDisabled()||(b(u(this)),d.appendTo(c.options.container),d.toggleClass("open",!u(this).hasClass("open")),d.append(c.$menu))});u(window).on("resize scroll",
function(){b(c.$newElement)});this.$element.on("hide.bs.select",function(){c.$menu.data("height",c.$menu.height());d.detach()})},setSelected:function(a,f,c){c||(c=this.findLis().eq(this.liObj[a]));c.toggleClass("selected",f)},setDisabled:function(a,f,c){c||(c=this.findLis().eq(this.liObj[a]));f?c.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):c.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},
checkDisabled:function(){var a=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex"));this.$button.click(function(){return!a.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",
this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var a=this,f=u(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(a){a.stopPropagation()});f.data("spaceSelect",!1);this.$button.on("keyup",function(a){/(32)/.test(a.keyCode.toString(10))&&f.data("spaceSelect")&&(a.preventDefault(),f.data("spaceSelect",!1))});this.$newElement.on("click",function(){a.setSize();a.$element.on("shown.bs.select",function(){if(a.options.liveSearch||
a.multiple){if(!a.multiple){var c=a.liObj[a.$element[0].selectedIndex];"number"==typeof c&&(c=a.$lis.eq(c)[0].offsetTop-a.$menuInner[0].offsetTop,c=c-a.$menuInner[0].offsetHeight/2+a.sizeInfo.liHeight/2,a.$menuInner[0].scrollTop=c)}}else a.$menu.find(".selected a").focus()})});this.$menu.on("click","li a",function(c){var d=u(this),f=d.parent().data("originalIndex"),b=a.$element.val(),t=a.$element.prop("selectedIndex");if(a.multiple&&c.stopPropagation(),c.preventDefault(),!a.isDisabled()&&!d.parent().hasClass("disabled")){var n=
a.$element.find("option");c=n.eq(f);var g=c.prop("selected"),e=c.parent("optgroup"),p=a.options.maxOptions,r=e.data("maxOptions")||!1;if(a.multiple){if(c.prop("selected",!g),a.setSelected(f,!g),d.blur(),!1!==p||!1!==r){var E=p<n.filter(":selected").length,y=r<e.find("option:selected").length;if(p&&E||r&&y)if(p&&1==p)n.prop("selected",!1),c.prop("selected",!0),a.$menu.find(".selected").removeClass("selected"),a.setSelected(f,!0);else if(r&&1==r)e.find("option:selected").prop("selected",!1),c.prop("selected",
!0),p=d.parent().data("optgroup"),a.$menu.find('[data-optgroup="'+p+'"]').removeClass("selected"),a.setSelected(f,!0);else{var d="function"==typeof a.options.maxOptionsText?a.options.maxOptionsText(p,r):a.options.maxOptionsText,n=d[0].replace("{n}",p),e=d[1].replace("{n}",r),h=u('<div class="notify"></div>');d[2]&&(n=n.replace("{var}",d[2][1<p?0:1]),e=e.replace("{var}",d[2][1<r?0:1]));c.prop("selected",!1);a.$menu.append(h);p&&E&&(h.append(u("<div>"+n+"</div>")),a.$element.trigger("maxReached.bs.select"));
r&&y&&(h.append(u("<div>"+e+"</div>")),a.$element.trigger("maxReachedGrp.bs.select"));setTimeout(function(){a.setSelected(f,!1)},10);h.delay(750).fadeOut(300,function(){u(this).remove()})}}}else n.prop("selected",!1),c.prop("selected",!0),a.$menu.find(".selected").removeClass("selected"),a.setSelected(f,!0);a.multiple?a.options.liveSearch&&a.$searchbox.focus():a.$button.focus();(b!=a.$element.val()&&a.multiple||t!=a.$element.prop("selectedIndex")&&!a.multiple)&&(a.$element.change(),a.$element.trigger("changed.bs.select",
[f,c.prop("selected"),g]))}});this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(c){c.currentTarget==this&&(c.preventDefault(),c.stopPropagation(),a.options.liveSearch&&!u(c.target).hasClass("close")?a.$searchbox.focus():a.$button.focus())});this.$menu.on("click","li.divider, li.dropdown-header",function(c){c.preventDefault();c.stopPropagation();a.options.liveSearch?a.$searchbox.focus():a.$button.focus()});this.$menu.on("click",".popover-title .close",function(){a.$button.click()});
this.$searchbox.on("click",function(a){a.stopPropagation()});this.$menu.on("click",".actions-btn",function(c){a.options.liveSearch?a.$searchbox.focus():a.$button.focus();c.preventDefault();c.stopPropagation();u(this).hasClass("bs-select-all")?a.selectAll():a.deselectAll();a.$element.change()});this.$element.change(function(){a.render(!1)})},liveSearchListener:function(){var a=this,f=u('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){a.$menuInner.find(".active").removeClass("active");
a.$searchbox.val()&&(a.$searchbox.val(""),a.$lis.not(".is-hidden").removeClass("hidden"),f.parent().length&&f.remove());a.multiple||a.$menuInner.find(".selected").addClass("active");setTimeout(function(){a.$searchbox.focus()},10)});this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(a){a.stopPropagation()});this.$searchbox.on("input propertychange",function(){if(a.$searchbox.val()){var c=a.$lis.not(".is-hidden").removeClass("hidden").children("a"),
c=a.options.liveSearchNormalize?c.not(":a"+a._searchStyle()+"("+e(a.$searchbox.val())+")"):c.not(":"+a._searchStyle()+"("+a.$searchbox.val()+")");c.parent().addClass("hidden");a.$lis.filter(".dropdown-header").each(function(){var c=u(this),d=c.data("optgroup");0===a.$lis.filter("[data-optgroup="+d+"]").not(c).not(".hidden").length&&(c.addClass("hidden"),a.$lis.filter("[data-optgroup="+d+"div]").addClass("hidden"))});var d=a.$lis.not(".hidden");d.each(function(a){var c=u(this);c.hasClass("divider")&&
(c.index()===d.eq(0).index()||c.index()===d.last().index()||d.eq(a+1).hasClass("divider"))&&c.addClass("hidden")});a.$lis.not(".hidden, .no-results").length?f.parent().length&&f.remove():(f.parent().length&&f.remove(),f.html(a.options.noneResultsText.replace("{0}",'"'+h(a.$searchbox.val())+'"')).show(),a.$menuInner.append(f))}else a.$lis.not(".is-hidden").removeClass("hidden"),f.parent().length&&f.remove();a.$lis.filter(".active").removeClass("active");a.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus();
u(this).focus()})},_searchStyle:function(){var a="icontains";switch(this.options.liveSearchStyle){case "begins":case "startsWith":a="ibegins"}return a},val:function(a){return"undefined"!=typeof a?(this.$element.val(a),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis();this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!0);this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected");this.render(!1)},deselectAll:function(){this.findLis();
this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",!1);this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").removeClass("selected");this.render(!1)},keydown:function(a){var f,c,d,b,k,t,n,g,q,p=u(this);c=p.is("input")?p.parent().parent():p.parent();var r=c.data("this"),E={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",
79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(r.options.liveSearch&&(c=p.parent().parent()),r.options.container&&(c=r.$menu),f=u("[role=menu] li a",c),q=r.$menu.parent().hasClass("open"),!q&&(48<=a.keyCode&&57>=a.keyCode||65<=event.keyCode&&90>=event.keyCode)&&(r.options.container?r.$newElement.trigger("click"):(r.setSize(),r.$menu.parent().addClass("open"),q=!0),r.$searchbox.focus()),
r.options.liveSearch&&(/(^9$|27)/.test(a.keyCode.toString(10))&&q&&0===r.$menu.find(".active").length&&(a.preventDefault(),r.$menu.parent().removeClass("open"),r.options.container&&r.$newElement.removeClass("open"),r.$button.focus()),f=u("[role=menu] li:not(.disabled, .hidden, .dropdown-header, .divider)",c),p.val()||/(38|40)/.test(a.keyCode.toString(10))||0===f.filter(".active").length&&(f=r.$newElement.find("li"),f=r.options.liveSearchNormalize?f.filter(":a"+r._searchStyle()+"("+e(E[a.keyCode])+
")"):f.filter(":"+r._searchStyle()+"("+E[a.keyCode]+")"))),f.length){if(/(38|40)/.test(a.keyCode.toString(10)))c=f.index(f.filter(":focus")),b=f.parent(":not(.disabled, .hidden, .dropdown-header, .divider)").first().data("originalIndex"),k=f.parent(":not(.disabled, .hidden, .dropdown-header, .divider)").last().data("originalIndex"),d=f.eq(c).parent().nextAll(":not(.disabled, .hidden, .dropdown-header, .divider)").eq(0).data("originalIndex"),t=f.eq(c).parent().prevAll(":not(.disabled, .hidden, .dropdown-header, .divider)").eq(0).data("originalIndex"),
n=f.eq(d).parent().prevAll(":not(.disabled, .hidden, .dropdown-header, .divider)").eq(0).data("originalIndex"),r.options.liveSearch&&(f.each(function(a){u(this).hasClass("disabled")||u(this).data("index",a)}),c=f.index(f.filter(".active")),b=f.first().data("index"),k=f.last().data("index"),d=f.eq(c).nextAll().eq(0).data("index"),t=f.eq(c).prevAll().eq(0).data("index"),n=f.eq(d).prevAll().eq(0).data("index")),g=p.data("prevIndex"),38==a.keyCode?(r.options.liveSearch&&--c,c!=n&&c>t&&(c=t),b>c&&(c=b),
c==g&&(c=k)):40==a.keyCode&&(r.options.liveSearch&&(c+=1),-1==c&&(c=0),c!=n&&d>c&&(c=d),c>k&&(c=k),c==g&&(c=b)),p.data("prevIndex",c),r.options.liveSearch?(a.preventDefault(),p.hasClass("dropdown-toggle")||(f.removeClass("active").eq(c).addClass("active").children("a").focus(),p.focus())):f.eq(c).focus();else if(!p.is("input")){var y=[];f.each(function(){u(this).parent().hasClass("disabled")||u.trim(u(this).text().toLowerCase()).substring(0,1)==E[a.keyCode]&&y.push(u(this).parent().index())});c=u(document).data("keycount");
c++;u(document).data("keycount",c);u.trim(u(":focus").text().toLowerCase()).substring(0,1)!=E[a.keyCode]?(c=1,u(document).data("keycount",c)):c>=y.length&&(u(document).data("keycount",0),c>y.length&&(c=1));f.eq(y[c-1]).focus()}(/(13|32)/.test(a.keyCode.toString(10))||/(^9$)/.test(a.keyCode.toString(10))&&r.options.selectOnTab)&&q&&((/(32)/.test(a.keyCode.toString(10))||a.preventDefault(),r.options.liveSearch)?/(32)/.test(a.keyCode.toString(10))||(r.$menu.find(".active a").click(),p.focus()):(f=u(":focus"),
f.click(),f.focus(),a.preventDefault(),u(document).data("spaceSelect",!0)),u(document).data("keycount",0));(/(^9$|27)/.test(a.keyCode.toString(10))&&q&&(r.multiple||r.options.liveSearch)||/(27)/.test(a.keyCode.toString(10))&&!q)&&(r.$menu.parent().removeClass("open"),r.options.container&&r.$newElement.removeClass("open"),r.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=
null;this.reloadLi();this.render();this.checkDisabled();this.liHeight(!0);this.setStyle();this.setWidth();this.$lis&&this.$searchbox.trigger("propertychange");this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()}};var g=u.fn.selectpicker;u.fn.selectpicker=l;u.fn.selectpicker.Constructor=b;u.fn.selectpicker.noConflict=function(){return u.fn.selectpicker=g,this};
u(document).data("keycount",0).on("keydown",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',b.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(a){a.stopPropagation()});u(window).on("load.bs.select.data-api",function(){u(".selectpicker").each(function(){var a=u(this);l.call(a,a.data())})})}(jQuery)});(function(u){var e=function(e,l){this.init("simplecolorpicker",e,l)};e.prototype={constructor:e,init:function(e,l,b){var g=this;g.type=e;g.$select=u(l);g.$select.hide();g.options=u.extend({},u.fn.simplecolorpicker.defaults,b);g.$colorList=null;!0===g.options.picker?(e=g.$select.find("> option:selected").text(),g.$icon=u('<span class="simplecolorpicker icon" title="'+e+'" style="background-color: '+g.$select.val()+';" role="button" tabindex="0"></span>').insertAfter(g.$select),g.$icon.on("click."+
g.type,u.proxy(g.showPicker,g)),g.$picker=u('<span class="simplecolorpicker picker '+g.options.theme+'"></span>').appendTo(document.body),g.$colorList=g.$picker,u(document).on("mousedown."+g.type,u.proxy(g.hidePicker,g)),g.$picker.on("mousedown."+g.type,u.proxy(g.mousedown,g))):(g.$inline=u('<span class="simplecolorpicker inline '+g.options.theme+'"></span>').insertAfter(g.$select),g.$colorList=g.$inline);g.$select.find("> option").each(function(){var a=u(this),f=a.val(),c=a.is(":selected"),d=a.is(":disabled"),
b="";!0===c&&(b=" data-selected");c="";!0===d&&(c=" data-disabled");var k="";!1===d&&(k=' title="'+a.text()+'"');var t="";!1===d&&(t=' role="button" tabindex="0"');f=u('<span class="color"'+k+' style="background-color: '+f+';" data-color="'+f+'"'+b+c+t+"></span>");g.$colorList.append(f);f.on("click."+g.type,u.proxy(g.colorSpanClicked,g));!0===a.next().is("optgroup")&&g.$colorList.append('<span class="vr"></span>')})},selectColor:function(e){var l=this.$colorList.find("> span.color").filter(function(){return u(this).data("color").toLowerCase()===
e.toLowerCase()});0<l.length?this.selectColorSpan(l):console.error("The given color '"+e+"' could not be found")},showPicker:function(){var e=this.$icon.offset();this.$picker.css({left:e.left-6,top:e.top+this.$icon.outerHeight()});this.$picker.show(this.options.pickerDelay)},hidePicker:function(){this.$picker.hide(this.options.pickerDelay)},selectColorSpan:function(e){var l=e.data("color"),b=e.prop("title");e.siblings().removeAttr("data-selected");e.attr("data-selected","");!0===this.options.picker&&
(this.$icon.css("background-color",l),this.$icon.prop("title",b),this.hidePicker());this.$select.val(l)},colorSpanClicked:function(e){!1===u(e.target).is("[data-disabled]")&&(this.selectColorSpan(u(e.target)),this.$select.trigger("change"))},mousedown:function(e){e.stopPropagation();e.preventDefault()},destroy:function(){!0===this.options.picker&&(this.$icon.off("."+this.type),this.$icon.remove(),u(document).off("."+this.type));this.$colorList.off("."+this.type);this.$colorList.remove();this.$select.removeData(this.type);
this.$select.show()}};u.fn.simplecolorpicker=function(h){var l=u.makeArray(arguments);l.shift();return this.each(function(){var b=u(this),g=b.data("simplecolorpicker"),a="object"===typeof h&&h;void 0===g&&b.data("simplecolorpicker",g=new e(this,a));"string"===typeof h&&g[h].apply(g,l)})};u.fn.simplecolorpicker.defaults={theme:"",picker:!1,pickerDelay:0}})(jQuery);/*

 pixi.js - v3.0.9
 Compiled 2015-12-22T18:28:46.266Z

 pixi.js is licensed under the MIT License.
 http://www.opensource.org/licenses/mit-license.php


 The MIT License

 Copyright (c) 2013-2015 Mathew Groves

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.


   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
   2013-2015 GoodBoyDigital
 @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
*/
(function(u){"object"===typeof exports&&"undefined"!==typeof module?module.exports=u():"function"===typeof define&&define.amd?define([],u):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).PIXI=u()})(function(){return function e(h,l,b){function g(c,d){if(!l[c]){if(!h[c]){var f="function"==typeof require&&require;if(!d&&f)return f(c,!0);if(a)return a(c,!0);f=Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f;}f=l[c]={exports:{}};
h[c][0].call(f.exports,function(a){var d=h[c][1][a];return g(d?d:a)},f,f.exports,e,h,l,b)}return l[c].exports}for(var a="function"==typeof require&&require,f=0;f<b.length;f++)g(b[f]);return g}({1:[function(e,h,l){(function(b,g){(function(){function a(){}function f(a){return a}function c(a){return!!a}function d(a){return!a}function m(a){return function(){if(null===a)throw Error("Callback was already called.");a.apply(this,arguments);a=null}}function k(a){return function(){null!==a&&(a.apply(this,arguments),
a=null)}}function t(a){return R(a)||"number"===typeof a.length&&0<=a.length&&0===a.length%1}function n(a,c){for(var d=-1,f=a.length;++d<f;)c(a[d],d,a)}function B(a,c){for(var d=-1,f=a.length,b=Array(f);++d<f;)b[d]=c(a[d],d,a);return b}function e(a){return B(Array(a),function(a,c){return c})}function p(a,c,d){n(a,function(a,f,b){d=c(d,a,f,b)});return d}function r(a,c){n(T(a),function(d){c(a[d],d)})}function E(a,c){for(var d=0;d<a.length;d++)if(a[d]===c)return d;return-1}function y(a){var c=-1,d,f;
if(t(a))return d=a.length,function(){c++;return c<d?c:null};f=T(a);d=f.length;return function(){c++;return c<d?f[c]:null}}function A(a,c){c=null==c?a.length-1:+c;return function(){for(var d=Math.max(arguments.length-c,0),f=Array(d),b=0;b<d;b++)f[b]=arguments[b+c];switch(c){case 0:return a.call(this,f);case 1:return a.call(this,arguments[0],f)}}}function v(a){return function(c,d,f){return a(c,f)}}function C(c){return function(d,f,b){b=k(b||a);d=d||[];var n=y(d);if(0>=c)return b(null);var t=!1,g=0,
B=!1;(function X(){if(t&&0>=g)return b(null);for(;g<c&&!B;){var a=n();if(null===a){t=!0;0>=g&&b(null);break}g+=1;f(d[a],a,m(function(a){--g;a?(b(a),B=!0):X()}))}})()}}function G(a){return function(c,d,f){return a(z.eachOf,c,d,f)}}function L(a){return function(c,d,f,b){return a(C(d),c,f,b)}}function F(a){return function(c,d,f){return a(z.eachOfSeries,c,d,f)}}function x(c,d,f,b){b=k(b||a);d=d||[];var m=t(d)?[]:{};c(d,function(a,c,d){f(a,function(a,f){m[c]=f;d(a)})},function(a){b(a,m)})}function M(a,
c,d,f){var b=[];a(c,function(a,c,f){d(a,function(d){d&&b.push({index:c,value:a});f()})},function(){f(B(b.sort(function(a,c){return a.index-c.index}),function(a){return a.value}))})}function D(a,c,d,f){M(a,c,function(a,c){d(a,function(a){c(!a)})},f)}function w(a,c,d){return function(f,b,m,k){function n(){k&&k(d(!1,void 0))}function t(a,f,b){if(!k)return b();m(a,function(f){k&&c(f)&&(k(d(!0,a)),k=m=!1);b()})}3<arguments.length?a(f,b,t,n):(k=m,m=b,a(f,t,n))}}function l(a,c){return c}function J(c,d,f){f=
f||a;var b=t(d)?[]:{};c(d,function(a,c,d){a(A(function(a,f){1>=f.length&&(f=f[0]);b[c]=f;d(a)}))},function(a){f(a,b)})}function N(a,c,d,f){var b=[];a(c,function(a,c,f){d(a,function(a,c){b=b.concat(c||[]);f(a)})},function(a){f(a,b)})}function I(c,d,f){function b(c,d,f,m){if(null!=m&&"function"!==typeof m)throw Error("task callback must be a function");c.started=!0;R(d)||(d=[d]);if(0===d.length&&c.idle())return z.setImmediate(function(){c.drain()});n(d,function(d){d={data:d,callback:m||a};f?c.tasks.unshift(d):
c.tasks.push(d);c.tasks.length===c.concurrency&&c.saturated()});z.setImmediate(c.process)}function k(a,c){return function(){--t;var d=!1,f=arguments;n(c,function(a){n(g,function(c,f){c!==a||d||(g.splice(f,1),d=!0)});a.callback.apply(a,f)});0===a.tasks.length+t&&a.drain();a.process()}}if(null==d)d=1;else if(0===d)throw Error("Concurrency must not be zero");var t=0,g=[],e={tasks:[],concurrency:d,payload:f,saturated:a,empty:a,drain:a,started:!1,paused:!1,push:function(a,c){b(e,a,!1,c)},kill:function(){e.drain=
a;e.tasks=[]},unshift:function(a,c){b(e,a,!0,c)},process:function(){if(!e.paused&&t<e.concurrency&&e.tasks.length)for(;t<e.concurrency&&e.tasks.length;){var a=e.payload?e.tasks.splice(0,e.payload):e.tasks.splice(0,e.tasks.length),d=B(a,function(a){return a.data});0===e.tasks.length&&e.empty();t+=1;g.push(a[0]);a=m(k(e,a));c(d,a)}},length:function(){return e.tasks.length},running:function(){return t},workersList:function(){return g},idle:function(){return 0===e.tasks.length+t},pause:function(){e.paused=
!0},resume:function(){if(!1!==e.paused){e.paused=!1;for(var a=Math.min(e.concurrency,e.tasks.length),c=1;c<=a;c++)z.setImmediate(e.process)}}};return e}function H(a){return A(function(c,d){c.apply(null,d.concat([A(function(c,d){"object"===typeof console&&(c?console.error&&console.error(c):console[a]&&n(d,function(c){console[a](c)}))})]))})}function O(a){return function(c,d,f){a(e(c),d,f)}}function P(a){return A(function(c,d){var f=A(function(d){var f=this,b=d.pop();return a(c,function(a,c,b){a.apply(f,
d.concat([b]))},b)});return d.length?f.apply(this,d):f})}function Q(a){return A(function(c){var d=c.pop();c.push(function(){var a=arguments;f?z.setImmediate(function(){d.apply(null,a)}):d.apply(null,a)});var f=!0;a.apply(this,c);f=!1})}var z={},V,S="object"===typeof self&&self.self===self&&self||"object"===typeof g&&g.global===g&&g||this;null!=S&&(V=S.async);z.noConflict=function(){S.async=V;return z};var Y=Object.prototype.toString,R=Array.isArray||function(a){return"[object Array]"===Y.call(a)},
Z=function(a){var c=typeof a;return"function"===c||"object"===c&&!!a},T=Object.keys||function(a){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(d);return c},U="function"===typeof setImmediate&&setImmediate,W=U?function(a){U(a)}:function(a){setTimeout(a,0)};z.nextTick="object"===typeof b&&"function"===typeof b.nextTick?b.nextTick:W;z.setImmediate=U?W:z.nextTick;z.forEach=z.each=function(a,c,d){return z.eachOf(a,v(c),d)};z.forEachSeries=z.eachSeries=function(a,c,d){return z.eachOfSeries(a,v(c),d)};
z.forEachLimit=z.eachLimit=function(a,c,d,f){return C(c)(a,v(d),f)};z.forEachOf=z.eachOf=function(c,d,f){function b(a){g--;a?f(a):null===t&&0>=g&&f(null)}f=k(f||a);c=c||[];for(var n=y(c),t,g=0;null!=(t=n());)g+=1,d(c[t],t,m(b));0===g&&f(null)};z.forEachOfSeries=z.eachOfSeries=function(c,d,f){function b(){var a=!0;if(null===t)return f(null);d(c[t],t,m(function(c){if(c)f(c);else{t=n();if(null===t)return f(null);a?z.setImmediate(b):b()}}));a=!1}f=k(f||a);c=c||[];var n=y(c),t=n();b()};z.forEachOfLimit=
z.eachOfLimit=function(a,c,d,f){C(c)(a,d,f)};z.map=G(x);z.mapSeries=F(x);z.mapLimit=L(x);z.inject=z.foldl=z.reduce=function(a,c,d,f){z.eachOfSeries(a,function(a,f,b){d(c,a,function(a,d){c=d;b(a)})},function(a){f(a,c)})};z.foldr=z.reduceRight=function(a,c,d,b){a=B(a,f).reverse();z.reduce(a,c,d,b)};z.transform=function(a,c,d,f){3===arguments.length&&(f=d,d=c,c=R(a)?[]:{});z.eachOf(a,function(a,f,b){d(c,a,f,b)},function(a){f(a,c)})};z.select=z.filter=G(M);z.selectLimit=z.filterLimit=L(M);z.selectSeries=
z.filterSeries=F(M);z.reject=G(D);z.rejectLimit=L(D);z.rejectSeries=F(D);z.any=z.some=w(z.eachOf,c,f);z.someLimit=w(z.eachOfLimit,c,f);z.all=z.every=w(z.eachOf,d,d);z.everyLimit=w(z.eachOfLimit,d,d);z.detect=w(z.eachOf,f,l);z.detectSeries=w(z.eachOfSeries,f,l);z.detectLimit=w(z.eachOfLimit,f,l);z.sortBy=function(a,c,d){function f(a,c){var d=a.criteria,b=c.criteria;return d<b?-1:d>b?1:0}z.map(a,function(a,d){c(a,function(c,f){c?d(c):d(null,{value:a,criteria:f})})},function(a,c){if(a)return d(a);d(null,
B(c.sort(f),function(a){return a.value}))})};z.auto=function(c,d,f){function b(){t--;n(e.slice(0),function(a){a()})}f||(f=d,d=null);f=k(f||a);var m=T(c),t=m.length;if(!t)return f(null);d||(d=t);var g={},B=0,e=[];e.unshift(function(){t||f(null,g)});n(m,function(a){function m(){return B<d&&p(q,function(a,c){return a&&g.hasOwnProperty(c)},!0)&&!g.hasOwnProperty(a)}function k(){if(m()){B++;var a=E(e,k);0<=a&&e.splice(a,1);n[n.length-1](t,g)}}for(var n=R(c[a])?c[a]:[c[a]],t=A(function(c,d){B--;1>=d.length&&
(d=d[0]);if(c){var m={};r(g,function(a,c){m[c]=a});m[a]=d;f(c,m)}else g[a]=d,z.setImmediate(b)}),q=n.slice(0,n.length-1),y=q.length,v;y--;){if(!(v=c[q[y]]))throw Error("Has inexistant dependency");if(R(v)&&0<=E(v,a))throw Error("Has cyclic dependencies");}m()?(B++,n[n.length-1](t,g)):e.unshift(k)})};z.retry=function(a,c,d){function f(a,c){if("number"===typeof c)a.times=parseInt(c,10)||5;else if("object"===typeof c)a.times=parseInt(c.times,10)||5,a.interval=parseInt(c.interval,10)||0;else throw Error("Unsupported argument type for 'times': "+
typeof c);}function b(a,c){function d(a,f){return function(d){a(function(a,c){d(!a||f,{err:a,result:c})},c)}}function f(a){return function(c){setTimeout(function(){c(null)},a)}}for(;k.times;){var n=!--k.times;m.push(d(k.task,n));!n&&0<k.interval&&m.push(f(k.interval))}z.series(m,function(c,d){d=d[d.length-1];(a||k.callback)(d.err,d.result)})}var m=[],k={times:5,interval:0},n=arguments.length;if(1>n||3<n)throw Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");
2>=n&&"function"===typeof a&&(d=c,c=a);"function"!==typeof a&&f(k,a);k.callback=d;k.task=c;return k.callback?b():b};z.waterfall=function(c,d){function f(a){return A(function(c,b){if(c)d.apply(null,[c].concat(b));else{var m=a.next();m?b.push(f(m)):b.push(d);Q(a).apply(null,b)}})}d=k(d||a);if(!R(c))return d(Error("First argument to waterfall must be an array of functions"));if(!c.length)return d();f(z.iterator(c))()};z.parallel=function(a,c){J(z.eachOf,a,c)};z.parallelLimit=function(a,c,d){J(C(c),a,
d)};z.series=function(a,c){J(z.eachOfSeries,a,c)};z.iterator=function(a){function c(d){function f(){a.length&&a[d].apply(null,arguments);return f.next()}f.next=function(){return d<a.length-1?c(d+1):null};return f}return c(0)};z.apply=A(function(a,c){return A(function(d){return a.apply(null,c.concat(d))})});z.concat=G(N);z.concatSeries=F(N);z.whilst=function(c,d,f){f=f||a;if(c()){var b=A(function(a,m){a?f(a):c.apply(this,m)?d(b):f(null)});d(b)}else f(null)};z.doWhilst=function(a,c,d){var f=0;return z.whilst(function(){return 1>=
++f||c.apply(this,arguments)},a,d)};z.until=function(a,c,d){return z.whilst(function(){return!a.apply(this,arguments)},c,d)};z.doUntil=function(a,c,d){return z.doWhilst(a,function(){return!c.apply(this,arguments)},d)};z.during=function(c,d,f){f=f||a;var b=A(function(a,d){a?f(a):(d.push(m),c.apply(this,d))}),m=function(a,c){a?f(a):c?d(b):f(null)};c(m)};z.doDuring=function(a,c,d){var f=0;z.during(function(a){1>f++?a(null,!0):c.apply(this,arguments)},a,d)};z.queue=function(a,c){return I(function(c,d){a(c[0],
d)},c,1)};z.priorityQueue=function(c,d){function f(a,c){return a.priority-c.priority}function b(a,c,d){for(var f=-1,m=a.length-1;f<m;){var k=f+(m-f+1>>>1);0<=d(c,a[k])?f=k:m=k-1}return f}function m(c,d,k,t){if(null!=t&&"function"!==typeof t)throw Error("task callback must be a function");c.started=!0;R(d)||(d=[d]);if(0===d.length)return z.setImmediate(function(){c.drain()});n(d,function(d){d={data:d,priority:k,callback:"function"===typeof t?t:a};c.tasks.splice(b(c.tasks,d,f)+1,0,d);c.tasks.length===
c.concurrency&&c.saturated();z.setImmediate(c.process)})}var k=z.queue(c,d);k.push=function(a,c,d){m(k,a,c,d)};delete k.unshift;return k};z.cargo=function(a,c){return I(a,1,c)};z.log=H("log");z.dir=H("dir");z.memoize=function(a,c){var d={},b={};c=c||f;var m=A(function(f){var m=f.pop(),k=c.apply(null,f);k in d?z.setImmediate(function(){m.apply(null,d[k])}):k in b?b[k].push(m):(b[k]=[m],a.apply(null,f.concat([A(function(a){d[k]=a;var c=b[k];delete b[k];for(var f=0,m=c.length;f<m;f++)c[f].apply(null,
a)})])))});m.memo=d;m.unmemoized=a;return m};z.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}};z.times=O(z.map);z.timesSeries=O(z.mapSeries);z.timesLimit=function(a,c,d,f){return z.mapLimit(e(a),c,d,f)};z.seq=function(){var c=arguments;return A(function(d){var f=this,b=d[d.length-1];"function"==typeof b?d.pop():b=a;z.reduce(c,d,function(a,c,d){c.apply(f,a.concat([A(function(a,c){d(a,c)})]))},function(a,c){b.apply(f,[a].concat(c))})})};z.compose=function(){return z.seq.apply(null,
Array.prototype.reverse.call(arguments))};z.applyEach=P(z.eachOf);z.applyEachSeries=P(z.eachOfSeries);z.forever=function(c,d){function f(a){if(a)return b(a);k(f)}var b=m(d||a),k=Q(c);f()};z.ensureAsync=Q;z.constant=A(function(a){var c=[null].concat(a);return function(a){return a.apply(this,c)}});z.wrapSync=z.asyncify=function(a){return A(function(c){var d=c.pop(),f;try{f=a.apply(this,c)}catch(b){return d(b)}if(Z(f)&&"function"===typeof f.then)f.then(function(a){d(null,a)})["catch"](function(a){d(a.message?
a:Error(a))});else d(null,f)})};"object"===typeof h&&h.exports?h.exports=z:S.async=z})()}).call(this,e("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:3}],2:[function(e,h,l){(function(b){function g(a,c){for(var f=0,b=a.length-1;0<=b;b--){var n=a[b];"."===n?a.splice(b,1):".."===n?(a.splice(b,1),f++):f&&(a.splice(b,1),f--)}if(c)for(;f--;f)a.unshift("..");return a}function a(a,c){if(a.filter)return a.filter(c);for(var f=
[],b=0;b<a.length;b++)c(a[b],b,a)&&f.push(a[b]);return f}var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;l.resolve=function(){for(var c="",f=!1,k=arguments.length-1;-1<=k&&!f;k--){var t=0<=k?arguments[k]:b.cwd();if("string"!==typeof t)throw new TypeError("Arguments to path.resolve must be strings");t&&(c=t+"/"+c,f="/"===t.charAt(0))}c=g(a(c.split("/"),function(a){return!!a}),!f).join("/");return(f?"/":"")+c||"."};l.normalize=function(d){var f=l.isAbsolute(d),b="/"===c(d,-1);
(d=g(a(d.split("/"),function(a){return!!a}),!f).join("/"))||f||(d=".");d&&b&&(d+="/");return(f?"/":"")+d};l.isAbsolute=function(a){return"/"===a.charAt(0)};l.join=function(){var c=Array.prototype.slice.call(arguments,0);return l.normalize(a(c,function(a,c){if("string"!==typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))};l.relative=function(a,c){function f(a){for(var c=0;c<a.length&&""===a[c];c++);for(var d=a.length-1;0<=d&&""===a[d];d--);return c>d?[]:a.slice(c,
d-c+1)}a=l.resolve(a).substr(1);c=l.resolve(c).substr(1);for(var b=f(a.split("/")),n=f(c.split("/")),g=Math.min(b.length,n.length),e=g,p=0;p<g;p++)if(b[p]!==n[p]){e=p;break}g=[];for(p=e;p<b.length;p++)g.push("..");g=g.concat(n.slice(e));return g.join("/")};l.sep="/";l.delimiter=":";l.dirname=function(a){var c=f.exec(a).slice(1);a=c[0];c=c[1];if(!a&&!c)return".";c&&(c=c.substr(0,c.length-1));return a+c};l.basename=function(a,c){var b=f.exec(a).slice(1)[2];c&&b.substr(-1*c.length)===c&&(b=b.substr(0,
b.length-c.length));return b};l.extname=function(a){return f.exec(a).slice(1)[3]};var c="b"==="ab".substr(-1)?function(a,c,f){return a.substr(c,f)}:function(a,c,f){0>c&&(c=a.length+c);return a.substr(c,f)}}).call(this,e("_process"))},{_process:3}],3:[function(e,h,l){function b(){d=!1;m.length?c=m.concat(c):k=-1;c.length&&g()}function g(){if(!d){var a=setTimeout(b);d=!0;for(var f=c.length;f;){m=c;for(c=[];++k<f;)m&&m[k].run();k=-1;f=c.length}m=null;d=!1;clearTimeout(a)}}function a(a,c){this.fun=a;
this.array=c}function f(){}e=h.exports={};var c=[],d=!1,m,k=-1;e.nextTick=function(f){var b=Array(arguments.length-1);if(1<arguments.length)for(var k=1;k<arguments.length;k++)b[k-1]=arguments[k];c.push(new a(f,b));1!==c.length||d||setTimeout(g,0)};a.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=!0;e.env={};e.argv=[];e.version="";e.versions={};e.on=f;e.addListener=f;e.once=f;e.off=f;e.removeListener=f;e.removeAllListeners=f;e.emit=f;e.binding=function(a){throw Error("process.binding is not supported");
};e.cwd=function(){return"/"};e.chdir=function(a){throw Error("process.chdir is not supported");};e.umask=function(){return 0}},{}],4:[function(e,h,l){(function(b){(function(g){function a(a){throw RangeError(v[a]);}function f(a,c){for(var d=a.length,f=[];d--;)f[d]=c(a[d]);return f}function c(a,c){var d=a.split("@"),b="";1<d.length&&(b=d[0]+"@",a=d[1]);a=a.replace(A,".");d=a.split(".");d=f(d,c).join(".");return b+d}function d(a){for(var c=[],d=0,f=a.length,b,k;d<f;)b=a.charCodeAt(d++),55296<=b&&56319>=
b&&d<f?(k=a.charCodeAt(d++),56320==(k&64512)?c.push(((b&1023)<<10)+(k&1023)+65536):(c.push(b),d--)):c.push(b);return c}function m(a){return f(a,function(a){var c="";65535<a&&(a-=65536,c+=G(a>>>10&1023|55296),a=56320|a&1023);return c+=G(a)}).join("")}function k(a,c){return a+22+75*(26>a)-((0!=c)<<5)}function t(a,c,d){var f=0;a=d?C(a/700):a>>1;for(a+=C(a/c);455<a;f+=36)a=C(a/35);return C(f+36*a/(a+38))}function n(c){var d=[],f=c.length,b,k=0,n=128,g=72,B,e,q,p,r;B=c.lastIndexOf("-");0>B&&(B=0);for(e=
0;e<B;++e)128<=c.charCodeAt(e)&&a("not-basic"),d.push(c.charCodeAt(e));for(B=0<B?B+1:0;B<f;){e=k;b=1;for(q=36;;q+=36){B>=f&&a("invalid-input");p=c.charCodeAt(B++);p=10>p-48?p-22:26>p-65?p-65:26>p-97?p-97:36;(36<=p||p>C((2147483647-k)/b))&&a("overflow");k+=p*b;r=q<=g?1:q>=g+26?26:q-g;if(p<r)break;p=36-r;b>C(2147483647/p)&&a("overflow");b*=p}b=d.length+1;g=t(k-e,b,0==e);C(k/b)>2147483647-n&&a("overflow");n+=C(k/b);k%=b;d.splice(k++,0,n)}return m(d)}function B(c){var f,b,m,n,g,B,e,p,q,r=[],y,v,E;c=d(c);
y=c.length;f=128;b=0;g=72;for(B=0;B<y;++B)q=c[B],128>q&&r.push(G(q));for((m=n=r.length)&&r.push("-");m<y;){e=2147483647;for(B=0;B<y;++B)q=c[B],q>=f&&q<e&&(e=q);v=m+1;e-f>C((2147483647-b)/v)&&a("overflow");b+=(e-f)*v;f=e;for(B=0;B<y;++B)if(q=c[B],q<f&&2147483647<++b&&a("overflow"),q==f){p=b;for(e=36;;e+=36){q=e<=g?1:e>=g+26?26:e-g;if(p<q)break;E=p-q;p=36-q;r.push(G(k(q+E%p,0)));p=C(E/p)}r.push(G(k(p,0)));g=t(b,v,m==n);b=0;++m}++b;++f}return r.join("")}var e="object"==typeof l&&l&&!l.nodeType&&l,p=
"object"==typeof h&&h&&!h.nodeType&&h,r="object"==typeof b&&b;if(r.global===r||r.window===r||r.self===r)g=r;var E=/^xn--/,y=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=Math.floor,G=String.fromCharCode,L,r={version:"1.3.2",ucs2:{decode:d,encode:m},decode:n,encode:B,toASCII:function(a){return c(a,function(a){return y.test(a)?"xn--"+B(a):a})},
toUnicode:function(a){return c(a,function(a){return E.test(a)?n(a.slice(4).toLowerCase()):a})}};if(e&&p)if(h.exports==e)p.exports=r;else for(L in r)r.hasOwnProperty(L)&&(e[L]=r[L]);else g.punycode=r})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],5:[function(e,h,l){h.exports=function(g,a,f,c){f=f||"=";var d={};if("string"!==typeof g||0===g.length)return d;var m=/\+/g;g=g.split(a||"&");a=1E3;c&&"number"===typeof c.maxKeys&&
(a=c.maxKeys);c=g.length;0<a&&c>a&&(c=a);for(a=0;a<c;++a){var k=g[a].replace(m,"%20"),t=k.indexOf(f),n;0<=t?(n=k.substr(0,t),k=k.substr(t+1)):(n=k,k="");n=decodeURIComponent(n);k=decodeURIComponent(k);Object.prototype.hasOwnProperty.call(d,n)?b(d[n])?d[n].push(k):d[n]=[d[n],k]:d[n]=k}return d};var b=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)}},{}],6:[function(e,h,l){function b(a,d){if(a.map)return a.map(d);for(var f=[],b=0;b<a.length;b++)f.push(d(a[b],b));
return f}var g=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}};h.exports=function(c,d,m,k){d=d||"&";m=m||"=";null===c&&(c=void 0);return"object"===typeof c?b(f(c),function(f){var k=encodeURIComponent(g(f))+m;return a(c[f])?b(c[f],function(a){return k+encodeURIComponent(g(a))}).join(d):k+encodeURIComponent(g(c[f]))}).join(d):k?encodeURIComponent(g(k))+m+encodeURIComponent(g(c)):""};var a=Array.isArray||
function(a){return"[object Array]"===Object.prototype.toString.call(a)},f=Object.keys||function(a){var d=[],f;for(f in a)Object.prototype.hasOwnProperty.call(a,f)&&d.push(f);return d}},{}],7:[function(e,h,l){l.decode=l.parse=e("./decode");l.encode=l.stringify=e("./encode")},{"./decode":5,"./encode":6}],8:[function(e,h,l){function b(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function g(c,d,f){if(c&&
a(c)&&c instanceof b)return c;var k=new b;k.parse(c,d,f);return k}function a(a){return"object"===typeof a&&null!==a}var f=e("punycode");l.parse=g;l.resolve=function(a,c){return g(a,!1,!0).resolve(c)};l.resolveObject=function(a,c){return a?g(a,!1,!0).resolveObject(c):c};l.format=function(a){"string"===typeof a&&(a=g(a));return a instanceof b?a.format():b.prototype.format.call(a)};l.Url=b;var c=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/;h="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var m=["'"].concat(h),
k=["%","/","?",";","#"].concat(m),t=["/","?","#"],n=/^[a-z0-9A-Z_-]{0,63}$/,B=/^([a-z0-9A-Z_-]{0,63})(.*)$/,q={javascript:!0,"javascript:":!0},p={javascript:!0,"javascript:":!0},r={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=e("querystring");b.prototype.parse=function(a,d,b){if("string"!==typeof a)throw new TypeError("Parameter 'url' must be a string, not "+typeof a);a=a.trim();var g=c.exec(a);if(g){var g=g[0],e=g.toLowerCase();this.protocol=
e;a=a.substr(g.length)}if(b||g||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var h="//"===a.substr(0,2);!h||g&&p[g]||(a=a.substr(2),this.slashes=!0)}if(!p[g]&&(h||g&&!r[g])){h=-1;for(b=0;b<t.length;b++)g=a.indexOf(t[b]),-1!==g&&(-1===h||g<h)&&(h=g);h=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h);-1!==h&&(b=a.slice(0,h),a=a.slice(h+1),this.auth=decodeURIComponent(b));h=-1;for(b=0;b<k.length;b++)g=a.indexOf(k[b]),-1!==g&&(-1===h||g<h)&&(h=g);-1===h&&(h=a.length);this.host=a.slice(0,h);a=a.slice(h);this.parseHost();
this.hostname=this.hostname||"";h="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!h){var F=this.hostname.split(/\./);b=0;for(g=F.length;b<g;b++){var x=F[b];if(x&&!x.match(n)){for(var l="",D=0,w=x.length;D<w;D++)l=127<x.charCodeAt(D)?l+"x":l+x[D];if(!l.match(n)){g=F.slice(0,b);b=F.slice(b+1);if(x=x.match(B))g.push(x[1]),b.unshift(x[2]);b.length&&(a="/"+b.join(".")+a);this.hostname=g.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();if(!h){x=
this.hostname.split(".");F=[];for(b=0;b<x.length;++b)g=x[b],F.push(g.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(g):g);this.hostname=F.join(".")}b=this.port?":"+this.port:"";this.host=(this.hostname||"")+b;this.href+=this.host;h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!q[e])for(b=0,g=m.length;b<g;b++)h=m[b],x=encodeURIComponent(h),x===h&&(x=escape(h)),a=a.split(h).join(x);b=a.indexOf("#");-1!==b&&(this.hash=a.substr(b),a=a.slice(0,b));b=a.indexOf("?");
-1!==b?(this.search=a.substr(b),this.query=a.substr(b+1),d&&(this.query=E.parse(this.query)),a=a.slice(0,b)):d&&(this.search="",this.query={});a&&(this.pathname=a);r[e]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)b=this.pathname||"",g=this.search||"",this.path=b+g;this.href=this.format();return this};b.prototype.format=function(){var c=this.auth||"";c&&(c=encodeURIComponent(c),c=c.replace(/%3A/i,":"),c+="@");var d=this.protocol||"",f=this.pathname||"",b=this.hash||
"",k=!1,m="";this.host?k=c+this.host:this.hostname&&(k=c+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(k+=":"+this.port));this.query&&a(this.query)&&Object.keys(this.query).length&&(m=E.stringify(this.query));c=this.search||m&&"?"+m||"";d&&":"!==d.substr(-1)&&(d+=":");this.slashes||(!d||r[d])&&!1!==k?(k="//"+(k||""),f&&"/"!==f.charAt(0)&&(f="/"+f)):k||(k="");b&&"#"!==b.charAt(0)&&(b="#"+b);c&&"?"!==c.charAt(0)&&(c="?"+c);f=f.replace(/[?#]/g,function(a){return encodeURIComponent(a)});
c=c.replace("#","%23");return d+k+f+c+b};b.prototype.resolve=function(a){return this.resolveObject(g(a,!1,!0)).format()};b.prototype.resolveObject=function(a){if("string"===typeof a){var c=new b;c.parse(a,!1,!0);a=c}var d=new b;Object.keys(this).forEach(function(a){d[a]=this[a]},this);d.hash=a.hash;if(""===a.href)return d.href=d.format(),d;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(c){"protocol"!==c&&(d[c]=a[c])}),r[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),
d.href=d.format(),d;if(a.protocol&&a.protocol!==d.protocol){if(!r[a.protocol])return Object.keys(a).forEach(function(c){d[c]=a[c]}),d.href=d.format(),d;d.protocol=a.protocol;if(a.host||p[a.protocol])d.pathname=a.pathname;else{for(var f=(a.pathname||"").split("/");f.length&&!(a.host=f.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==f[0]&&f.unshift("");2>f.length&&f.unshift("");d.pathname=f.join("/")}d.search=a.search;d.query=a.query;d.host=a.host||"";d.auth=a.auth;d.hostname=a.hostname||
a.host;d.port=a.port;if(d.pathname||d.search)d.path=(d.pathname||"")+(d.search||"");d.slashes=d.slashes||a.slashes;d.href=d.format();return d}var c=d.pathname&&"/"===d.pathname.charAt(0),k=a.host||a.pathname&&"/"===a.pathname.charAt(0),m=c=k||c||d.host&&a.pathname,n=d.pathname&&d.pathname.split("/")||[],f=a.pathname&&a.pathname.split("/")||[],g=d.protocol&&!r[d.protocol];g&&(d.hostname="",d.port=null,d.host&&(""===n[0]?n[0]=d.host:n.unshift(d.host)),d.host="",a.protocol&&(a.hostname=null,a.port=null,
a.host&&(""===f[0]?f[0]=a.host:f.unshift(a.host)),a.host=null),c=c&&(""===f[0]||""===n[0]));if(k)d.host=a.host||""===a.host?a.host:d.host,d.hostname=a.hostname||""===a.hostname?a.hostname:d.hostname,d.search=a.search,d.query=a.query,n=f;else if(f.length)n||(n=[]),n.pop(),n=n.concat(f),d.search=a.search,d.query=a.query;else if(null!=a.search){g&&(d.hostname=d.host=n.shift(),g=d.host&&0<d.host.indexOf("@")?d.host.split("@"):!1)&&(d.auth=g.shift(),d.host=d.hostname=g.shift());d.search=a.search;d.query=
a.query;if(null!==d.pathname||null!==d.search)d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"");d.href=d.format();return d}if(!n.length)return d.pathname=null,d.path=d.search?"/"+d.search:null,d.href=d.format(),d;for(var k=n.slice(-1)[0],f=(d.host||a.host)&&("."===k||".."===k)||""===k,t=0,B=n.length;0<=B;B--)k=n[B],"."==k?n.splice(B,1):".."===k?(n.splice(B,1),t++):t&&(n.splice(B,1),t--);if(!c&&!m)for(;t--;t)n.unshift("..");!c||""===n[0]||n[0]&&"/"===n[0].charAt(0)||n.unshift("");f&&"/"!==n.join("/").substr(-1)&&
n.push("");m=""===n[0]||n[0]&&"/"===n[0].charAt(0);g&&(d.hostname=d.host=m?"":n.length?n.shift():"",g=d.host&&0<d.host.indexOf("@")?d.host.split("@"):!1)&&(d.auth=g.shift(),d.host=d.hostname=g.shift());(c=c||d.host&&n.length)&&!m&&n.unshift("");n.length?d.pathname=n.join("/"):(d.pathname=null,d.path=null);if(null!==d.pathname||null!==d.search)d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"");d.auth=a.auth||d.auth;d.slashes=d.slashes||a.slashes;d.href=d.format();return d};b.prototype.parseHost=
function(){var a=this.host,c=d.exec(a);c&&(c=c[0],":"!==c&&(this.port=c.substr(1)),a=a.substr(0,a.length-c.length));a&&(this.hostname=a)}},{punycode:4,querystring:7}],9:[function(e,h,l){function b(a,c,d,f,b){var k=0,m,n,g;m=c;for(n=d-f;m<d;m+=f)k+=(a[n]-a[m])*(a[m+1]+a[n+1]),n=m;if(b===0<k)for(m=c;m<d;m+=f)g=q(m,a[m],a[m+1],g);else for(m=d-f;m>=c;m-=f)g=q(m,a[m],a[m+1],g);return g}function g(a,c){if(!a)return a;c||(c=a);var d=a,f;do{f=!1;var b;if(b=!d.steiner)b=d.next,b=d.x===b.x&&d.y===b.y||0===
k(d.prev,d,d.next);if(b){p(d);d=c=d.prev;if(d===d.next)return null;f=!0}else d=d.next}while(f||d!==c);return c}function a(d,f,b,e,q,r,h){if(d){if(!h&&r){var F=d,x=F;do null===x.z&&(x.z=c(x.x,x.y,e,q,r)),x.prevZ=x.prev,x=x.nextZ=x.next;while(x!==F);x.prevZ.nextZ=null;x.prevZ=null;var F=x,l,D,w,K,J,N,I=1;do{x=F;w=F=null;for(K=0;x;){K++;D=x;for(l=J=0;l<I&&(J++,D=D.nextZ,D);l++);for(N=I;0<J||0<N&&D;)0===J?(l=D,D=D.nextZ,N--):0!==N&&D?x.z<=D.z?(l=x,x=x.nextZ,J--):(l=D,D=D.nextZ,N--):(l=x,x=x.nextZ,J--),
w?w.nextZ=l:F=l,l.prevZ=w,w=l;x=D}w.nextZ=null;I*=2}while(1<K)}for(F=d;d.prev!==d.next;){x=d.prev;D=d.next;if(r)a:{w=d;N=e;var H=q,O=r;K=w.prev;J=w;I=w.next;if(0<=k(K,J,I))w=!1;else{var P=K.x>J.x?K.x>I.x?K.x:I.x:J.x>I.x?J.x:I.x,Q=K.y>J.y?K.y>I.y?K.y:I.y:J.y>I.y?J.y:I.y;l=c(K.x<J.x?K.x<I.x?K.x:I.x:J.x<I.x?J.x:I.x,K.y<J.y?K.y<I.y?K.y:I.y:J.y<I.y?J.y:I.y,N,H,O);N=c(P,Q,N,H,O);for(H=w.nextZ;H&&H.z<=N;){if(H!==w.prev&&H!==w.next&&m(K.x,K.y,J.x,J.y,I.x,I.y,H.x,H.y)&&0<=k(H.prev,H,H.next)){w=!1;break a}H=
H.nextZ}for(H=w.prevZ;H&&H.z>=l;){if(H!==w.prev&&H!==w.next&&m(K.x,K.y,J.x,J.y,I.x,I.y,H.x,H.y)&&0<=k(H.prev,H,H.next)){w=!1;break a}H=H.prevZ}w=!0}}else a:if(w=d,K=w.prev,J=w,I=w.next,0<=k(K,J,I))w=!1;else{for(l=w.next.next;l!==w.prev;){if(m(K.x,K.y,J.x,J.y,I.x,I.y,l.x,l.y)&&0<=k(l.prev,l,l.next)){w=!1;break a}l=l.next}w=!0}if(w)f.push(x.i/b),f.push(d.i/b),f.push(D.i/b),p(d),F=d=D.next;else if(d=D,d===F){if(!h)a(g(d),f,b,e,q,r,1);else if(1===h){h=f;F=b;x=d;do D=x.prev,w=x.next.next,t(D,x,x.next,
w)&&n(D,w)&&n(w,D)&&(h.push(D.i/F),h.push(x.i/F),h.push(w.i/F),p(x),p(x.next),x=d=w),x=x.next;while(x!==d);d=x;a(d,f,b,e,q,r,2)}else if(2===h)a:{h=d;do{for(F=h.next.next;F!==h.prev;){if(x=h.i!==F.i){x=h;D=F;if(!(w=x.x===D.x&&x.y===D.y)){if(w=x.next.i!==D.i&&x.prev.i!==D.i){b:{w=x;do{if(w.i!==x.i&&w.next.i!==x.i&&w.i!==D.i&&w.next.i!==D.i&&t(w,w.next,x,D)){w=!0;break b}w=w.next}while(w!==x);w=!1}w=!w}if(w=w&&n(x,D)&&n(D,x)){w=x;K=!1;J=(x.x+D.x)/2;D=(x.y+D.y)/2;do w.y>D!==w.next.y>D&&J<(w.next.x-w.x)*
(D-w.y)/(w.next.y-w.y)+w.x&&(K=!K),w=w.next;while(w!==x);w=K}}x=w}if(x){d=B(h,F);h=g(h,h.next);d=g(d,d.next);a(h,f,b,e,q,r);a(d,f,b,e,q,r);break a}F=F.next}h=h.next}while(h!==d)}break}}}}function f(a,c){return a.x-c.x}function c(a,c,d,f,b){a=32767*(a-d)/b;c=32767*(c-f)/b;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(a|a<<1)&1431655765|((c|c<<1)&1431655765)<<1}function d(a){var c=a,d=a;do c.x<d.x&&(d=c),c=c.next;while(c!==
a);return d}function m(a,c,d,f,b,k,m,n){return 0<=(b-m)*(c-n)-(a-m)*(k-n)&&0<=(a-m)*(f-n)-(d-m)*(c-n)&&0<=(d-m)*(k-n)-(b-m)*(f-n)}function k(a,c,d){return(c.y-a.y)*(d.x-c.x)-(c.x-a.x)*(d.y-c.y)}function t(a,c,d,f){return 0<k(a,c,d)!==0<k(a,c,f)&&0<k(d,f,a)!==0<k(d,f,c)}function n(a,c){return 0>k(a.prev,a,a.next)?0<=k(a,c,a.next)&&0<=k(a,a.prev,c):0>k(a,c,a.prev)||0>k(a,a.next,c)}function B(a,c){var d=new r(a.i,a.x,a.y),f=new r(c.i,c.x,c.y),b=a.next,k=c.prev;a.next=c;c.prev=a;d.next=b;b.prev=d;f.next=
d;d.prev=f;k.next=f;f.prev=k;return f}function q(a,c,d,f){a=new r(a,c,d);f?(a.next=f.next,a.prev=f,f.next.prev=a,f.next=a):(a.prev=a,a.next=a);return a}function p(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function r(a,c,d){this.i=a;this.x=c;this.y=d;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}h.exports=function(c,k,t){t=t||2;var e=k&&k.length,q=e?k[0]*t:c.length,p=b(c,0,q,t,!0),r=[];if(!p)return r;var h,x,l,
D;if(e){var w=t,e=[],K,J,N;D=0;for(K=k.length;D<K;D++)J=k[D]*w,N=D<K-1?k[D+1]*w:c.length,J=b(c,J,N,w,!1),J===J.next&&(J.steiner=!0),e.push(d(J));e.sort(f);for(D=0;D<e.length;D++){k=e[D];var I=p;w=I;K=k.x;J=k.y;N=-Infinity;var H=void 0;do{if(J<=w.y&&J>=w.next.y){var O=w.x+(J-w.y)*(w.next.x-w.x)/(w.next.y-w.y);O<=K&&O>N&&(N=O,H=w.x<w.next.x?w:w.next)}w=w.next}while(w!==I);if(H){for(var I=H,O=Infinity,P,w=H.next;w!==I;)K>=w.x&&w.x>=H.x&&m(J<H.y?K:N,J,H.x,H.y,J<H.y?N:K,J,w.x,w.y)&&(P=Math.abs(J-w.y)/
(K-w.x),(P<O||P===O&&w.x>H.x)&&n(w,k)&&(H=w,O=P)),w=w.next;I=H}else I=null;I&&(k=B(I,k),g(k,k.next));p=g(p,p.next)}}if(c.length>80*t){h=l=c[0];x=e=c[1];for(w=t;w<q;w+=t)D=c[w],k=c[w+1],D<h&&(h=D),k<x&&(x=k),D>l&&(l=D),k>e&&(e=k);l=Math.max(l-h,e-x)}a(p,r,t,h,x,l);return r}},{}],10:[function(e,h,l){function b(a,c,d){this.fn=a;this.context=c;this.once=d||!1}function g(){}var a="function"!==typeof Object.create?"~":!1;g.prototype._events=void 0;g.prototype.listeners=function(f,c){var d=a?a+f:f,d=this._events&&
this._events[d];if(c)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var b=0,k=d.length,g=Array(k);b<k;b++)g[b]=d[b].fn;return g};g.prototype.emit=function(f,c,d,b,k,g){var n=a?a+f:f;if(!this._events||!this._events[n])return!1;var n=this._events[n],B=arguments.length,e,p;if("function"===typeof n.fn){n.once&&this.removeListener(f,n.fn,void 0,!0);switch(B){case 1:return n.fn.call(n.context),!0;case 2:return n.fn.call(n.context,c),!0;case 3:return n.fn.call(n.context,c,d),!0;case 4:return n.fn.call(n.context,
c,d,b),!0;case 5:return n.fn.call(n.context,c,d,b,k),!0;case 6:return n.fn.call(n.context,c,d,b,k,g),!0}p=1;for(e=Array(B-1);p<B;p++)e[p-1]=arguments[p];n.fn.apply(n.context,e)}else{var r=n.length,h;for(p=0;p<r;p++)switch(n[p].once&&this.removeListener(f,n[p].fn,void 0,!0),B){case 1:n[p].fn.call(n[p].context);break;case 2:n[p].fn.call(n[p].context,c);break;case 3:n[p].fn.call(n[p].context,c,d);break;default:if(!e)for(h=1,e=Array(B-1);h<B;h++)e[h-1]=arguments[h];n[p].fn.apply(n[p].context,e)}}return!0};
g.prototype.on=function(f,c,d){c=new b(c,d||this);f=a?a+f:f;this._events||(this._events=a?{}:Object.create(null));this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],c]:this._events[f].push(c):this._events[f]=c;return this};g.prototype.once=function(f,c,d){c=new b(c,d||this,!0);f=a?a+f:f;this._events||(this._events=a?{}:Object.create(null));this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],c]:this._events[f].push(c):this._events[f]=c;return this};g.prototype.removeListener=
function(f,c,d,b){f=a?a+f:f;if(!this._events||!this._events[f])return this;var k=this._events[f],g=[];if(c)if(k.fn)(k.fn!==c||b&&!k.once||d&&k.context!==d)&&g.push(k);else for(var n=0,e=k.length;n<e;n++)(k[n].fn!==c||b&&!k[n].once||d&&k[n].context!==d)&&g.push(k[n]);g.length?this._events[f]=1===g.length?g[0]:g:delete this._events[f];return this};g.prototype.removeAllListeners=function(f){if(!this._events)return this;f?delete this._events[a?a+f:f]:this._events=a?{}:Object.create(null);return this};
g.prototype.off=g.prototype.removeListener;g.prototype.addListener=g.prototype.on;g.prototype.setMaxListeners=function(){return this};g.prefixed=a;"undefined"!==typeof h&&(h.exports=g)},{}],11:[function(e,h,l){var b=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;h.exports=Object.assign||function(a,f){var c,d;if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");d=Object(a);for(var m,k=1;k<arguments.length;k++){c=Object(arguments[k]);
for(var t in c)b.call(c,t)&&(d[t]=c[t]);if(Object.getOwnPropertySymbols){m=Object.getOwnPropertySymbols(c);for(var n=0;n<m.length;n++)g.call(c,m[n])&&(d[m[n]]=c[m[n]])}}return d}},{}],12:[function(e,h,l){h.exports={name:"pixi.js",version:"3.0.9",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/pixijs/pixi.js/issues",
license:"MIT",repository:{type:"git",url:"https://github.com/pixijs/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:"bin/ src/ CONTRIBUTING.md LICENSE package.json README.md".split(" "),dependencies:{async:"^1.5.0",brfs:"^1.4.1",earcut:"^2.0.7",eventemitter3:"^1.1.1","object-assign":"^4.0.1","resource-loader":"^1.6.4"},devDependencies:{browserify:"^11.1.0",chai:"^3.2.0",del:"^2.0.2",gulp:"^3.9.0",
"gulp-cached":"^1.1.0","gulp-concat":"^2.6.0","gulp-debug":"^2.1.0","gulp-header":"^1.7.1","gulp-jshint":"^1.11.2","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.4.1","gulp-util":"^3.0.6","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.2","jshint-summary":"^0.4.0",minimist:"^1.2.0",mocha:"^2.3.2","require-dir":"^0.3.0","run-sequence":"^1.1.2",testem:"^0.9.4","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",
watchify:"^3.4.0"},browserify:{transform:["brfs"]}}},{}],13:[function(e,h,l){function b(a){var f=document.createElement("div");f.style.width="100px";f.style.height="100px";f.style.position="absolute";f.style.top=0;f.style.left=0;f.style.zIndex=2;this.div=f;this.pool=[];this.renderId=0;this.debug=!1;this.renderer=a;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this.isActive=!1;window.addEventListener("keydown",this._onKeyDown,!1)}var g=e("../core");
Object.assign(g.DisplayObject.prototype,e("./accessibleTarget"));b.prototype.constructor=b;h.exports=b;b.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))};b.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",
this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))};b.prototype.updateAccessibleObjects=function(a){if(a.visible){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);a=a.children;for(var f=a.length-1;0<=f;f--)this.updateAccessibleObjects(a[f])}};b.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var a=this.renderer.view.getBoundingClientRect(),
f=a.width/this.renderer.width,c=a.height/this.renderer.height,d=this.div;d.style.left=a.left+"px";d.style.top=a.top+"px";d.style.width=this.renderer.width+"px";d.style.height=this.renderer.height+"px";for(a=0;a<this.children.length;a++){var b=this.children[a];if(b.renderId!==this.renderId)b._accessibleActive=!1,g.utils.removeItems(this.children,a,1),this.div.removeChild(b._accessibleDiv),this.pool.push(b._accessibleDiv),b._accessibleDiv=null,a--,0===this.children.length&&this.deactivate();else{var d=
b._accessibleDiv,k=b.hitArea,t=b.worldTransform;b.hitArea?(d.style.left=(t.tx+k.x*t.a)*f+"px",d.style.top=(t.ty+k.y*t.d)*c+"px",d.style.width=k.width*t.a*f+"px",d.style.height=k.height*t.d*c+"px"):(k=b.getBounds(),this.capHitArea(k),d.style.left=k.x*f+"px",d.style.top=k.y*c+"px",d.style.width=k.width*f+"px",d.style.height=k.height*c+"px")}}this.renderId++};b.prototype.capHitArea=function(a){0>a.x&&(a.width+=a.x,a.x=0);0>a.y&&(a.height+=a.y,a.y=0);a.x+a.width>this.renderer.width&&(a.width=this.renderer.width-
a.x);a.y+a.height>this.renderer.height&&(a.height=this.renderer.height-a.y)};b.prototype.addChild=function(a){var f=this.pool.pop();f||(f=document.createElement("button"),f.style.width="100px",f.style.height="100px",f.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",f.style.position="absolute",f.style.zIndex=2,f.style.borderStyle="none",f.addEventListener("click",this._onClick.bind(this)),f.addEventListener("focus",this._onFocus.bind(this)),f.addEventListener("focusout",this._onFocusOut.bind(this)));
f.title=a.accessibleTitle||"displayObject "+this.tabIndex;a._accessibleActive=!0;a._accessibleDiv=f;f.displayObject=a;this.children.push(a);this.div.appendChild(a._accessibleDiv);a._accessibleDiv.tabIndex=a.tabIndex};b.prototype._onClick=function(a){var f=this.renderer.plugins.interaction;f.dispatchEvent(a.target.displayObject,"click",f.eventData)};b.prototype._onFocus=function(a){var f=this.renderer.plugins.interaction;f.dispatchEvent(a.target.displayObject,"mouseover",f.eventData)};b.prototype._onFocusOut=
function(a){var f=this.renderer.plugins.interaction;f.dispatchEvent(a.target.displayObject,"mouseout",f.eventData)};b.prototype._onKeyDown=function(a){9===a.keyCode&&this.activate()};b.prototype._onMouseMove=function(){this.deactivate()};b.prototype.destroy=function(){this.div=null;for(var a=0;a<this.children.length;a++)this.children[a].div=null;window.document.removeEventListener("mousemove",this._onMouseMove);window.removeEventListener("keydown",this._onKeyDown);this.renderer=this.children=this.pool=
null};g.WebGLRenderer.registerPlugin("accessibility",b);g.CanvasRenderer.registerPlugin("accessibility",b)},{"../core":23,"./accessibleTarget":14}],14:[function(e,h,l){h.exports={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],15:[function(e,h,l){h.exports={accessibleTarget:e("./accessibleTarget"),AccessibilityManager:e("./AccessibilityManager")}},{"./AccessibilityManager":13,"./accessibleTarget":14}],16:[function(e,h,l){e={VERSION:e("../../package.json").version,
PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,
FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2E3};h.exports=e},{"../../package.json":12}],17:[function(e,h,l){function b(){f.call(this);this.children=[]}var g=e("../math"),a=e("../utils"),f=e("./DisplayObject"),c=e("../textures/RenderTexture"),d=new g.Matrix;b.prototype=Object.create(f.prototype);
b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var c=this.getLocalBounds().width;this.scale.x=0!==c?a/c:1;this._width=a}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var c=this.getLocalBounds().height;this.scale.y=0!==c?a/c:1;this._height=a}}});b.prototype.onChildrenChange=function(){};b.prototype.addChild=function(a){var c=arguments.length;
if(1<c)for(var d=0;d<c;d++)this.addChild(arguments[d]);else a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),this.onChildrenChange(this.children.length-1),a.emit("added",this);return a};b.prototype.addChildAt=function(a,c){if(0<=c&&c<=this.children.length)return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(c,0,a),this.onChildrenChange(c),a.emit("added",this),a;throw Error(a+"addChildAt: The index "+c+" supplied is out of bounds "+this.children.length);
};b.prototype.swapChildren=function(a,c){if(a!==c){var d=this.getChildIndex(a),f=this.getChildIndex(c);if(0>d||0>f)throw Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[d]=c;this.children[f]=a;this.onChildrenChange(d<f?d:f)}};b.prototype.getChildIndex=function(a){a=this.children.indexOf(a);if(-1===a)throw Error("The supplied DisplayObject must be a child of the caller");return a};b.prototype.setChildIndex=function(c,d){if(0>d||d>=this.children.length)throw Error("The supplied index is out of bounds");
var f=this.getChildIndex(c);a.removeItems(this.children,f,1);this.children.splice(d,0,c);this.onChildrenChange(d)};b.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw Error("getChildAt: Supplied index "+a+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[a]};b.prototype.removeChild=function(c){var d=arguments.length;if(1<d)for(var f=0;f<d;f++)this.removeChild(arguments[f]);else{d=this.children.indexOf(c);if(-1===
d)return;c.parent=null;a.removeItems(this.children,d,1);this.onChildrenChange(d);c.emit("removed",this)}return c};b.prototype.removeChildAt=function(c){var d=this.getChildAt(c);d.parent=null;a.removeItems(this.children,c,1);this.onChildrenChange(c);d.emit("removed",this);return d};b.prototype.removeChildren=function(a,c){var d=a||0,f="number"===typeof c?c:this.children.length,b=f-d;if(0<b&&b<=f){d=this.children.splice(d,b);for(f=0;f<d.length;++f)d[f].parent=null;this.onChildrenChange(a);for(f=0;f<
d.length;++f)d[f].emit("removed",this);return d}if(0===b&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.");};b.prototype.generateTexture=function(a,f,b){var n=this.getLocalBounds();a=new c(a,n.width|0,n.height|0,b,f);d.tx=-n.x;d.ty=-n.y;a.render(this,d);return a};b.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var a=0,c=this.children.length;a<c;++a)this.children[a].updateTransform()}};
b.prototype.containerUpdateTransform=b.prototype.updateTransform;b.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return g.Rectangle.EMPTY;for(var a=Infinity,c=Infinity,d=-Infinity,f=-Infinity,b,e,p=!1,r=0,h=this.children.length;r<h;++r)this.children[r].visible&&(p=!0,b=this.children[r].getBounds(),a=a<b.x?a:b.x,c=c<b.y?c:b.y,e=b.width+b.x,b=b.height+b.y,d=d>e?d:e,f=f>b?f:b);if(!p)return g.Rectangle.EMPTY;e=this._bounds;e.x=a;e.y=c;e.width=d-a;e.height=f-c;this._currentBounds=
e}return this._currentBounds};b.prototype.containerGetBounds=b.prototype.getBounds;b.prototype.getLocalBounds=function(){var a=this.worldTransform;this.worldTransform=g.Matrix.IDENTITY;for(var c=0,d=this.children.length;c<d;++c)this.children[c].updateTransform();this.worldTransform=a;this._currentBounds=null;return this.getBounds(g.Matrix.IDENTITY)};b.prototype.renderWebGL=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){var c,d;if(this._mask||this._filters){a.currentRenderer.flush();
this._filters&&this._filters.length&&a.filterManager.pushFilter(this,this._filters);this._mask&&a.maskManager.pushMask(this,this._mask);a.currentRenderer.start();this._renderWebGL(a);c=0;for(d=this.children.length;c<d;c++)this.children[c].renderWebGL(a);a.currentRenderer.flush();this._mask&&a.maskManager.popMask(this,this._mask);this._filters&&a.filterManager.popFilter();a.currentRenderer.start()}else for(this._renderWebGL(a),c=0,d=this.children.length;c<d;++c)this.children[c].renderWebGL(a)}};b.prototype._renderWebGL=
function(a){};b.prototype._renderCanvas=function(a){};b.prototype.renderCanvas=function(a){if(this.visible&&!(0>=this.alpha)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask,a);this._renderCanvas(a);for(var c=0,d=this.children.length;c<d;++c)this.children[c].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}};b.prototype.destroy=function(a){f.prototype.destroy.call(this);if(a)for(var c=0,d=this.children.length;c<d;++c)this.children[c].destroy(a);this.removeChildren();this.children=
null}},{"../math":26,"../textures/RenderTexture":64,"../utils":70,"./DisplayObject":18}],18:[function(e,h,l){function b(){f.call(this);this.position=new g.Point;this.scale=new g.Point(1,1);this.pivot=new g.Point(0,0);this.skew=new g.Point(0,0);this.rotation=0;this.alpha=1;this.renderable=this.visible=!0;this.parent=null;this.worldAlpha=1;this.worldTransform=new g.Matrix;this.filterArea=null;this._sr=0;this._cr=1;this._bounds=new g.Rectangle(0,0,1,1);this._mask=this._currentBounds=null}var g=e("../math"),
a=e("../textures/RenderTexture"),f=e("eventemitter3"),c=e("../const"),d=new g.Matrix,m={worldTransform:new g.Matrix,worldAlpha:1,children:[]};b.prototype=Object.create(f.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},worldVisible:{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},
mask:{get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0);if(this._mask=a)this._mask.renderable=!1}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}});b.prototype.updateTransform=function(){var a=this.parent.worldTransform,f=this.worldTransform,b,m,g,e,r,h;if(this.skew.x||this.skew.y)d.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,
this.skew.x,this.skew.y),f.a=d.a*a.a+d.b*a.c,f.b=d.a*a.b+d.b*a.d,f.c=d.c*a.a+d.d*a.c,f.d=d.c*a.b+d.d*a.d,f.tx=d.tx*a.a+d.ty*a.c+a.tx,f.ty=d.tx*a.b+d.ty*a.d+a.ty;else{if(this.rotation%c.PI_2){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));b=this._cr*this.scale.x;m=this._sr*this.scale.x;g=-this._sr*this.scale.y;e=this._cr*this.scale.y;r=this.position.x;h=this.position.y;if(this.pivot.x||this.pivot.y)r-=this.pivot.x*
b+this.pivot.y*g,h-=this.pivot.x*m+this.pivot.y*e;f.a=b*a.a+m*a.c;f.b=b*a.b+m*a.d;f.c=g*a.a+e*a.c;f.d=g*a.b+e*a.d}else b=this.scale.x,e=this.scale.y,r=this.position.x-this.pivot.x*b,h=this.position.y-this.pivot.y*e,f.a=b*a.a,f.b=b*a.b,f.c=e*a.c,f.d=e*a.d;f.tx=r*a.a+h*a.c+a.tx;f.ty=r*a.b+h*a.d+a.ty}this.worldAlpha=this.alpha*this.parent.worldAlpha;this._currentBounds=null};b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform;b.prototype.getBounds=function(a){return g.Rectangle.EMPTY};
b.prototype.getLocalBounds=function(){return this.getBounds(g.Matrix.IDENTITY)};b.prototype.toGlobal=function(a){this.parent?this.displayObjectUpdateTransform():(this.parent=m,this.displayObjectUpdateTransform(),this.parent=null);return this.worldTransform.apply(a)};b.prototype.toLocal=function(a,c,d){c&&(a=c.toGlobal(a));this.parent?this.displayObjectUpdateTransform():(this.parent=m,this.displayObjectUpdateTransform(),this.parent=null);return this.worldTransform.applyInverse(a,d)};b.prototype.renderWebGL=
function(a){};b.prototype.renderCanvas=function(a){};b.prototype.generateTexture=function(c,f,b){var m=this.getLocalBounds();c=new a(c,m.width|0,m.height|0,f,b);d.tx=-m.x;d.ty=-m.y;c.render(this,d);return c};b.prototype.setParent=function(a){if(!a||!a.addChild)throw Error("setParent: Argument must be a Container");a.addChild(this);return a};b.prototype.setTransform=function(a,c,d,f,b,m,g,e,h){this.position.x=a||0;this.position.y=c||0;this.scale.x=d?d:1;this.scale.y=f?f:1;this.rotation=b||0;this.skew.x=
m||0;this.skew.y=g||0;this.pivot.x=e||0;this.pivot.y=h||0;return this};b.prototype.destroy=function(){this.filterArea=this.worldTransform=this._mask=this._currentBounds=this._bounds=this.parent=this.skew=this.pivot=this.scale=this.position=null}},{"../const":16,"../math":26,"../textures/RenderTexture":64,eventemitter3:10}],19:[function(e,h,l){function b(){g.call(this);this.fillAlpha=1;this.lineColor=this.lineWidth=0;this.graphicsData=[];this._prevTint=this.tint=16777215;this.blendMode=k.BLEND_MODES.NORMAL;
this.currentPath=null;this._webGL={};this.isMask=!1;this.boundsPadding=0;this._localBounds=new m.Rectangle(0,0,1,1);this.dirty=!0;this.glDirty=!1;this.boundsDirty=!0;this.cachedSpriteDirty=!1}var g=e("../display/Container"),a=e("../textures/Texture"),f=e("../renderers/canvas/utils/CanvasBuffer"),c=e("../renderers/canvas/utils/CanvasGraphics"),d=e("./GraphicsData"),m=e("../math"),k=e("../const"),t=new m.Point;b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.clone=
function(){var a=new b;a.renderable=this.renderable;a.fillAlpha=this.fillAlpha;a.lineWidth=this.lineWidth;a.lineColor=this.lineColor;a.tint=this.tint;a.blendMode=this.blendMode;a.isMask=this.isMask;a.boundsPadding=this.boundsPadding;a.dirty=!0;a.glDirty=!0;a.cachedSpriteDirty=this.cachedSpriteDirty;for(var c=0;c<this.graphicsData.length;++c)a.graphicsData.push(this.graphicsData[c].clone());a.currentPath=a.graphicsData[a.graphicsData.length-1];a.updateLocalBounds();return a};b.prototype.lineStyle=
function(a,c,d){this.lineWidth=a||0;this.lineColor=c||0;this.lineAlpha=void 0===d?1:d;this.currentPath&&(this.currentPath.shape.points.length?(a=new m.Polygon(this.currentPath.shape.points.slice(-2)),a.closed=!1,this.drawShape(a)):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha));return this};b.prototype.moveTo=function(a,c){var d=new m.Polygon([a,c]);d.closed=!1;this.drawShape(d);return this};b.prototype.lineTo=function(a,
c){this.currentPath.shape.points.push(a,c);this.dirty=!0;return this};b.prototype.quadraticCurveTo=function(a,c,d,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var b,k,m=this.currentPath.shape.points;0===m.length&&this.moveTo(0,0);for(var g=m[m.length-2],e=m[m.length-1],t,h=1;20>=h;++h)t=h/20,b=g+(a-g)*t,k=e+(c-e)*t,m.push(b+(a+(d-a)*t-b)*t,k+(c+(f-c)*t-k)*t);this.dirty=this.boundsDirty=!0;return this};b.prototype.bezierCurveTo=
function(a,c,d,f,b,k){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var m,g,t,e,h,l=this.currentPath.shape.points,F=l[l.length-2],x=l[l.length-1],M,D=1;20>=D;++D)M=D/20,m=1-M,g=m*m,t=g*m,e=M*M,h=e*M,l.push(t*F+3*g*M*a+3*m*e*d+h*b,t*x+3*g*M*c+3*m*e*f+h*k);this.dirty=this.boundsDirty=!0;return this};b.prototype.arcTo=function(a,c,d,f,b){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,
c):this.moveTo(a,c);var k=this.currentPath.shape.points,m=k[k.length-1]-c,g=k[k.length-2]-a;f-=c;d-=a;var t=Math.abs(m*d-g*f);if(1E-8>t||0===b)k[k.length-2]===a&&k[k.length-1]===c||k.push(a,c);else{var e=m*m+g*g,h=f*f+d*d,l=m*f+g*d,k=b*Math.sqrt(e)/t,t=b*Math.sqrt(h)/t,e=k*l/e,h=t*l/h,l=k*d+t*g,F=k*f+t*m;this.arc(l+a,F+c,b,Math.atan2(m*(t+e)-F,g*(t+e)-l),Math.atan2(f*(k+h)-F,d*(k+h)-l),g*f>d*m)}this.dirty=this.boundsDirty=!0;return this};b.prototype.arc=function(a,c,d,f,b,k){k=k||!1;if(f===b)return this;
!k&&b<=f?b+=2*Math.PI:k&&f<=b&&(f+=2*Math.PI);k=k?-1*(f-b):b-f;var m=40*Math.ceil(Math.abs(k)/(2*Math.PI));if(0===k)return this;b=a+Math.cos(f)*d;var g=c+Math.sin(f)*d;this.currentPath?this.currentPath.shape.points.push(b,g):this.moveTo(b,g);b=this.currentPath.shape.points;k/=2*m;for(var g=2*k,t=Math.cos(k),e=Math.sin(k),m=m-1,h=m%1/m,l=0;l<=m;l++){var F=k+f+g*(l+h*l),x=Math.cos(F),F=-Math.sin(F);b.push((t*x+e*F)*d+a,(t*-F+e*x)*d+c)}this.dirty=this.boundsDirty=!0;return this};b.prototype.beginFill=
function(a,c){this.filling=!0;this.fillColor=a||0;this.fillAlpha=void 0===c?1:c;this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha);return this};b.prototype.endFill=function(){this.filling=!1;this.fillColor=null;this.fillAlpha=1;return this};b.prototype.drawRect=function(a,c,d,f){this.drawShape(new m.Rectangle(a,c,d,f));return this};b.prototype.drawRoundedRect=function(a,
c,d,f,b){this.drawShape(new m.RoundedRectangle(a,c,d,f,b));return this};b.prototype.drawCircle=function(a,c,d){this.drawShape(new m.Circle(a,c,d));return this};b.prototype.drawEllipse=function(a,c,d,f){this.drawShape(new m.Ellipse(a,c,d,f));return this};b.prototype.drawPolygon=function(a){var c=a,d=!0;c instanceof m.Polygon&&(d=c.closed,c=c.points);if(!Array.isArray(c))for(var c=Array(arguments.length),f=0;f<c.length;++f)c[f]=arguments[f];c=new m.Polygon(c);c.closed=d;this.drawShape(c);return this};
b.prototype.clear=function(){this.lineWidth=0;this.filling=!1;this.clearDirty=this.dirty=!0;this.graphicsData=[];return this};b.prototype.generateTexture=function(d,b,k){b=b||1;d=this.getLocalBounds();var m=new f(d.width*b,d.height*b);k=a.fromCanvas(m.canvas,k);k.baseTexture.resolution=b;m.context.scale(b,b);m.context.translate(-d.x,-d.y);c.renderGraphics(this,m.context);return k};b.prototype._renderWebGL=function(a){this.glDirty&&(this.dirty=!0,this.glDirty=!1);a.setObjectRenderer(a.plugins.graphics);
a.plugins.graphics.render(this)};b.prototype._renderCanvas=function(a){if(!0!==this.isMask){this._prevTint!==this.tint&&(this.dirty=!0);var d=a.context,f=this.worldTransform,b=a.blendModes[this.blendMode];b!==d.globalCompositeOperation&&(d.globalCompositeOperation=b);a=a.resolution;d.setTransform(f.a*a,f.b*a,f.c*a,f.d*a,f.tx*a,f.ty*a);c.renderGraphics(this,d)}};b.prototype.getBounds=function(a){if(!this._currentBounds){if(!this.renderable)return m.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),
this.cachedSpriteDirty=this.glDirty=!0,this.boundsDirty=!1);var c=this._localBounds,d=c.x,f=c.width+c.x,b=c.y,k=c.height+c.y;a=a||this.worldTransform;var g=a.a,t=a.b,e=a.c,h=a.d,l=a.tx,L=a.ty,F=g*f+e*k+l,c=h*k+t*f+L;a=g*d+e*k+l;var k=h*k+t*d+L,x=g*d+e*b+l,d=h*b+t*d+L,g=g*f+e*b+l,f=h*b+t*f+L,b=F,t=c,F=a<F?a:F,F=x<F?x:F,F=g<F?g:F,c=k<c?k:c,c=d<c?d:c,c=f<c?f:c,b=a>b?a:b,b=x>b?x:b,t=k>t?k:t,t=d>t?d:t;this._bounds.x=F;this._bounds.width=(g>b?g:b)-F;this._bounds.y=c;this._bounds.height=(f>t?f:t)-c;this._currentBounds=
this._bounds}return this._currentBounds};b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,t);a=this.graphicsData;for(var c=0;c<a.length;c++){var d=a[c];if(d.fill&&d.shape&&d.shape.contains(t.x,t.y))return!0}return!1};b.prototype.updateLocalBounds=function(){var a=Infinity,c=-Infinity,d=Infinity,f=-Infinity;if(this.graphicsData.length)for(var b,m,g,t,e,h=0;h<this.graphicsData.length;h++)if(g=this.graphicsData[h],m=g.type,e=g.lineWidth,b=g.shape,m===k.SHAPES.RECT||m===k.SHAPES.RREC)m=
b.x-e/2,g=b.y-e/2,t=b.width+e,e=b.height+e,a=m<a?m:a,c=m+t>c?m+t:c,d=g<d?g:d,f=g+e>f?g+e:f;else if(m===k.SHAPES.CIRC)m=b.x,g=b.y,t=b.radius+e/2,e=b.radius+e/2,a=m-t<a?m-t:a,c=m+t>c?m+t:c,d=g-e<d?g-e:d,f=g+e>f?g+e:f;else if(m===k.SHAPES.ELIP)m=b.x,g=b.y,t=b.width+e/2,e=b.height+e/2,a=m-t<a?m-t:a,c=m+t>c?m+t:c,d=g-e<d?g-e:d,f=g+e>f?g+e:f;else for(b=b.points,t=0;t<b.length;t+=2)m=b[t],g=b[t+1],a=m-e<a?m-e:a,c=m+e>c?m+e:c,d=g-e<d?g-e:d,f=g+e>f?g+e:f;else f=d=c=a=0;h=this.boundsPadding;this._localBounds.x=
a-h;this._localBounds.width=c-a+2*h;this._localBounds.y=d-h;this._localBounds.height=f-d+2*h};b.prototype.drawShape=function(a){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop();this.currentPath=null;a=new d(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);this.graphicsData.push(a);a.type===k.SHAPES.POLY&&(a.shape.closed=a.shape.closed||this.filling,this.currentPath=a);this.dirty=this.boundsDirty=!0;return a};b.prototype.destroy=
function(){g.prototype.destroy.apply(this,arguments);for(var a=0;a<this.graphicsData.length;++a)this.graphicsData[a].destroy();for(var c in this._webgl)for(a=0;a<this._webgl[c].data.length;++a)this._webgl[c].data[a].destroy();this._localBounds=this._webgl=this.currentPath=this.graphicsData=null}},{"../const":16,"../display/Container":17,"../math":26,"../renderers/canvas/utils/CanvasBuffer":38,"../renderers/canvas/utils/CanvasGraphics":39,"../textures/Texture":65,"./GraphicsData":20}],20:[function(e,
h,l){function b(b,a,f,c,d,m,k){this.lineWidth=b;this.lineColor=a;this.lineAlpha=f;this._lineTint=a;this.fillColor=c;this.fillAlpha=d;this._fillTint=c;this.fill=m;this.shape=k;this.type=k.type}b.prototype.constructor=b;h.exports=b;b.prototype.clone=function(){return new b(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)};b.prototype.destroy=function(){this.shape=null}},{}],21:[function(e,h,l){function b(a){c.call(this,a);this.graphicsDataPool=[];this.complexPrimitiveShader=
this.primitiveShader=null;this.maximumSimplePolySize=200}var g=e("../../utils"),a=e("../../math"),f=e("../../const"),c=e("../../renderers/webgl/utils/ObjectRenderer");l=e("../../renderers/webgl/WebGLRenderer");var d=e("./WebGLGraphicsData"),m=e("earcut");b.prototype=Object.create(c.prototype);b.prototype.constructor=b;h.exports=b;l.registerPlugin("graphics",b);b.prototype.onContextChange=function(){};b.prototype.destroy=function(){c.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();
this.graphicsDataPool=null};b.prototype.render=function(a){var c=this.renderer,d=c.gl,f,b;!a.dirty&&a._webGL[d.id]||this.updateGraphics(a);var m=a._webGL[d.id];c.blendModeManager.setBlendMode(a.blendMode);for(var e=0,h=m.data.length;e<h;e++)b=m.data[e],1===m.data[e].mode?(c.stencilManager.pushStencil(a,b),d.uniform1f(c.shaderManager.complexPrimitiveShader.uniforms.alpha._location,a.worldAlpha*b.alpha),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(b.indices.length-4)),c.stencilManager.popStencil(a,
b)):(f=c.shaderManager.primitiveShader,c.shaderManager.setShader(f),d.uniformMatrix3fv(f.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),d.uniformMatrix3fv(f.uniforms.projectionMatrix._location,!1,c.currentRenderTarget.projectionMatrix.toArray(!0)),d.uniform3fv(f.uniforms.tint._location,g.hex2rgb(a.tint)),d.uniform1f(f.uniforms.alpha._location,a.worldAlpha),d.bindBuffer(d.ARRAY_BUFFER,b.buffer),d.vertexAttribPointer(f.attributes.aVertexPosition,2,d.FLOAT,!1,24,0),d.vertexAttribPointer(f.attributes.aColor,
4,d.FLOAT,!1,24,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.indexBuffer),d.drawElements(d.TRIANGLE_STRIP,b.indices.length,d.UNSIGNED_SHORT,0)),c.drawCount++};b.prototype.updateGraphics=function(a){var c=this.renderer.gl,d=a._webGL[c.id];d||(d=a._webGL[c.id]={lastIndex:0,data:[],gl:c});a.dirty=!1;if(a.clearDirty){a.clearDirty=!1;for(c=0;c<d.data.length;c++){var b=d.data[c];b.reset();this.graphicsDataPool.push(b)}d.data=[];d.lastIndex=0}for(c=d.lastIndex;c<a.graphicsData.length;c++){var m=a.graphicsData[c];
m.type===f.SHAPES.POLY?(m.points=m.shape.points.slice(),m.shape.closed&&(m.points[0]===m.points[m.points.length-2]&&m.points[1]===m.points[m.points.length-1]||m.points.push(m.points[0],m.points[1])),m.fill&&6<=m.points.length&&(m.points.length<2*this.maximumSimplePolySize?(b=this.switchMode(d,0),this.buildPoly(m,b)||(b=this.switchMode(d,1),this.buildComplexPoly(m,b))):(b=this.switchMode(d,1),this.buildComplexPoly(m,b))),0<m.lineWidth&&(b=this.switchMode(d,0),this.buildLine(m,b))):(b=this.switchMode(d,
0),m.type===f.SHAPES.RECT?this.buildRectangle(m,b):m.type===f.SHAPES.CIRC||m.type===f.SHAPES.ELIP?this.buildCircle(m,b):m.type===f.SHAPES.RREC&&this.buildRoundedRectangle(m,b));d.lastIndex++}for(c=0;c<d.data.length;c++)b=d.data[c],b.dirty&&b.upload()};b.prototype.switchMode=function(a,c){var f;if(a.data.length){if(f=a.data[a.data.length-1],32E4<f.points.length||f.mode!==c||1===c)f=this.graphicsDataPool.pop()||new d(a.gl),f.mode=c,a.data.push(f)}else f=this.graphicsDataPool.pop()||new d(a.gl),f.mode=
c,a.data.push(f);f.dirty=!0;return f};b.prototype.buildRectangle=function(a,c){var d=a.shape,f=d.x,b=d.y,m=d.width,d=d.height;if(a.fill){var e=g.hex2rgb(a.fillColor),h=a.fillAlpha,l=e[0]*h,A=e[1]*h,e=e[2]*h,v=c.points,C=c.indices,G=v.length/6;v.push(f,b);v.push(l,A,e,h);v.push(f+m,b);v.push(l,A,e,h);v.push(f,b+d);v.push(l,A,e,h);v.push(f+m,b+d);v.push(l,A,e,h);C.push(G,G,G+1,G+2,G+3,G+3)}a.lineWidth&&(h=a.points,a.points=[f,b,f+m,b,f+m,b+d,f,b+d,f,b],this.buildLine(a,c),a.points=h)};b.prototype.buildRoundedRectangle=
function(a,c){var d=a.shape,f=d.x,b=d.y,e=d.width,h=d.height,l=d.radius,d=[];d.push(f,b+l);this.quadraticBezierCurve(f,b+h-l,f,b+h,f+l,b+h,d);this.quadraticBezierCurve(f+e-l,b+h,f+e,b+h,f+e,b+h-l,d);this.quadraticBezierCurve(f+e,b+l,f+e,b,f+e-l,b,d);this.quadraticBezierCurve(f+l,b,f,b,f,b+l+1E-10,d);if(a.fill){var h=g.hex2rgb(a.fillColor),f=a.fillAlpha,b=h[0]*f,e=h[1]*f,h=h[2]*f,l=c.points,y=c.indices,A=l.length/6,v=m(d,null,2),C;for(C=0;C<v.length;C+=3)y.push(v[C]+A),y.push(v[C]+A),y.push(v[C+1]+
A),y.push(v[C+2]+A),y.push(v[C+2]+A);for(C=0;C<d.length;C++)l.push(d[C],d[++C],b,e,h,f)}a.lineWidth&&(f=a.points,a.points=d,this.buildLine(a,c),a.points=f)};b.prototype.quadraticBezierCurve=function(a,c,d,f,b,m,g){var e,h,l,v;g=g||[];for(var C,G=0;20>=G;G++)C=G/20,e=a+(d-a)*C,h=c+(f-c)*C,l=d+(b-d)*C,v=f+(m-f)*C,e+=(l-e)*C,h+=(v-h)*C,g.push(e,h);return g};b.prototype.buildCircle=function(a,c){var d=a.shape,b=d.x,m=d.y,e,h;a.type===f.SHAPES.CIRC?h=e=d.radius:(e=d.width,h=d.height);var d=Math.floor(30*
Math.sqrt(d.radius))||Math.floor(15*Math.sqrt(d.width+d.height)),l=2*Math.PI/d,y;if(a.fill){y=g.hex2rgb(a.fillColor);var A=a.fillAlpha,v=y[0]*A,C=y[1]*A,G=y[2]*A,L=c.points,F=c.indices,x=L.length/6;F.push(x);for(y=0;y<d+1;y++)L.push(b,m,v,C,G,A),L.push(b+Math.sin(l*y)*e,m+Math.cos(l*y)*h,v,C,G,A),F.push(x++,x++);F.push(x-1)}if(a.lineWidth){A=a.points;a.points=[];for(y=0;y<d+1;y++)a.points.push(b+Math.sin(l*y)*e,m+Math.cos(l*y)*h);this.buildLine(a,c);a.points=A}};b.prototype.buildLine=function(c,d){var f,
b=c.points;if(0!==b.length){var m=new a.Point(b[0],b[1]),e=new a.Point(b[b.length-2],b[b.length-1]);if(m.x===e.x&&m.y===e.y){b=b.slice();b.pop();b.pop();var e=new a.Point(b[b.length-2],b[b.length-1]),h=e.x+.5*(m.x-e.x),m=e.y+.5*(m.y-e.y);b.unshift(h,m);b.push(h,m)}var h=d.points,m=d.indices,e=b.length/2,l=b.length,y=h.length/6,A=c.lineWidth/2;f=g.hex2rgb(c.lineColor);var v=c.lineAlpha,C=f[0]*v,G=f[1]*v,L=f[2]*v,F,x,M,D,w,K,J,N,I,H,O,P,Q;M=b[0];D=b[1];w=b[2];K=b[3];I=-(D-K);H=M-w;x=Math.sqrt(I*I+H*
H);I=I/x*A;H=H/x*A;h.push(M-I,D-H,C,G,L,v);h.push(M+I,D+H,C,G,L,v);for(f=1;f<e-1;f++)M=b[2*(f-1)],D=b[2*(f-1)+1],w=b[2*f],K=b[2*f+1],J=b[2*(f+1)],N=b[2*(f+1)+1],I=-(D-K),H=M-w,x=Math.sqrt(I*I+H*H),I/=x,H/=x,I*=A,H*=A,O=-(K-N),P=w-J,x=Math.sqrt(O*O+P*P),O/=x,P/=x,O*=A,P*=A,x=-H+D-(-H+K),F=-I+w-(-I+M),M=(-I+M)*(-H+K)-(-I+w)*(-H+D),D=-P+N-(-P+K),Q=-O+w-(-O+J),J=(-O+J)*(-P+K)-(-O+w)*(-P+N),N=x*Q-D*F,.1>Math.abs(N)?(h.push(w-I,K-H,C,G,L,v),h.push(w+I,K+H,C,G,L,v)):(F=(F*J-Q*M)/N,x=(D*M-x*J)/N,J=(F-w)*
(F-w)+(x-K)*(x-K),19600<J?(I-=O,H-=P,x=Math.sqrt(I*I+H*H),I/=x,H/=x,I*=A,H*=A,h.push(w-I,K-H),h.push(C,G,L,v),h.push(w+I,K+H),h.push(C,G,L,v),h.push(w-I,K-H),h.push(C,G,L,v),l++):(h.push(F,x),h.push(C,G,L,v),h.push(w-(F-w),K-(x-K)),h.push(C,G,L,v)));M=b[2*(e-2)];D=b[2*(e-2)+1];w=b[2*(e-1)];K=b[2*(e-1)+1];I=-(D-K);H=M-w;x=Math.sqrt(I*I+H*H);I=I/x*A;H=H/x*A;h.push(w-I,K-H);h.push(C,G,L,v);h.push(w+I,K+H);h.push(C,G,L,v);m.push(y);for(f=0;f<l;f++)m.push(y++);m.push(y-1)}};b.prototype.buildComplexPoly=
function(a,c){var d=a.points.slice();if(!(6>d.length)){var f=c.indices;c.points=d;c.alpha=a.fillAlpha;c.color=g.hex2rgb(a.fillColor);for(var b=Infinity,m=-Infinity,e=Infinity,h=-Infinity,l,A,v=0;v<d.length;v+=2)l=d[v],A=d[v+1],b=l<b?l:b,m=l>m?l:m,e=A<e?A:e,h=A>h?A:h;d.push(b,e,m,e,m,h,b,h);d=d.length/2;for(v=0;v<d;v++)f.push(v)}};b.prototype.buildPoly=function(a,c){var d=a.points;if(!(6>d.length)){var f=c.points,b=c.indices,e=d.length/2,h=g.hex2rgb(a.fillColor),l=a.fillAlpha,y=h[0]*l,A=h[1]*l,h=h[2]*
l,v=m(d,null,2);if(!v)return!1;var C=f.length/6,G;for(G=0;G<v.length;G+=3)b.push(v[G]+C),b.push(v[G]+C),b.push(v[G+1]+C),b.push(v[G+2]+C),b.push(v[G+2]+C);for(G=0;G<e;G++)f.push(d[2*G],d[2*G+1],y,A,h,l);return!0}}},{"../../const":16,"../../math":26,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56,"../../utils":70,"./WebGLGraphicsData":22,earcut:9}],22:[function(e,h,l){function b(b){this.gl=b;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=b.createBuffer();
this.indexBuffer=b.createBuffer();this.alpha=this.mode=1;this.dirty=!0;this.glIndices=this.glPoints=null}b.prototype.constructor=b;h.exports=b;b.prototype.reset=function(){this.points.length=0;this.indices.length=0};b.prototype.upload=function(){var b=this.gl;this.glPoints=new Float32Array(this.points);b.bindBuffer(b.ARRAY_BUFFER,this.buffer);b.bufferData(b.ARRAY_BUFFER,this.glPoints,b.STATIC_DRAW);this.glIndices=new Uint16Array(this.indices);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);
b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.glIndices,b.STATIC_DRAW);this.dirty=!1};b.prototype.destroy=function(){this.indices=this.points=this.color=null;this.gl.deleteBuffer(this.buffer);this.gl.deleteBuffer(this.indexBuffer);this.glIndices=this.glPoints=this.indexBuffer=this.buffer=this.gl=null}},{}],23:[function(e,h,l){var b=h.exports=Object.assign(e("./const"),e("./math"),{utils:e("./utils"),ticker:e("./ticker"),DisplayObject:e("./display/DisplayObject"),Container:e("./display/Container"),Sprite:e("./sprites/Sprite"),
ParticleContainer:e("./particles/ParticleContainer"),SpriteRenderer:e("./sprites/webgl/SpriteRenderer"),ParticleRenderer:e("./particles/webgl/ParticleRenderer"),Text:e("./text/Text"),Graphics:e("./graphics/Graphics"),GraphicsData:e("./graphics/GraphicsData"),GraphicsRenderer:e("./graphics/webgl/GraphicsRenderer"),Texture:e("./textures/Texture"),BaseTexture:e("./textures/BaseTexture"),RenderTexture:e("./textures/RenderTexture"),VideoBaseTexture:e("./textures/VideoBaseTexture"),TextureUvs:e("./textures/TextureUvs"),
CanvasRenderer:e("./renderers/canvas/CanvasRenderer"),CanvasGraphics:e("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:e("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:e("./renderers/webgl/WebGLRenderer"),WebGLManager:e("./renderers/webgl/managers/WebGLManager"),ShaderManager:e("./renderers/webgl/managers/ShaderManager"),Shader:e("./renderers/webgl/shaders/Shader"),ObjectRenderer:e("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:e("./renderers/webgl/utils/RenderTarget"),AbstractFilter:e("./renderers/webgl/filters/AbstractFilter"),
FXAAFilter:e("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:e("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(g,a,f,c){g=g||800;a=a||600;return!c&&b.utils.isWebGLSupported()?new b.WebGLRenderer(g,a,f):new b.CanvasRenderer(g,a,f)}})},{"./const":16,"./display/Container":17,"./display/DisplayObject":18,"./graphics/Graphics":19,"./graphics/GraphicsData":20,"./graphics/webgl/GraphicsRenderer":21,"./math":26,"./particles/ParticleContainer":32,"./particles/webgl/ParticleRenderer":34,
"./renderers/canvas/CanvasRenderer":37,"./renderers/canvas/utils/CanvasBuffer":38,"./renderers/canvas/utils/CanvasGraphics":39,"./renderers/webgl/WebGLRenderer":42,"./renderers/webgl/filters/AbstractFilter":43,"./renderers/webgl/filters/FXAAFilter":44,"./renderers/webgl/filters/SpriteMaskFilter":45,"./renderers/webgl/managers/ShaderManager":49,"./renderers/webgl/managers/WebGLManager":51,"./renderers/webgl/shaders/Shader":54,"./renderers/webgl/utils/ObjectRenderer":56,"./renderers/webgl/utils/RenderTarget":58,
"./sprites/Sprite":60,"./sprites/webgl/SpriteRenderer":61,"./text/Text":62,"./textures/BaseTexture":63,"./textures/RenderTexture":64,"./textures/Texture":65,"./textures/TextureUvs":66,"./textures/VideoBaseTexture":67,"./ticker":69,"./utils":70}],24:[function(e,h,l){function b(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0}var g=e("./Point");b.prototype.constructor=b;h.exports=b;b.prototype.fromArray=function(a){this.a=a[0];this.b=a[1];this.c=a[3];this.d=a[4];this.tx=a[2];this.ty=a[5]};b.prototype.set=
function(a,f,c,d,b,k){this.a=a;this.b=f;this.c=c;this.d=d;this.tx=b;this.ty=k;return this};b.prototype.toArray=function(a,f){this.array||(this.array=new Float32Array(9));var c=f||this.array;a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0);c[8]=1;return c};b.prototype.apply=function(a,f){f=f||new g;var c=a.x,d=a.y;f.x=this.a*c+this.c*d+this.tx;f.y=this.b*c+this.d*d+this.ty;
return f};b.prototype.applyInverse=function(a,f){f=f||new g;var c=1/(this.a*this.d+this.c*-this.b),d=a.x,b=a.y;f.x=this.d*c*d+-this.c*c*b+(this.ty*this.c-this.tx*this.d)*c;f.y=this.a*c*b+-this.b*c*d+(-this.ty*this.a+this.tx*this.b)*c;return f};b.prototype.translate=function(a,f){this.tx+=a;this.ty+=f;return this};b.prototype.scale=function(a,f){this.a*=a;this.d*=f;this.c*=a;this.b*=f;this.tx*=a;this.ty*=f;return this};b.prototype.rotate=function(a){var f=Math.cos(a);a=Math.sin(a);var c=this.a,d=this.c,
b=this.tx;this.a=c*f-this.b*a;this.b=c*a+this.b*f;this.c=d*f-this.d*a;this.d=d*a+this.d*f;this.tx=b*f-this.ty*a;this.ty=b*a+this.ty*f;return this};b.prototype.append=function(a){var f=this.a,c=this.b,d=this.c,b=this.d;this.a=a.a*f+a.b*d;this.b=a.a*c+a.b*b;this.c=a.c*f+a.d*d;this.d=a.c*c+a.d*b;this.tx=a.tx*f+a.ty*d+this.tx;this.ty=a.tx*c+a.ty*b+this.ty;return this};b.prototype.setTransform=function(a,f,c,d,b,k,g,e,h){var q,p,r,l;q=Math.sin(g);p=Math.cos(g);g=Math.cos(h);h=Math.sin(h);r=-Math.sin(e);
l=Math.cos(e);e=p*b;b*=q;q=-q*k;k*=p;this.a=g*e+h*q;this.b=g*b+h*k;this.c=r*e+l*q;this.d=r*b+l*k;this.tx=a+(c*e+d*q);this.ty=f+(c*b+d*k);return this};b.prototype.prepend=function(a){var f=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var c=this.a,d=this.c;this.a=c*a.a+this.b*a.c;this.b=c*a.b+this.b*a.d;this.c=d*a.a+this.d*a.c;this.d=d*a.b+this.d*a.d}this.tx=f*a.a+this.ty*a.c+a.tx;this.ty=f*a.b+this.ty*a.d+a.ty;return this};b.prototype.invert=function(){var a=this.a,f=this.b,c=this.c,d=this.d,b=this.tx,
k=a*d-f*c;this.a=d/k;this.b=-f/k;this.c=-c/k;this.d=a/k;this.tx=(c*this.ty-d*b)/k;this.ty=-(a*this.ty-f*b)/k;return this};b.prototype.identity=function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this};b.prototype.clone=function(){var a=new b;a.a=this.a;a.b=this.b;a.c=this.c;a.d=this.d;a.tx=this.tx;a.ty=this.ty;return a};b.prototype.copy=function(a){a.a=this.a;a.b=this.b;a.c=this.c;a.d=this.d;a.tx=this.tx;a.ty=this.ty;return a};b.IDENTITY=new b;b.TEMP_MATRIX=new b},{"./Point":25}],
25:[function(e,h,l){function b(b,a){this.x=b||0;this.y=a||0}b.prototype.constructor=b;h.exports=b;b.prototype.clone=function(){return new b(this.x,this.y)};b.prototype.copy=function(b){this.set(b.x,b.y)};b.prototype.equals=function(b){return b.x===this.x&&b.y===this.y};b.prototype.set=function(b,a){this.x=b||0;this.y=a||(0!==a?this.x:0)}},{}],26:[function(e,h,l){h.exports={Point:e("./Point"),Matrix:e("./Matrix"),Circle:e("./shapes/Circle"),Ellipse:e("./shapes/Ellipse"),Polygon:e("./shapes/Polygon"),
Rectangle:e("./shapes/Rectangle"),RoundedRectangle:e("./shapes/RoundedRectangle")}},{"./Matrix":24,"./Point":25,"./shapes/Circle":27,"./shapes/Ellipse":28,"./shapes/Polygon":29,"./shapes/Rectangle":30,"./shapes/RoundedRectangle":31}],27:[function(e,h,l){function b(f,c,d){this.x=f||0;this.y=c||0;this.radius=d||0;this.type=a.SHAPES.CIRC}var g=e("./Rectangle"),a=e("../../const");b.prototype.constructor=b;h.exports=b;b.prototype.clone=function(){return new b(this.x,this.y,this.radius)};b.prototype.contains=
function(a,c){if(0>=this.radius)return!1;var d=this.x-a,b=this.y-c;return d*d+b*b<=this.radius*this.radius};b.prototype.getBounds=function(){return new g(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":16,"./Rectangle":30}],28:[function(e,h,l){function b(f,c,d,b){this.x=f||0;this.y=c||0;this.width=d||0;this.height=b||0;this.type=a.SHAPES.ELIP}var g=e("./Rectangle"),a=e("../../const");b.prototype.constructor=b;h.exports=b;b.prototype.clone=function(){return new b(this.x,
this.y,this.width,this.height)};b.prototype.contains=function(a,c){if(0>=this.width||0>=this.height)return!1;var d=(a-this.x)/this.width,b=(c-this.y)/this.height;return 1>=d*d+b*b};b.prototype.getBounds=function(){return new g(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":16,"./Rectangle":30}],29:[function(e,h,l){function b(f){var c=f;if(!Array.isArray(c))for(var c=Array(arguments.length),d=0;d<c.length;++d)c[d]=arguments[d];if(c[0]instanceof g){for(var d=[],b=0,k=
c.length;b<k;b++)d.push(c[b].x,c[b].y);c=d}this.closed=!0;this.points=c;this.type=a.SHAPES.POLY}var g=e("../Point"),a=e("../../const");b.prototype.constructor=b;h.exports=b;b.prototype.clone=function(){return new b(this.points.slice())};b.prototype.contains=function(a,c){for(var d=!1,b=this.points.length/2,k=0,g=b-1;k<b;g=k++){var e=this.points[2*k],h=this.points[2*k+1],q=this.points[2*g],g=this.points[2*g+1];h>c!==g>c&&a<(q-e)*(c-h)/(g-h)+e&&(d=!d)}return d}},{"../../const":16,"../Point":25}],30:[function(e,
h,l){function b(a,f,c,d){this.x=a||0;this.y=f||0;this.width=c||0;this.height=d||0;this.type=g.SHAPES.RECT}var g=e("../../const");b.prototype.constructor=b;h.exports=b;b.EMPTY=new b(0,0,0,0);b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height)};b.prototype.contains=function(a,f){return 0>=this.width||0>=this.height?!1:a>=this.x&&a<this.x+this.width&&f>=this.y&&f<this.y+this.height?!0:!1}},{"../../const":16}],31:[function(e,h,l){function b(a,f,c,d,b){this.x=a||0;this.y=f||
0;this.width=c||0;this.height=d||0;this.radius=b||20;this.type=g.SHAPES.RREC}var g=e("../../const");b.prototype.constructor=b;h.exports=b;b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height,this.radius)};b.prototype.contains=function(a,f){return 0>=this.width||0>=this.height?!1:a>=this.x&&a<=this.x+this.width&&f>=this.y&&f<=this.y+this.height?!0:!1}},{"../../const":16}],32:[function(e,h,l){function b(f,c,d){g.call(this);d=d||15E3;f=f||15E3;16384<d&&(d=16384);d>f&&(d=f);
this._properties=[!1,!0,!1,!1,!1];this._maxSize=f;this._batchSize=d;this._buffers=null;this._bufferToUpdate=0;this.interactiveChildren=!1;this.blendMode=a.BLEND_MODES.NORMAL;this.roundPixels=!0;this.setProperties(c)}var g=e("../display/Container"),a=e("../const");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],
this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])};b.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};b.prototype.renderWebGL=function(a){this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable&&(a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))};b.prototype.onChildrenChange=function(a){a=Math.floor(a/
this._batchSize);a<this._bufferToUpdate&&(this._bufferToUpdate=a)};b.prototype.renderCanvas=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var c=a.context,d=this.worldTransform,b=!0,k,g,e,h,q=a.blendModes[this.blendMode];q!==c.globalCompositeOperation&&(c.globalCompositeOperation=q);c.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(q=0;q<this.children.length;++q){var p=this.children[q];if(p.visible){var r=p.texture.frame;c.globalAlpha=
this.worldAlpha*p.alpha;0===p.rotation%(2*Math.PI)?(b&&(c.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),b=!1),k=p.anchor.x*-r.width*p.scale.x+p.position.x+.5,g=p.anchor.y*-r.height*p.scale.y+p.position.y+.5,e=r.width*p.scale.x,h=r.height*p.scale.y):(b||(b=!0),p.displayObjectUpdateTransform(),k=p.worldTransform,a.roundPixels?c.setTransform(k.a,k.b,k.c,k.d,k.tx|0,k.ty|0):c.setTransform(k.a,k.b,k.c,k.d,k.tx,k.ty),k=p.anchor.x*-r.width+.5,g=p.anchor.y*-r.height+.5,e=r.width,h=r.height);c.drawImage(p.texture.baseTexture.source,
r.x,r.y,r.width,r.height,k,g,e,h)}}}};b.prototype.destroy=function(){g.prototype.destroy.apply(this,arguments);if(this._buffers)for(var a=0;a<this._buffers.length;++a)this._buffers[a].destroy();this._buffers=this._properties=null}},{"../const":16,"../display/Container":17}],33:[function(e,h,l){function b(b,a,f,c){this.gl=b;this.vertSize=2;this.vertByteSize=4*this.vertSize;this.size=c;this.dynamicProperties=[];this.staticProperties=[];for(b=0;b<a.length;b++)c=a[b],f[b]?this.dynamicProperties.push(c):
this.staticProperties.push(c);this.staticStride=0;this.staticData=this.staticBuffer=null;this.dynamicStride=0;this.dynamicData=this.dynamicBuffer=null;this.initBuffers()}b.prototype.constructor=b;h.exports=b;b.prototype.initBuffers=function(){var b=this.gl,a,f,c=0;for(a=this.dynamicStride=0;a<this.dynamicProperties.length;a++)f=this.dynamicProperties[a],f.offset=c,c+=f.size,this.dynamicStride+=f.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4);this.dynamicBuffer=b.createBuffer();
b.bindBuffer(b.ARRAY_BUFFER,this.dynamicBuffer);b.bufferData(b.ARRAY_BUFFER,this.dynamicData,b.DYNAMIC_DRAW);for(a=this.staticStride=c=0;a<this.staticProperties.length;a++)f=this.staticProperties[a],f.offset=c,c+=f.size,this.staticStride+=f.size;this.staticData=new Float32Array(this.size*this.staticStride*4);this.staticBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.staticBuffer);b.bufferData(b.ARRAY_BUFFER,this.staticData,b.DYNAMIC_DRAW)};b.prototype.uploadDynamic=function(b,a,f){for(var c=
this.gl,d=0;d<this.dynamicProperties.length;d++){var m=this.dynamicProperties[d];m.uploadFunction(b,a,f,this.dynamicData,this.dynamicStride,m.offset)}c.bindBuffer(c.ARRAY_BUFFER,this.dynamicBuffer);c.bufferSubData(c.ARRAY_BUFFER,0,this.dynamicData)};b.prototype.uploadStatic=function(b,a,f){for(var c=this.gl,d=0;d<this.staticProperties.length;d++){var m=this.staticProperties[d];m.uploadFunction(b,a,f,this.staticData,this.staticStride,m.offset)}c.bindBuffer(c.ARRAY_BUFFER,this.staticBuffer);c.bufferSubData(c.ARRAY_BUFFER,
0,this.staticData)};b.prototype.bind=function(){var b=this.gl,a,f;b.bindBuffer(b.ARRAY_BUFFER,this.dynamicBuffer);for(a=0;a<this.dynamicProperties.length;a++)f=this.dynamicProperties[a],b.vertexAttribPointer(f.attribute,f.size,b.FLOAT,!1,4*this.dynamicStride,4*f.offset);b.bindBuffer(b.ARRAY_BUFFER,this.staticBuffer);for(a=0;a<this.staticProperties.length;a++)f=this.staticProperties[a],b.vertexAttribPointer(f.attribute,f.size,b.FLOAT,!1,4*this.staticStride,4*f.offset)};b.prototype.destroy=function(){this.dynamicData=
this.dynamicProperties=null;this.gl.deleteBuffer(this.dynamicBuffer);this.staticData=this.staticProperties=null;this.gl.deleteBuffer(this.staticBuffer)}},{}],34:[function(e,h,l){function b(a){g.call(this,a);this.indices=new Uint16Array(98304);for(var b=a=0;98304>a;a+=6,b+=4)this.indices[a+0]=b+0,this.indices[a+1]=b+1,this.indices[a+2]=b+2,this.indices[a+3]=b+0,this.indices[a+4]=b+2,this.indices[a+5]=b+3;this.properties=this.indexBuffer=this.shader=null;this.tempMatrix=new c.Matrix}var g=e("../../renderers/webgl/utils/ObjectRenderer");
l=e("../../renderers/webgl/WebGLRenderer");var a=e("./ParticleShader"),f=e("./ParticleBuffer"),c=e("../../math");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;l.registerPlugin("particle",b);b.prototype.onContextChange=function(){var c=this.renderer.gl;this.shader=new a(this.renderer.shaderManager);this.indexBuffer=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.indices,c.STATIC_DRAW);this.properties=[{attribute:this.shader.attributes.aVertexPosition,
size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]};b.prototype.start=function(){var a=this.renderer.gl;a.activeTexture(a.TEXTURE0);
a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);this.renderer.shaderManager.setShader(this.shader)};b.prototype.render=function(a){var c=a.children,b=c.length,f=a._maxSize,g=a._batchSize;if(0!==b){b>f&&(b=f);a._buffers||(a._buffers=this.generateBuffers(a));this.renderer.blendModeManager.setBlendMode(a.blendMode);var f=this.renderer.gl,e=a.worldTransform.copy(this.tempMatrix);e.prepend(this.renderer.currentRenderTarget.projectionMatrix);f.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,
!1,e.toArray(!0));f.uniform1f(this.shader.uniforms.uAlpha._location,a.worldAlpha);e=c[0]._texture.baseTexture;if(e._glTextures[f.id])f.bindTexture(f.TEXTURE_2D,e._glTextures[f.id]);else{if(!this.renderer.updateTexture(e))return;a._properties[0]&&a._properties[3]||(a._bufferToUpdate=0)}for(var h=e=0;e<b;e+=g,h+=1){var p=b-e;p>g&&(p=g);var r=a._buffers[h];r.uploadDynamic(c,e,p);a._bufferToUpdate===h&&(r.uploadStatic(c,e,p),a._bufferToUpdate=h+1);r.bind(this.shader);f.drawElements(f.TRIANGLES,6*p,f.UNSIGNED_SHORT,
0);this.renderer.drawCount++}}};b.prototype.generateBuffers=function(a){var c=this.renderer.gl,b=[],e=a._maxSize,g=a._batchSize;a=a._properties;var h;for(h=0;h<e;h+=g)b.push(new f(c,this.properties,a,g));return b};b.prototype.uploadVertices=function(a,c,b,f,e,g){for(var h,p,r,l,y,A,v,C=0;C<b;C++)h=a[c+C],p=h._texture,l=h.scale.x,y=h.scale.y,p.trim?(r=p.trim,v=r.x-h.anchor.x*r.width,A=v+p.crop.width,h=r.y-h.anchor.y*r.height,r=h+p.crop.height):(A=p._frame.width*(1-h.anchor.x),v=p._frame.width*-h.anchor.x,
r=p._frame.height*(1-h.anchor.y),h=p._frame.height*-h.anchor.y),f[g]=v*l,f[g+1]=h*y,f[g+e]=A*l,f[g+e+1]=h*y,f[g+2*e]=A*l,f[g+2*e+1]=r*y,f[g+3*e]=v*l,f[g+3*e+1]=r*y,g+=4*e};b.prototype.uploadPosition=function(a,c,b,f,e,g){for(var h=0;h<b;h++){var p=a[c+h].position;f[g]=p.x;f[g+1]=p.y;f[g+e]=p.x;f[g+e+1]=p.y;f[g+2*e]=p.x;f[g+2*e+1]=p.y;f[g+3*e]=p.x;f[g+3*e+1]=p.y;g+=4*e}};b.prototype.uploadRotation=function(a,c,b,f,e,g){for(var h=0;h<b;h++){var p=a[c+h].rotation;f[g]=p;f[g+e]=p;f[g+2*e]=p;f[g+3*e]=
p;g+=4*e}};b.prototype.uploadUvs=function(a,c,b,f,g,e){for(var h=0;h<b;h++){var p=a[c+h]._texture._uvs;p?(f[e]=p.x0,f[e+1]=p.y0,f[e+g]=p.x1,f[e+g+1]=p.y1,f[e+2*g]=p.x2,f[e+2*g+1]=p.y2,f[e+3*g]=p.x3,f[e+3*g+1]=p.y3):(f[e]=0,f[e+1]=0,f[e+g]=0,f[e+g+1]=0,f[e+2*g]=0,f[e+2*g+1]=0,f[e+3*g]=0,f[e+3*g+1]=0);e+=4*g}};b.prototype.uploadAlpha=function(a,c,b,f,e,g){for(var h=0;h<b;h++){var p=a[c+h].alpha;f[g]=p;f[g+e]=p;f[g+2*e]=p;f[g+3*e]=p;g+=4*e}};b.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer);
g.prototype.destroy.apply(this,arguments);this.shader.destroy();this.tempMatrix=this.indices=null}},{"../../math":26,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56,"./ParticleBuffer":33,"./ParticleShader":35}],35:[function(e,h,l){function b(a){g.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nvoid main(void){\n   vec2 v = aVertexPosition;\n   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor;\n}",
"precision lowp float;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}",{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var g=e("../../renderers/webgl/shaders/TextureShader");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b},{"../../renderers/webgl/shaders/TextureShader":55}],
36:[function(e,h,l){function b(d,b,k,e){c.call(this);g.sayHello(d);if(e)for(var n in f.DEFAULT_RENDER_OPTIONS)"undefined"===typeof e[n]&&(e[n]=f.DEFAULT_RENDER_OPTIONS[n]);else e=f.DEFAULT_RENDER_OPTIONS;this.type=f.RENDERER_TYPE.UNKNOWN;this.width=b||800;this.height=k||600;this.view=e.view||document.createElement("canvas");this.resolution=e.resolution;this.transparent=e.transparent;this.autoResize=e.autoResize||!1;this.blendModes=null;this.preserveDrawingBuffer=e.preserveDrawingBuffer;this.clearBeforeRender=
e.clearBeforeRender;this.roundPixels=e.roundPixels;this._backgroundColor=0;this._backgroundColorRgb=[0,0,0];this._backgroundColorString="#000000";this.backgroundColor=e.backgroundColor||this._backgroundColor;this._lastObjectRendered=this._tempDisplayObjectParent={worldTransform:new a.Matrix,worldAlpha:1,children:[]}}var g=e("../utils"),a=e("../math"),f=e("../const"),c=e("eventemitter3");b.prototype=Object.create(c.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,
{backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a;this._backgroundColorString=g.hex2string(a);g.hex2rgb(a,this._backgroundColorRgb)}}});b.prototype.resize=function(a,c){this.width=a*this.resolution;this.height=c*this.resolution;this.view.width=this.width;this.view.height=this.height;this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")};b.prototype.destroy=function(a){a&&
this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.type=f.RENDERER_TYPE.UNKNOWN;this.height=this.width=0;this.view=null;this.resolution=0;this.autoResize=this.transparent=!1;this.blendModes=null;this.roundPixels=this.clearBeforeRender=this.preserveDrawingBuffer=!1;this._backgroundColor=0;this._backgroundColorString=this._backgroundColorRgb=null}},{"../const":16,"../math":26,"../utils":70,eventemitter3:10}],37:[function(e,h,l){function b(b,f,e){e=e||{};g.call(this,"Canvas",b,f,
e);this.type=d.RENDERER_TYPE.CANVAS;this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=!0;this.maskManager=new a;this.smoothProperty="imageSmoothingEnabled";this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&
(this.smoothProperty="msImageSmoothingEnabled"));this.initPlugins();this._mapBlendModes();this._tempDisplayObjectParent={worldTransform:new c.Matrix,worldAlpha:1};this.resize(b,f)}var g=e("../SystemRenderer"),a=e("./utils/CanvasMaskManager"),f=e("../../utils"),c=e("../../math"),d=e("../../const");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;f.pluginTarget.mixin(b);b.prototype.render=function(a){this.emit("prerender");var c=a.parent;this._lastObjectRendered=a;a.parent=
this._tempDisplayObjectParent;a.updateTransform();a.parent=c;this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;this.context.globalCompositeOperation=this.blendModes[d.BLEND_MODES.NORMAL];navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear());this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height)));this.renderDisplayObject(a,
this.context);this.emit("postrender")};b.prototype.destroy=function(a){this.destroyPlugins();g.prototype.destroy.call(this,a);this.context=null;this.refresh=!0;this.maskManager.destroy();this.smoothProperty=this.maskManager=null};b.prototype.renderDisplayObject=function(a,c){var d=this.context;this.context=c;a.renderCanvas(this);this.context=d};b.prototype.resize=function(a,c){g.prototype.resize.call(this,a,c);this.smoothProperty&&(this.context[this.smoothProperty]=d.SCALE_MODES.DEFAULT===d.SCALE_MODES.LINEAR)};
b.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},f.canUseNewCanvasBlendModes()?(this.blendModes[d.BLEND_MODES.NORMAL]="source-over",this.blendModes[d.BLEND_MODES.ADD]="lighter",this.blendModes[d.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[d.BLEND_MODES.SCREEN]="screen",this.blendModes[d.BLEND_MODES.OVERLAY]="overlay",this.blendModes[d.BLEND_MODES.DARKEN]="darken",this.blendModes[d.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[d.BLEND_MODES.COLOR_DODGE]="color-dodge",
this.blendModes[d.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[d.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[d.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[d.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[d.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[d.BLEND_MODES.HUE]="hue",this.blendModes[d.BLEND_MODES.SATURATION]="saturate",this.blendModes[d.BLEND_MODES.COLOR]="color",this.blendModes[d.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[d.BLEND_MODES.NORMAL]=
"source-over",this.blendModes[d.BLEND_MODES.ADD]="lighter",this.blendModes[d.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[d.BLEND_MODES.SCREEN]="source-over",this.blendModes[d.BLEND_MODES.OVERLAY]="source-over",this.blendModes[d.BLEND_MODES.DARKEN]="source-over",this.blendModes[d.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[d.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[d.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[d.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[d.BLEND_MODES.SOFT_LIGHT]=
"source-over",this.blendModes[d.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[d.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[d.BLEND_MODES.HUE]="source-over",this.blendModes[d.BLEND_MODES.SATURATION]="source-over",this.blendModes[d.BLEND_MODES.COLOR]="source-over",this.blendModes[d.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":16,"../../math":26,"../../utils":70,"../SystemRenderer":36,"./utils/CanvasMaskManager":40}],38:[function(e,h,l){function b(b,a){this.canvas=document.createElement("canvas");
this.context=this.canvas.getContext("2d");this.canvas.width=b;this.canvas.height=a}b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{width:{get:function(){return this.canvas.width},set:function(b){this.canvas.width=b}},height:{get:function(){return this.canvas.height},set:function(b){this.canvas.height=b}}});b.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};b.prototype.resize=function(b,a){this.canvas.width=
b;this.canvas.height=a};b.prototype.destroy=function(){this.canvas=this.context=null}},{}],39:[function(e,h,l){var b=e("../../../const");e={};h.exports=e;e.renderGraphics=function(e,a){var f=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var c=0;c<e.graphicsData.length;c++){var d=e.graphicsData[c],m=d.shape,k=d._fillTint,t=d._lineTint;a.lineWidth=d.lineWidth;if(d.type===b.SHAPES.POLY){a.beginPath();var n=m.points;a.moveTo(n[0],n[1]);for(var h=1;h<n.length/2;h++)a.lineTo(n[2*h],
n[2*h+1]);m.closed&&a.lineTo(n[0],n[1]);n[0]===n[n.length-2]&&n[1]===n[n.length-1]&&a.closePath();d.fill&&(a.globalAlpha=d.fillAlpha*f,a.fillStyle="#"+("00000"+(k|0).toString(16)).substr(-6),a.fill());d.lineWidth&&(a.globalAlpha=d.lineAlpha*f,a.strokeStyle="#"+("00000"+(t|0).toString(16)).substr(-6),a.stroke())}else if(d.type===b.SHAPES.RECT){if(d.fillColor||0===d.fillColor)a.globalAlpha=d.fillAlpha*f,a.fillStyle="#"+("00000"+(k|0).toString(16)).substr(-6),a.fillRect(m.x,m.y,m.width,m.height);d.lineWidth&&
(a.globalAlpha=d.lineAlpha*f,a.strokeStyle="#"+("00000"+(t|0).toString(16)).substr(-6),a.strokeRect(m.x,m.y,m.width,m.height))}else if(d.type===b.SHAPES.CIRC)a.beginPath(),a.arc(m.x,m.y,m.radius,0,2*Math.PI),a.closePath(),d.fill&&(a.globalAlpha=d.fillAlpha*f,a.fillStyle="#"+("00000"+(k|0).toString(16)).substr(-6),a.fill()),d.lineWidth&&(a.globalAlpha=d.lineAlpha*f,a.strokeStyle="#"+("00000"+(t|0).toString(16)).substr(-6),a.stroke());else if(d.type===b.SHAPES.ELIP){var q=2*m.width,h=2*m.height,n=m.x-
q/2,m=m.y-h/2;a.beginPath();var p=q/2*.5522848,r=h/2*.5522848,l=n+q,y=m+h,q=n+q/2,h=m+h/2;a.moveTo(n,h);a.bezierCurveTo(n,h-r,q-p,m,q,m);a.bezierCurveTo(q+p,m,l,h-r,l,h);a.bezierCurveTo(l,h+r,q+p,y,q,y);a.bezierCurveTo(q-p,y,n,h+r,n,h);a.closePath();d.fill&&(a.globalAlpha=d.fillAlpha*f,a.fillStyle="#"+("00000"+(k|0).toString(16)).substr(-6),a.fill());d.lineWidth&&(a.globalAlpha=d.lineAlpha*f,a.strokeStyle="#"+("00000"+(t|0).toString(16)).substr(-6),a.stroke())}else if(d.type===b.SHAPES.RREC){n=m.x;
h=m.y;p=m.width;r=m.height;m=m.radius;l=Math.min(p,r)/2|0;m=m>l?l:m;a.beginPath();a.moveTo(n,h+m);a.lineTo(n,h+r-m);a.quadraticCurveTo(n,h+r,n+m,h+r);a.lineTo(n+p-m,h+r);a.quadraticCurveTo(n+p,h+r,n+p,h+r-m);a.lineTo(n+p,h+m);a.quadraticCurveTo(n+p,h,n+p-m,h);a.lineTo(n+m,h);a.quadraticCurveTo(n,h,n,h+m);a.closePath();if(d.fillColor||0===d.fillColor)a.globalAlpha=d.fillAlpha*f,a.fillStyle="#"+("00000"+(k|0).toString(16)).substr(-6),a.fill();d.lineWidth&&(a.globalAlpha=d.lineAlpha*f,a.strokeStyle=
"#"+("00000"+(t|0).toString(16)).substr(-6),a.stroke())}}};e.renderGraphicsMask=function(e,a){var f=e.graphicsData.length;if(0!==f){a.beginPath();for(var c=0;c<f;c++){var d=e.graphicsData[c],m=d.shape;if(d.type===b.SHAPES.POLY){d=m.points;a.moveTo(d[0],d[1]);for(var k=1;k<d.length/2;k++)a.lineTo(d[2*k],d[2*k+1]);d[0]===d[d.length-2]&&d[1]===d[d.length-1]&&a.closePath()}else if(d.type===b.SHAPES.RECT)a.rect(m.x,m.y,m.width,m.height),a.closePath();else if(d.type===b.SHAPES.CIRC)a.arc(m.x,m.y,m.radius,
0,2*Math.PI),a.closePath();else if(d.type===b.SHAPES.ELIP){var t=2*m.width,k=2*m.height,d=m.x-t/2,m=m.y-k/2,n=t/2*.5522848,h=k/2*.5522848,q=d+t,p=m+k,t=d+t/2,k=m+k/2;a.moveTo(d,k);a.bezierCurveTo(d,k-h,t-n,m,t,m);a.bezierCurveTo(t+n,m,q,k-h,q,k);a.bezierCurveTo(q,k+h,t+n,p,t,p);a.bezierCurveTo(t-n,p,d,k+h,d,k);a.closePath()}else d.type===b.SHAPES.RREC&&(d=m.x,k=m.y,n=m.width,h=m.height,m=m.radius,q=Math.min(n,h)/2|0,m=m>q?q:m,a.moveTo(d,k+m),a.lineTo(d,k+h-m),a.quadraticCurveTo(d,k+h,d+m,k+h),a.lineTo(d+
n-m,k+h),a.quadraticCurveTo(d+n,k+h,d+n,k+h-m),a.lineTo(d+n,k+m),a.quadraticCurveTo(d+n,k,d+n-m,k),a.lineTo(d+m,k),a.quadraticCurveTo(d,k,d,k+m),a.closePath())}}};e.updateGraphicsTint=function(b){if(16777215!==b.tint||b._prevTint!==b.tint){b._prevTint=b.tint;for(var a=(b.tint>>16&255)/255,f=(b.tint>>8&255)/255,c=(b.tint&255)/255,d=0;d<b.graphicsData.length;d++){var m=b.graphicsData[d],k=m.fillColor|0,e=m.lineColor|0;m._fillTint=((k>>16&255)/255*a*255<<16)+((k>>8&255)/255*f*255<<8)+(k&255)/255*c*255;
m._lineTint=((e>>16&255)/255*a*255<<16)+((e>>8&255)/255*f*255<<8)+(e&255)/255*c*255}}}},{"../../../const":16}],40:[function(e,h,l){function b(){}var g=e("./CanvasGraphics");b.prototype.constructor=b;h.exports=b;b.prototype.pushMask=function(a,b){b.context.save();var c=a.alpha,d=a.worldTransform,m=b.resolution;b.context.setTransform(d.a*m,d.b*m,d.c*m,d.d*m,d.tx*m,d.ty*m);a.texture||(g.renderGraphicsMask(a,b.context),b.context.clip());a.worldAlpha=c};b.prototype.popMask=function(a){a.context.restore()};
b.prototype.destroy=function(){}},{"./CanvasGraphics":39}],41:[function(e,h,l){var b=e("../../../utils"),g={};h.exports=g;g.getTintedTexture=function(a,b){var c=a.texture;b=g.roundColor(b);var d="#"+("00000"+(b|0).toString(16)).substr(-6);c.tintCache=c.tintCache||{};if(c.tintCache[d])return c.tintCache[d];var m=g.canvas||document.createElement("canvas");g.tintMethod(c,b,m);if(g.convertTintToImage){var k=new Image;k.src=m.toDataURL();c.tintCache[d]=k}else c.tintCache[d]=m,g.canvas=null;return m};g.tintWithMultiply=
function(a,b,c){var d=c.getContext("2d"),m=a.baseTexture.resolution,k=a.crop.clone();k.x*=m;k.y*=m;k.width*=m;k.height*=m;c.width=k.width;c.height=k.height;d.fillStyle="#"+("00000"+(b|0).toString(16)).substr(-6);d.fillRect(0,0,k.width,k.height);d.globalCompositeOperation="multiply";d.drawImage(a.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height);d.globalCompositeOperation="destination-atop";d.drawImage(a.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height)};g.tintWithOverlay=
function(a,b,c){var d=c.getContext("2d"),m=a.baseTexture.resolution,k=a.crop.clone();k.x*=m;k.y*=m;k.width*=m;k.height*=m;c.width=k.width;c.height=k.height;d.globalCompositeOperation="copy";d.fillStyle="#"+("00000"+(b|0).toString(16)).substr(-6);d.fillRect(0,0,k.width,k.height);d.globalCompositeOperation="destination-atop";d.drawImage(a.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height)};g.tintWithPerPixel=function(a,f,c){var d=c.getContext("2d"),m=a.baseTexture.resolution,k=a.crop.clone();
k.x*=m;k.y*=m;k.width*=m;k.height*=m;c.width=k.width;c.height=k.height;d.globalCompositeOperation="copy";d.drawImage(a.baseTexture.source,k.x,k.y,k.width,k.height,0,0,k.width,k.height);c=b.hex2rgb(f);a=c[0];f=c[1];c=c[2];for(var k=d.getImageData(0,0,k.width,k.height),m=k.data,e=0;e<m.length;e+=4)m[e+0]*=a,m[e+1]*=f,m[e+2]*=c;d.putImageData(k,0,0)};g.roundColor=function(a){var f=g.cacheStepsPerColorChannel;a=b.hex2rgb(a);a[0]=Math.min(255,a[0]/f*f);a[1]=Math.min(255,a[1]/f*f);a[2]=Math.min(255,a[2]/
f*f);return b.rgb2hex(a)};g.cacheStepsPerColorChannel=8;g.convertTintToImage=!1;g.canUseMultiply=b.canUseNewCanvasBlendModes();g.tintMethod=g.canUseMultiply?g.tintWithMultiply:g.tintWithPerPixel},{"../../../utils":70}],42:[function(e,h,l){function b(b,k,e){e=e||{};g.call(this,"WebGL",b,k,e);this.type=q.RENDERER_TYPE.WEBGL;this.handleContextLost=this.handleContextLost.bind(this);this.handleContextRestored=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.handleContextLost,
!1);this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1);this._useFXAA=!!e.forceFXAA&&e.antialias;this._FXAAFilter=null;this._contextOptions={alpha:this.transparent,antialias:e.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer};this.drawCount=0;this.shaderManager=new a(this);this.maskManager=new f(this);this.stencilManager=new c(this);this.filterManager=new d(this);this.blendModeManager=
new m(this);this.currentRenderTarget=null;this.currentRenderer=new t(this);this.initPlugins();this._createContext();this._initContext();this._mapGlModes();this._managedTextures=[];this._renderTargetStack=[]}var g=e("../SystemRenderer"),a=e("./managers/ShaderManager"),f=e("./managers/MaskManager"),c=e("./managers/StencilManager"),d=e("./managers/FilterManager"),m=e("./managers/BlendModeManager"),k=e("./utils/RenderTarget"),t=e("./utils/ObjectRenderer"),n=e("./filters/FXAAFilter"),B=e("../../utils"),
q=e("../../const");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;B.pluginTarget.mixin(b);b.glContextId=0;b.prototype._createContext=function(){var a=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);this.gl=a;if(!a)throw Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=b.glContextId++;a.id=this.glContextId;a.renderer=this};b.prototype._initContext=function(){var a=
this.gl;a.disable(a.DEPTH_TEST);a.disable(a.CULL_FACE);a.enable(a.BLEND);this.renderTarget=new k(a,this.width,this.height,null,this.resolution,!0);this.setRenderTarget(this.renderTarget);this.emit("context",a);this.resize(this.width,this.height);this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!a.getContextAttributes().antialias);this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new n])};b.prototype.render=function(a){this.emit("prerender");
if(!this.gl.isContextLost()){this.drawCount=0;this._lastObjectRendered=a;this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,a.filterArea=this.renderTarget.size,a.filters=this._FXAAFilter);var c=a.parent;a.parent=this._tempDisplayObjectParent;a.updateTransform();a.parent=c;c=this.gl;this.setRenderTarget(this.renderTarget);this.clearBeforeRender&&(this.transparent?c.clearColor(0,0,0,0):c.clearColor(this._backgroundColorRgb[0],
this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),c.clear(c.COLOR_BUFFER_BIT));this.renderDisplayObject(a,this.renderTarget);this.emit("postrender")}};b.prototype.renderDisplayObject=function(a,c,d){this.setRenderTarget(c);d&&c.clear();this.filterManager.setFilterStack(c.filterStack);a.renderWebGL(this);this.currentRenderer.flush()};b.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())};b.prototype.setRenderTarget=
function(a){this.currentRenderTarget!==a&&(this.currentRenderTarget=a,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(a.stencilMaskStack))};b.prototype.resize=function(a,c){g.prototype.resize.call(this,a,c);this.filterManager.resize(a,c);this.renderTarget.resize(a,c);this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))};b.prototype.updateTexture=function(a){a=a.baseTexture||a;if(a.hasLoaded){var c=this.gl;a._glTextures[c.id]||
(a._glTextures[c.id]=c.createTexture(),a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a));c.bindTexture(c.TEXTURE_2D,a._glTextures[c.id]);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultipliedAlpha);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a.source);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,a.scaleMode===q.SCALE_MODES.LINEAR?c.LINEAR:c.NEAREST);a.mipmap&&a.isPowerOfTwo?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,
a.scaleMode===q.SCALE_MODES.LINEAR?c.LINEAR_MIPMAP_LINEAR:c.NEAREST_MIPMAP_NEAREST),c.generateMipmap(c.TEXTURE_2D)):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,a.scaleMode===q.SCALE_MODES.LINEAR?c.LINEAR:c.NEAREST);a.isPowerOfTwo?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));return a._glTextures[c.id]}};
b.prototype.destroyTexture=function(a,c){a=a.baseTexture||a;if(a.hasLoaded&&a._glTextures[this.gl.id]&&(this.gl.deleteTexture(a._glTextures[this.gl.id]),delete a._glTextures[this.gl.id],!c)){var d=this._managedTextures.indexOf(a);-1!==d&&B.removeItems(this._managedTextures,d,1)}};b.prototype.handleContextLost=function(a){a.preventDefault()};b.prototype.handleContextRestored=function(){this._initContext();for(var a=0;a<this._managedTextures.length;++a){var c=this._managedTextures[a];c._glTextures[this.gl.id]&&
delete c._glTextures[this.gl.id]}};b.prototype.destroy=function(a){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var c=0;c<this._managedTextures.length;++c){var d=this._managedTextures[c];this.destroyTexture(d,!0);d.off("update",this.updateTexture,this);d.off("dispose",this.destroyTexture,this)}g.prototype.destroy.call(this,a);this.uid=0;this.shaderManager.destroy();
this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this.blendModeManager.destroy();this._managedTextures=this._contextOptions=this.handleContextRestored=this.handleContextLost=this.currentRenderer=this.blendModeManager=this.filterManager=this.maskManager=this.shaderManager=null;this.drawCount=0;this.gl.useProgram(null);this.gl=null};b.prototype._mapGlModes=function(){var a=this.gl;this.blendModes||(this.blendModes={},this.blendModes[q.BLEND_MODES.NORMAL]=[a.ONE,
a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.ADD]=[a.SRC_ALPHA,a.DST_ALPHA],this.blendModes[q.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.SCREEN]=[a.SRC_ALPHA,a.ONE],this.blendModes[q.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.COLOR_BURN]=
[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[q.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],
this.blendModes[q.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA]);this.drawModes||(this.drawModes={},this.drawModes[q.DRAW_MODES.POINTS]=a.POINTS,this.drawModes[q.DRAW_MODES.LINES]=a.LINES,this.drawModes[q.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,this.drawModes[q.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,this.drawModes[q.DRAW_MODES.TRIANGLES]=a.TRIANGLES,this.drawModes[q.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,this.drawModes[q.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN)}},{"../../const":16,"../../utils":70,
"../SystemRenderer":36,"./filters/FXAAFilter":44,"./managers/BlendModeManager":46,"./managers/FilterManager":47,"./managers/MaskManager":48,"./managers/ShaderManager":49,"./managers/StencilManager":50,"./utils/ObjectRenderer":56,"./utils/RenderTarget":58}],43:[function(e,h,l){function b(a,b,c){this.shaders=[];this.padding=0;this.uniforms=c||{};this.vertexSrc=a||g.defaultVertexSrc;this.fragmentSrc=b||g.defaultFragmentSrc}var g=e("../shaders/TextureShader");b.prototype.constructor=b;h.exports=b;b.prototype.getShader=
function(a){var b=a.gl,c=this.shaders[b.id];c||(c=new g(a.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[b.id]=c);return c};b.prototype.applyFilter=function(a,b,c,d){var m=this.getShader(a);a.filterManager.applyFilter(m,b,c,d)};b.prototype.syncUniform=function(a){for(var b=0,c=this.shaders.length;b<c;++b)this.shaders[b].syncUniform(a)}},{"../shaders/TextureShader":55}],44:[function(e,h,l){function b(){g.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",
'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',
{resolution:{type:"v2",value:{x:1,y:1}}})}var g=e("./AbstractFilter");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,c){var d=a.filterManager;a=this.getShader(a);d.applyFilter(a,b,c)}},{"./AbstractFilter":43}],45:[function(e,h,l){function b(b){var c=new a.Matrix;g.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",
{mask:{type:"sampler2D",value:b._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:c.toArray(!0)}});this.maskSprite=b;this.maskMatrix=c}var g=e("./AbstractFilter"),a=e("../../../math");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,c,d){var b=a.filterManager;this.uniforms.mask.value=this.maskSprite._texture;b.calculateMappedMatrix(c.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0);
this.uniforms.alpha.value=this.maskSprite.worldAlpha;a=this.getShader(a);b.applyFilter(a,c,d)};Object.defineProperties(b.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(a){this.uniforms.mask.value=a}},offset:{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}}})},{"../../../math":26,"./AbstractFilter":43}],46:[function(e,h,l){function b(a){g.call(this,a);this.currentBlendMode=99999}var g=e("./WebGLManager");b.prototype=Object.create(g.prototype);
b.prototype.constructor=b;h.exports=b;b.prototype.setBlendMode=function(a){if(this.currentBlendMode===a)return!1;this.currentBlendMode=a;a=this.renderer.blendModes[this.currentBlendMode];this.renderer.gl.blendFunc(a[0],a[1]);return!0}},{"./WebGLManager":51}],47:[function(e,h,l){function b(a){g.call(this,a);this.filterStack=[];this.filterStack.push({renderTarget:a.currentRenderTarget,filter:[],bounds:null});this.texturePool=[];this.textureSize=new d.Rectangle(0,0,a.width,a.height);this.currentFrame=
null}var g=e("./WebGLManager"),a=e("../utils/RenderTarget"),f=e("../../../const"),c=e("../utils/Quad"),d=e("../../../math");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.onContextChange=function(){this.texturePool.length=0;this.quad=new c(this.renderer.gl)};b.prototype.setFilterStack=function(a){this.filterStack=a};b.prototype.pushFilter=function(a,c){var d=a.filterArea?a.filterArea.clone():a.getBounds();d.x|=0;d.y|=0;d.width|=0;d.height|=0;var b=c[0].padding|
0;d.x-=b;d.y-=b;d.width+=2*b;d.height+=2*b;this.renderer.currentRenderTarget.transform?(b=this.renderer.currentRenderTarget.transform,d.x+=b.tx,d.y+=b.ty,this.capFilterArea(d),d.x-=b.tx,d.y-=b.ty):this.capFilterArea(d);0<d.width&&0<d.height?(this.currentFrame=d,d=this.getRenderTarget(),this.renderer.setRenderTarget(d),d.clear(),this.filterStack.push({renderTarget:d,filter:c})):this.filterStack.push({renderTarget:null,filter:c})};b.prototype.popFilter=function(){var a=this.filterStack.pop(),c=this.filterStack[this.filterStack.length-
1],d=a.renderTarget;if(a.renderTarget){var c=c.renderTarget,b=this.renderer.gl;this.currentFrame=d.frame;this.quad.map(this.textureSize,d.frame);b.bindBuffer(b.ARRAY_BUFFER,this.quad.vertexBuffer);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var e=a.filter;b.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,b.FLOAT,!1,0,0);b.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,b.FLOAT,!1,0,32);b.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,
4,b.FLOAT,!1,0,64);this.renderer.blendModeManager.setBlendMode(f.BLEND_MODES.NORMAL);if(1===e.length)e[0].uniforms.dimensions&&(e[0].uniforms.dimensions.value[0]=this.renderer.width,e[0].uniforms.dimensions.value[1]=this.renderer.height,e[0].uniforms.dimensions.value[2]=this.quad.vertices[0],e[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),e[0].applyFilter(this.renderer,d,c),this.returnRenderTarget(d);else{for(var b=this.getRenderTarget(!0),g=0;g<e.length-1;g++){var h=e[g];h.uniforms.dimensions&&
(h.uniforms.dimensions.value[0]=this.renderer.width,h.uniforms.dimensions.value[1]=this.renderer.height,h.uniforms.dimensions.value[2]=this.quad.vertices[0],h.uniforms.dimensions.value[3]=this.quad.vertices[5]);h.applyFilter(this.renderer,d,b);h=d;d=b;b=h}e[e.length-1].applyFilter(this.renderer,d,c);this.returnRenderTarget(d);this.returnRenderTarget(b)}return a.filter}};b.prototype.getRenderTarget=function(c){var d=this.texturePool.pop()||new a(this.renderer.gl,this.textureSize.width,this.textureSize.height,
f.SCALE_MODES.LINEAR,this.renderer.resolution*f.FILTER_RESOLUTION);d.frame=this.currentFrame;c&&d.clear(!0);return d};b.prototype.returnRenderTarget=function(a){this.texturePool.push(a)};b.prototype.applyFilter=function(a,c,d,b){var f=this.renderer.gl;this.renderer.setRenderTarget(d);b&&d.clear();this.renderer.shaderManager.setShader(a);a.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0);a.syncUniforms();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,
c.texture);f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0);this.renderer.drawCount++};b.prototype.calculateMappedMatrix=function(a,c,b){var f=c.worldTransform.copy(d.Matrix.TEMP_MATRIX),e=c._texture.baseTexture;b=b.identity();var g=this.textureSize.height/this.textureSize.width;b.translate(a.x/this.textureSize.width,a.y/this.textureSize.height);b.scale(1,g);a=this.textureSize.width/e.width;var h=this.textureSize.height/e.height;f.tx/=e.width*a;f.ty/=e.width*a;f.invert();b.prepend(f);b.scale(1,1/
g);b.scale(a,h);b.translate(c.anchor.x,c.anchor.y);return b};b.prototype.capFilterArea=function(a){0>a.x&&(a.width+=a.x,a.x=0);0>a.y&&(a.height+=a.y,a.y=0);a.x+a.width>this.textureSize.width&&(a.width=this.textureSize.width-a.x);a.y+a.height>this.textureSize.height&&(a.height=this.textureSize.height-a.y)};b.prototype.resize=function(a,c){this.textureSize.width=a;this.textureSize.height=c;for(var d=0;d<this.texturePool.length;d++)this.texturePool[d].resize(a,c)};b.prototype.destroy=function(){this.quad.destroy();
g.prototype.destroy.call(this);this.filterStack=null;for(var a=this.offsetY=0;a<this.texturePool.length;a++)this.texturePool[a].destroy();this.texturePool=null}},{"../../../const":16,"../../../math":26,"../utils/Quad":57,"../utils/RenderTarget":58,"./WebGLManager":51}],48:[function(e,h,l){function b(a){g.call(this,a);this.stencilStack=[];this.reverse=!0;this.count=0;this.alphaMaskPool=[]}var g=e("./WebGLManager"),a=e("../filters/SpriteMaskFilter");b.prototype=Object.create(g.prototype);b.prototype.constructor=
b;h.exports=b;b.prototype.pushMask=function(a,c){c.texture?this.pushSpriteMask(a,c):this.pushStencilMask(a,c)};b.prototype.popMask=function(a,c){c.texture?this.popSpriteMask(a,c):this.popStencilMask(a,c)};b.prototype.pushSpriteMask=function(b,c){var d=this.alphaMaskPool.pop();d||(d=[new a(c)]);d[0].maskSprite=c;this.renderer.filterManager.pushFilter(b,d)};b.prototype.popSpriteMask=function(){var a=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(a)};b.prototype.pushStencilMask=function(a,
c){this.renderer.stencilManager.pushMask(c)};b.prototype.popStencilMask=function(a,c){this.renderer.stencilManager.popMask(c)}},{"../filters/SpriteMaskFilter":45,"./WebGLManager":51}],49:[function(e,h,l){function b(a){g.call(this,a);this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];for(a=0;a<this.maxAttibs;a++)this.attribState[a]=!1;this.stack=[];this._currentId=-1;this.currentShader=null}var g=e("./WebGLManager"),a=e("../shaders/TextureShader"),f=e("../shaders/ComplexPrimitiveShader"),
c=e("../shaders/PrimitiveShader");e=e("../../../utils");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;e.pluginTarget.mixin(b);h.exports=b;b.prototype.onContextChange=function(){this.initPlugins();var d=this.renderer.gl;this.maxAttibs=d.getParameter(d.MAX_VERTEX_ATTRIBS);this.attribState=[];for(d=0;d<this.maxAttibs;d++)this.attribState[d]=!1;this.defaultShader=new a(this);this.primitiveShader=new c(this);this.complexPrimitiveShader=new f(this)};b.prototype.setAttribs=function(a){var c;
for(c=0;c<this.tempAttribState.length;c++)this.tempAttribState[c]=!1;for(var b in a)this.tempAttribState[a[b]]=!0;a=this.renderer.gl;for(c=0;c<this.attribState.length;c++)this.attribState[c]!==this.tempAttribState[c]&&(this.attribState[c]=this.tempAttribState[c],this.attribState[c]?a.enableVertexAttribArray(c):a.disableVertexAttribArray(c))};b.prototype.setShader=function(a){if(this._currentId===a.uid)return!1;this._currentId=a.uid;this.currentShader=a;this.renderer.gl.useProgram(a.program);this.setAttribs(a.attributes);
return!0};b.prototype.destroy=function(){this.primitiveShader.destroy();this.complexPrimitiveShader.destroy();g.prototype.destroy.call(this);this.destroyPlugins();this.tempAttribState=this.attribState=null}},{"../../../utils":70,"../shaders/ComplexPrimitiveShader":52,"../shaders/PrimitiveShader":53,"../shaders/TextureShader":55,"./WebGLManager":51}],50:[function(e,h,l){function b(a){g.call(this,a);this.stencilMaskStack=null}var g=e("./WebGLManager"),a=e("../../../utils");b.prototype=Object.create(g.prototype);
b.prototype.constructor=b;h.exports=b;b.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var c=this.renderer.gl;0===a.stencilStack.length?c.disable(c.STENCIL_TEST):c.enable(c.STENCIL_TEST)};b.prototype.pushStencil=function(a,c){this.renderer.currentRenderTarget.attachStencilBuffer();var d=this.renderer.gl,b=this.stencilMaskStack;this.bindGraphics(a,c);0===b.stencilStack.length&&(d.enable(d.STENCIL_TEST),d.clear(d.STENCIL_BUFFER_BIT),b.reverse=!0,b.count=0);b.stencilStack.push(c);var e=b.count;
d.colorMask(!1,!1,!1,!1);d.stencilFunc(d.ALWAYS,0,255);d.stencilOp(d.KEEP,d.KEEP,d.INVERT);1===c.mode?(d.drawElements(d.TRIANGLE_FAN,c.indices.length-4,d.UNSIGNED_SHORT,0),b.reverse?(d.stencilFunc(d.EQUAL,255-e,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)):(d.stencilFunc(d.EQUAL,e,255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(c.indices.length-4)),b.reverse?d.stencilFunc(d.EQUAL,255-(e+1),255):d.stencilFunc(d.EQUAL,e+1,255),b.reverse=!b.reverse):(b.reverse?(d.stencilFunc(d.EQUAL,
e,255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)):(d.stencilFunc(d.EQUAL,255-e,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)),d.drawElements(d.TRIANGLE_STRIP,c.indices.length,d.UNSIGNED_SHORT,0),b.reverse?d.stencilFunc(d.EQUAL,e+1,255):d.stencilFunc(d.EQUAL,255-(e+1),255));d.colorMask(!0,!0,!0,!0);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);b.count++};b.prototype.bindGraphics=function(b,c){var d=this.renderer.gl,e;1===c.mode?(e=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(e),d.uniformMatrix3fv(e.uniforms.translationMatrix._location,
!1,b.worldTransform.toArray(!0)),d.uniformMatrix3fv(e.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),d.uniform3fv(e.uniforms.tint._location,a.hex2rgb(b.tint)),d.uniform3fv(e.uniforms.color._location,c.color),d.uniform1f(e.uniforms.alpha._location,b.worldAlpha),d.bindBuffer(d.ARRAY_BUFFER,c.buffer),d.vertexAttribPointer(e.attributes.aVertexPosition,2,d.FLOAT,!1,8,0)):(e=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(e),
d.uniformMatrix3fv(e.uniforms.translationMatrix._location,!1,b.worldTransform.toArray(!0)),d.uniformMatrix3fv(e.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),d.uniform3fv(e.uniforms.tint._location,a.hex2rgb(b.tint)),d.uniform1f(e.uniforms.alpha._location,b.worldAlpha),d.bindBuffer(d.ARRAY_BUFFER,c.buffer),d.vertexAttribPointer(e.attributes.aVertexPosition,2,d.FLOAT,!1,24,0),d.vertexAttribPointer(e.attributes.aColor,4,d.FLOAT,!1,24,8));d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,
c.indexBuffer)};b.prototype.popStencil=function(a,c){var b=this.renderer.gl,e=this.stencilMaskStack;e.stencilStack.pop();e.count--;if(0===e.stencilStack.length)b.disable(b.STENCIL_TEST);else{var k=e.count;this.bindGraphics(a,c);b.colorMask(!1,!1,!1,!1);1===c.mode?(e.reverse=!e.reverse,e.reverse?(b.stencilFunc(b.EQUAL,255-(k+1),255),b.stencilOp(b.KEEP,b.KEEP,b.INCR)):(b.stencilFunc(b.EQUAL,k+1,255),b.stencilOp(b.KEEP,b.KEEP,b.DECR)),b.drawElements(b.TRIANGLE_FAN,4,b.UNSIGNED_SHORT,2*(c.indices.length-
4)),b.stencilFunc(b.ALWAYS,0,255),b.stencilOp(b.KEEP,b.KEEP,b.INVERT),b.drawElements(b.TRIANGLE_FAN,c.indices.length-4,b.UNSIGNED_SHORT,0),this.renderer.drawCount+=2):(e.reverse?(b.stencilFunc(b.EQUAL,k+1,255),b.stencilOp(b.KEEP,b.KEEP,b.DECR)):(b.stencilFunc(b.EQUAL,255-(k+1),255),b.stencilOp(b.KEEP,b.KEEP,b.INCR)),b.drawElements(b.TRIANGLE_STRIP,c.indices.length,b.UNSIGNED_SHORT,0),this.renderer.drawCount++);e.reverse?b.stencilFunc(b.EQUAL,k,255):b.stencilFunc(b.EQUAL,255-k,255);b.colorMask(!0,
!0,!0,!0);b.stencilOp(b.KEEP,b.KEEP,b.KEEP)}};b.prototype.destroy=function(){g.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null};b.prototype.pushMask=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);a.dirty&&this.renderer.plugins.graphics.updateGraphics(a,this.renderer.gl);a._webGL[this.renderer.gl.id].data.length&&this.pushStencil(a,a._webGL[this.renderer.gl.id].data[0])};b.prototype.popMask=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);
this.popStencil(a,a._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":70,"./WebGLManager":51}],51:[function(e,h,l){function b(b){this.renderer=b;this.renderer.on("context",this.onContextChange,this)}b.prototype.constructor=b;h.exports=b;b.prototype.onContextChange=function(){};b.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null}},{}],52:[function(e,h,l){function b(a){g.call(this,a,"attribute vec2 aVertexPosition;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform vec3 tint;\nuniform float alpha;\nuniform vec3 color;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = vec4(color * alpha * tint, alpha);\n}",
"precision mediump float;\nvarying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}",{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var g=e("./Shader");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b},{"./Shader":54}],53:[function(e,h,l){function b(a){g.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform float flipY;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",
"precision mediump float;\nvarying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}",{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var g=e("./Shader");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b},{"./Shader":54}],54:[function(e,h,l){function b(a,b,c,d,e){if(!b||!c)throw Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");
this.uid=g.uid();this.gl=a.renderer.gl;this.shaderManager=a;this.program=null;this.uniforms=d||{};this.attributes=e||{};this.textureCount=1;this.vertexSrc=b;this.fragmentSrc=c;this.init()}var g=e("../../../utils");b.prototype.constructor=b;h.exports=b;b.prototype.init=function(){this.compile();this.gl.useProgram(this.program);this.cacheUniformLocations(Object.keys(this.uniforms));this.cacheAttributeLocations(Object.keys(this.attributes))};b.prototype.cacheUniformLocations=function(a){for(var b=0;b<
a.length;++b)this.uniforms[a[b]]._location=this.gl.getUniformLocation(this.program,a[b])};b.prototype.cacheAttributeLocations=function(a){for(var b=0;b<a.length;++b)this.attributes[a[b]]=this.gl.getAttribLocation(this.program,a[b])};b.prototype.compile=function(){var a=this.gl,b=this._glCompile(a.VERTEX_SHADER,this.vertexSrc),c=this._glCompile(a.FRAGMENT_SHADER,this.fragmentSrc),d=a.createProgram();a.attachShader(d,b);a.attachShader(d,c);a.linkProgram(d);a.getProgramParameter(d,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),
console.error("gl.VALIDATE_STATUS",a.getProgramParameter(d,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(d)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(d)),a.deleteProgram(d),d=null);a.deleteShader(b);a.deleteShader(c);return this.program=d};b.prototype.syncUniform=function(a){var b=a._location,c=a.value,d=this.gl,e,k;switch(a.type){case "b":case "bool":case "boolean":d.uniform1i(b,c?1:0);break;case "i":case "1i":d.uniform1i(b,
c);break;case "f":case "1f":d.uniform1f(b,c);break;case "2f":d.uniform2f(b,c[0],c[1]);break;case "3f":d.uniform3f(b,c[0],c[1],c[2]);break;case "4f":d.uniform4f(b,c[0],c[1],c[2],c[3]);break;case "v2":d.uniform2f(b,c.x,c.y);break;case "v3":d.uniform3f(b,c.x,c.y,c.z);break;case "v4":d.uniform4f(b,c.x,c.y,c.z,c.w);break;case "1iv":d.uniform1iv(b,c);break;case "2iv":d.uniform2iv(b,c);break;case "3iv":d.uniform3iv(b,c);break;case "4iv":d.uniform4iv(b,c);break;case "1fv":d.uniform1fv(b,c);break;case "2fv":d.uniform2fv(b,
c);break;case "3fv":d.uniform3fv(b,c);break;case "4fv":d.uniform4fv(b,c);break;case "m2":case "mat2":case "Matrix2fv":d.uniformMatrix2fv(b,a.transpose,c);break;case "m3":case "mat3":case "Matrix3fv":d.uniformMatrix3fv(b,a.transpose,c);break;case "m4":case "mat4":case "Matrix4fv":d.uniformMatrix4fv(b,a.transpose,c);break;case "c":"number"===typeof c&&(c=g.hex2rgb(c));d.uniform3f(b,c[0],c[1],c[2]);break;case "iv1":d.uniform1iv(b,c);break;case "iv":d.uniform3iv(b,c);break;case "fv1":d.uniform1fv(b,c);
break;case "fv":d.uniform3fv(b,c);break;case "v2v":a._array||(a._array=new Float32Array(2*c.length));e=0;for(k=c.length;e<k;++e)a._array[2*e]=c[e].x,a._array[2*e+1]=c[e].y;d.uniform2fv(b,a._array);break;case "v3v":a._array||(a._array=new Float32Array(3*c.length));e=0;for(k=c.length;e<k;++e)a._array[3*e]=c[e].x,a._array[3*e+1]=c[e].y,a._array[3*e+2]=c[e].z;d.uniform3fv(b,a._array);break;case "v4v":a._array||(a._array=new Float32Array(4*c.length));e=0;for(k=c.length;e<k;++e)a._array[4*e]=c[e].x,a._array[4*
e+1]=c[e].y,a._array[4*e+2]=c[e].z,a._array[4*e+3]=c[e].w;d.uniform4fv(b,a._array);break;case "t":case "sampler2D":if(!a.value||!a.value.baseTexture.hasLoaded)break;d.activeTexture(d["TEXTURE"+this.textureCount]);b=a.value.baseTexture._glTextures[d.id];b||(this.initSampler2D(a),b=a.value.baseTexture._glTextures[d.id]);d.bindTexture(d.TEXTURE_2D,b);d.uniform1i(a._location,this.textureCount);this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+a.type)}};b.prototype.syncUniforms=
function(){this.textureCount=1;for(var a in this.uniforms)this.syncUniform(this.uniforms[a])};b.prototype.initSampler2D=function(a){var b=this.gl,c=a.value.baseTexture;c.hasLoaded&&(a.textureData?(a=a.textureData,c._glTextures[b.id]=b.createTexture(),b.bindTexture(b.TEXTURE_2D,c._glTextures[b.id]),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.premultipliedAlpha),b.texImage2D(b.TEXTURE_2D,0,a.luminance?b.LUMINANCE:b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c.source),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
a.magFilter?a.magFilter:b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.wrapS?a.wrapS:b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,a.wrapS?a.wrapS:b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,a.wrapT?a.wrapT:b.CLAMP_TO_EDGE)):this.shaderManager.renderer.updateTexture(c))};b.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.fragmentSrc=this.vertexSrc=this.attributes=this.uniforms=this.gl=null};b.prototype._glCompile=function(a,b){var c=
this.gl.createShader(a);this.gl.shaderSource(c,b);this.gl.compileShader(c);return this.gl.getShaderParameter(c,this.gl.COMPILE_STATUS)?c:(console.log(this.gl.getShaderInfoLog(c)),null)}},{"../../../utils":70}],55:[function(e,h,l){function b(a,f,c,d,e){var k={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(d)for(var h in d)k[h]=d[h];d={aVertexPosition:0,aTextureCoord:0,aColor:0};if(e)for(var n in e)d[n]=e[n];f=f||b.defaultVertexSrc;
c=c||b.defaultFragmentSrc;g.call(this,a,f,c,k,d)}var g=e("./Shader");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.defaultVertexSrc="precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}";
b.defaultFragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}"},{"./Shader":54}],56:[function(e,h,l){function b(a){g.call(this,a)}var g=e("../managers/WebGLManager");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.start=function(){};b.prototype.stop=function(){this.flush()};b.prototype.flush=function(){};b.prototype.render=
function(a){}},{"../managers/WebGLManager":51}],57:[function(e,h,l){function b(b){this.gl=b;this.vertices=new Float32Array([0,0,200,0,200,200,0,200]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.vertexBuffer=b.createBuffer();this.indexBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer);b.bufferData(b.ARRAY_BUFFER,128,b.DYNAMIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
this.indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW);this.upload()}b.prototype.constructor=b;b.prototype.map=function(b,a){var f=0,c=0;this.uvs[0]=f;this.uvs[1]=c;this.uvs[2]=f+a.width/b.width;this.uvs[3]=c;this.uvs[4]=f+a.width/b.width;this.uvs[5]=c+a.height/b.height;this.uvs[6]=f;this.uvs[7]=c+a.height/b.height;f=a.x;c=a.y;this.vertices[0]=f;this.vertices[1]=c;this.vertices[2]=f+a.width;this.vertices[3]=c;this.vertices[4]=f+a.width;this.vertices[5]=c+a.height;this.vertices[6]=
f;this.vertices[7]=c+a.height;this.upload()};b.prototype.upload=function(){var b=this.gl;b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer);b.bufferSubData(b.ARRAY_BUFFER,0,this.vertices);b.bufferSubData(b.ARRAY_BUFFER,32,this.uvs);b.bufferSubData(b.ARRAY_BUFFER,64,this.colors)};b.prototype.destroy=function(){var b=this.gl;b.deleteBuffer(this.vertexBuffer);b.deleteBuffer(this.indexBuffer)};h.exports=b},{}],58:[function(e,h,l){var b=e("../../../math"),g=e("../../../utils"),a=e("../../../const"),f=e("./StencilMaskStack");
e=function(c,d,e,k,h,n){this.gl=c;this.texture=this.frameBuffer=null;this.size=new b.Rectangle(0,0,1,1);this.resolution=h||a.RESOLUTION;this.projectionMatrix=new b.Matrix;this.stencilBuffer=this.frame=this.transform=null;this.stencilMaskStack=new f;this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}];this.scaleMode=k||a.SCALE_MODES.DEFAULT;this.root=n;this.root||(this.frameBuffer=c.createFramebuffer(),this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MAG_FILTER,k===a.SCALE_MODES.LINEAR?c.LINEAR:c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,k===a.SCALE_MODES.LINEAR?c.LINEAR:c.NEAREST),g.isPowerOfTwo(d,e)?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)),c.bindFramebuffer(c.FRAMEBUFFER,this.frameBuffer),c.framebufferTexture2D(c.FRAMEBUFFER,
c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.texture,0));this.resize(d,e)};e.prototype.constructor=e;h.exports=e;e.prototype.clear=function(a){var b=this.gl;a&&b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT)};e.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var a=this.gl;this.stencilBuffer=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,this.stencilBuffer);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,
a.RENDERBUFFER,this.stencilBuffer);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}};e.prototype.activate=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer);var b=this.frame||this.size;this.calculateProjection(b);this.transform&&this.projectionMatrix.append(this.transform);a.viewport(0,0,b.width*this.resolution,b.height*this.resolution)};e.prototype.calculateProjection=function(a){var b=this.projectionMatrix;
b.identity();this.root?(b.a=1/a.width*2,b.d=-1/a.height*2,b.tx=-1-a.x*b.a,b.ty=1-a.y*b.d):(b.a=1/a.width*2,b.d=1/a.height*2,b.tx=-1-a.x*b.a,b.ty=-1-a.y*b.d)};e.prototype.resize=function(a,b){a|=0;b|=0;if(this.size.width!==a||this.size.height!==b){this.size.width=a;this.size.height=b;if(!this.root){var f=this.gl;f.bindTexture(f.TEXTURE_2D,this.texture);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,a*this.resolution,b*this.resolution,0,f.RGBA,f.UNSIGNED_BYTE,null);this.stencilBuffer&&(f.bindRenderbuffer(f.RENDERBUFFER,
this.stencilBuffer),f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_STENCIL,a*this.resolution,b*this.resolution))}this.calculateProjection(this.frame||this.size)}};e.prototype.destroy=function(){var a=this.gl;a.deleteRenderbuffer(this.stencilBuffer);a.deleteFramebuffer(this.frameBuffer);a.deleteTexture(this.texture);this.texture=this.frameBuffer=null}},{"../../../const":16,"../../../math":26,"../../../utils":70,"./StencilMaskStack":59}],59:[function(e,h,l){function b(){this.stencilStack=[];this.reverse=
!0;this.count=0}b.prototype.constructor=b;h.exports=b},{}],60:[function(e,h,l){function b(c){f.call(this);this.anchor=new g.Point;this._texture=null;this._height=this._width=0;this.tint=16777215;this.blendMode=m.BLEND_MODES.NORMAL;this.shader=null;this.cachedTint=16777215;this.texture=c||a.EMPTY}var g=e("../math"),a=e("../textures/Texture"),f=e("../display/Container"),c=e("../renderers/canvas/utils/CanvasTinter"),d=e("../utils"),m=e("../const"),k=new g.Point;b.prototype=Object.create(f.prototype);
b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(a){var c=d.sign(this.scale.x)||1;this.scale.x=c*a/this.texture._frame.width;this._width=a}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(a){var c=d.sign(this.scale.y)||1;this.scale.y=c*a/this.texture._frame.height;this._height=a}},texture:{get:function(){return this._texture},set:function(a){if(this._texture!==
a&&(this._texture=a,this.cachedTint=16777215,a))if(a.baseTexture.hasLoaded)this._onTextureUpdate();else a.once("update",this._onTextureUpdate,this)}}});b.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=d.sign(this.scale.x)*this._width/this.texture.frame.width);this._height&&(this.scale.y=d.sign(this.scale.y)*this._height/this.texture.frame.height)};b.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins.sprite);a.plugins.sprite.render(this)};b.prototype.getBounds=function(a){if(!this._currentBounds){var c=
this._texture._frame.width,b=this._texture._frame.height,d=c*(1-this.anchor.x),c=c*-this.anchor.x,f=b*(1-this.anchor.y),e=b*-this.anchor.y;a=a||this.worldTransform;var k=a.a,m=a.b,g=a.c,h=a.d,l=a.tx,G=a.ty,L;L=k*c+g*e+l;a=h*e+m*c+G;var b=k*d+g*e+l,e=h*e+m*d+G,F=k*d+g*f+l,d=h*f+m*d+G,k=k*c+g*f+l,c=h*f+m*c+G,m=L,m=b<m?b:m,m=F<m?F:m,m=k<m?k:m,h=a,h=e<h?e:h,h=d<h?d:h,h=c<h?c:h;L=b>L?b:L;L=F>L?F:L;L=k>L?k:L;a=e>a?e:a;a=d>a?d:a;a=c>a?c:a;this.children.length&&(b=this.containerGetBounds(),d=b.x,c=b.x+b.width,
f=b.y,e=b.y+b.height,m=m<d?m:d,h=h<f?h:f,L=L>c?L:c,a=a>e?a:e);c=this._bounds;c.x=m;c.width=L-m;c.y=h;c.height=a-h;this._currentBounds=c}return this._currentBounds};b.prototype.getLocalBounds=function(){this._bounds.x=-this._texture._frame.width*this.anchor.x;this._bounds.y=-this._texture._frame.height*this.anchor.y;this._bounds.width=this._texture._frame.width;this._bounds.height=this._texture._frame.height;return this._bounds};b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,
k);var c=this._texture._frame.width;a=this._texture._frame.height;var b=-c*this.anchor.x;return k.x>b&&k.x<b+c&&(c=-a*this.anchor.y,k.y>c&&k.y<c+a)?!0:!1};b.prototype._renderCanvas=function(a){if(!(0>=this.texture.crop.width||0>=this.texture.crop.height)){var b=a.blendModes[this.blendMode];b!==a.context.globalCompositeOperation&&(a.context.globalCompositeOperation=b);if(this.texture.valid){var b=this._texture,d=this.worldTransform,f,e,k,g;a.context.globalAlpha=this.worldAlpha;k=b.baseTexture.scaleMode===
m.SCALE_MODES.LINEAR;a.smoothProperty&&a.context[a.smoothProperty]!==k&&(a.context[a.smoothProperty]=k);b.rotate?(k=b.crop.height,g=b.crop.width,f=b.trim?b.trim.y-this.anchor.y*b.trim.height:this.anchor.y*-b._frame.height,e=b.trim?b.trim.x-this.anchor.x*b.trim.width:this.anchor.x*-b._frame.width,f+=k,d.tx=e*d.a+f*d.c+d.tx,d.ty=e*d.b+f*d.d+d.ty,f=d.a,d.a=-d.c,d.c=f,f=d.b,d.b=-d.d,d.d=f,e=f=0):(k=b.crop.width,g=b.crop.height,f=b.trim?b.trim.x-this.anchor.x*b.trim.width:this.anchor.x*-b._frame.width,
e=b.trim?b.trim.y-this.anchor.y*b.trim.height:this.anchor.y*-b._frame.height);a.roundPixels?(a.context.setTransform(d.a,d.b,d.c,d.d,d.tx*a.resolution|0,d.ty*a.resolution|0),f|=0,e|=0):a.context.setTransform(d.a,d.b,d.c,d.d,d.tx*a.resolution,d.ty*a.resolution);d=b.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=c.getTintedTexture(this,this.tint)),a.context.drawImage(this.tintedTexture,0,0,k*d,g*d,f*a.resolution,e*a.resolution,
k*a.resolution,g*a.resolution)):a.context.drawImage(b.baseTexture.source,b.crop.x*d,b.crop.y*d,k*d,g*d,f*a.resolution,e*a.resolution,k*a.resolution,g*a.resolution)}}};b.prototype.destroy=function(a,c){f.prototype.destroy.call(this);this.anchor=null;a&&this._texture.destroy(c);this.shader=this._texture=null};b.fromFrame=function(a){var c=d.TextureCache[a];if(!c)throw Error('The frameId "'+a+'" does not exist in the texture cache');return new b(c)};b.fromImage=function(c,d,f){return new b(a.fromImage(c,
d,f))}},{"../const":16,"../display/Container":17,"../math":26,"../renderers/canvas/utils/CanvasTinter":41,"../textures/Texture":65,"../utils":70}],61:[function(e,h,l){function b(b){g.call(this,b);this.vertSize=5;this.vertByteSize=4*this.vertSize;this.size=a.SPRITE_BATCH_SIZE;b=6*this.size;this.vertices=new ArrayBuffer(4*this.size*this.vertByteSize);this.positions=new Float32Array(this.vertices);this.colors=new Uint32Array(this.vertices);this.indices=new Uint16Array(b);for(var c=0,d=0;c<b;c+=6,d+=
4)this.indices[c+0]=d+0,this.indices[c+1]=d+1,this.indices[c+2]=d+2,this.indices[c+3]=d+0,this.indices[c+4]=d+2,this.indices[c+5]=d+3;this.currentBatchSize=0;this.sprites=[];this.shader=null}var g=e("../../renderers/webgl/utils/ObjectRenderer");l=e("../../renderers/webgl/WebGLRenderer");var a=e("../../const");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;l.registerPlugin("sprite",b);b.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader;
this.vertexBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW);this.currentBlendMode=99999};b.prototype.render=function(a){var c=a._texture;this.currentBatchSize>=this.size&&this.flush();var b=c._uvs;if(b){var e=a.anchor.x,k=a.anchor.y,g,h;c.trim&&void 0===a.tileScale?(h=
c.trim,e=h.x-e*h.width,g=e+c.crop.width,k=h.y-k*h.height,h=k+c.crop.height):(g=c._frame.width*(1-e),e=c._frame.width*-e,h=c._frame.height*(1-k),k=c._frame.height*-k);var c=this.currentBatchSize*this.vertByteSize,l=a.worldTransform,q=l.a,p=l.b,r=l.c,E=l.d,y=l.tx,A=l.ty,l=this.colors,v=this.positions;if(this.renderer.roundPixels){var C=this.renderer.resolution;v[c]=((q*e+r*k+y)*C|0)/C;v[c+1]=((E*k+p*e+A)*C|0)/C;v[c+5]=((q*g+r*k+y)*C|0)/C;v[c+6]=((E*k+p*g+A)*C|0)/C;v[c+10]=((q*g+r*h+y)*C|0)/C;v[c+11]=
((E*h+p*g+A)*C|0)/C;v[c+15]=((q*e+r*h+y)*C|0)/C;v[c+16]=((E*h+p*e+A)*C|0)/C}else v[c]=q*e+r*k+y,v[c+1]=E*k+p*e+A,v[c+5]=q*g+r*k+y,v[c+6]=E*k+p*g+A,v[c+10]=q*g+r*h+y,v[c+11]=E*h+p*g+A,v[c+15]=q*e+r*h+y,v[c+16]=E*h+p*e+A;v[c+2]=b.x0;v[c+3]=b.y0;v[c+7]=b.x1;v[c+8]=b.y1;v[c+12]=b.x2;v[c+13]=b.y2;v[c+17]=b.x3;v[c+18]=b.y3;b=a.tint;l[c+4]=l[c+9]=l[c+14]=l[c+19]=(b>>16)+(b&65280)+((b&255)<<16)+(255*a.worldAlpha<<24);this.sprites[this.currentBatchSize++]=a}};b.prototype.flush=function(){if(0!==this.currentBatchSize){var a=
this.renderer.gl,c;if(this.currentBatchSize>.5*this.size)a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices);else{var b=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);a.bufferSubData(a.ARRAY_BUFFER,0,b)}for(var e,k,g=b=0,h=null,l=this.renderer.blendModeManager.currentBlendMode,q=null,p,r,E=0,y=this.currentBatchSize;E<y;E++){k=this.sprites[E];c=k._texture.baseTexture;e=k.blendMode;k=k.shader||this.shader;p=l!==e;r=q!==k;if(h!==c||p||r)this.renderBatch(h,b,g),g=E,b=0,h=c,p&&(l=e,this.renderer.blendModeManager.setBlendMode(l)),
r&&(q=k,(c=q.shaders?q.shaders[a.id]:q)||(c=q.getShader(this.renderer)),this.renderer.shaderManager.setShader(c),c.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),c.syncUniforms(),a.activeTexture(a.TEXTURE0));b++}this.renderBatch(h,b,g);this.currentBatchSize=0}};b.prototype.renderBatch=function(a,c,b){if(0!==c){var e=this.renderer.gl;a._glTextures[e.id]?e.bindTexture(e.TEXTURE_2D,a._glTextures[e.id]):this.renderer.updateTexture(a);e.drawElements(e.TRIANGLES,
6*c,e.UNSIGNED_SHORT,12*b);this.renderer.drawCount++}};b.prototype.start=function(){var a=this.renderer.gl;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var c=this.vertByteSize;a.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,a.FLOAT,!1,c,0);a.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,a.FLOAT,!1,c,8);a.vertexAttribPointer(this.shader.attributes.aColor,4,a.UNSIGNED_BYTE,!0,c,16)};b.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer);
this.renderer.gl.deleteBuffer(this.indexBuffer);g.prototype.destroy.call(this);this.shader.destroy();this.shader=this.sprites=this.indexBuffer=this.vertexBuffer=this.indices=this.colors=this.positions=this.vertices=this.renderer=null}},{"../../const":16,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56}],62:[function(e,h,l){function b(c,b,e){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=e||d.RESOLUTION;
this._style=this._text=null;e=a.fromCanvas(this.canvas);e.trim=new f.Rectangle;g.call(this,e);this.text=c;this.style=b}var g=e("../sprites/Sprite"),a=e("../textures/Texture"),f=e("../math"),c=e("../utils"),d=e("../const");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.fontPropertiesCache={};b.fontPropertiesCanvas=document.createElement("canvas");b.fontPropertiesContext=b.fontPropertiesCanvas.getContext("2d");Object.defineProperties(b.prototype,{width:{get:function(){this.dirty&&
this.updateText();return this.scale.x*this._texture._frame.width},set:function(a){this.scale.x=a/this._texture._frame.width;this._width=a}},height:{get:function(){this.dirty&&this.updateText();return this.scale.y*this._texture._frame.height},set:function(a){this.scale.y=a/this._texture._frame.height;this._height=a}},style:{get:function(){return this._style},set:function(a){a=a||{};"number"===typeof a.fill&&(a.fill=c.hex2string(a.fill));"number"===typeof a.stroke&&(a.stroke=c.hex2string(a.stroke));
"number"===typeof a.dropShadowColor&&(a.dropShadowColor=c.hex2string(a.dropShadowColor));a.font=a.font||"bold 20pt Arial";a.fill=a.fill||"black";a.align=a.align||"left";a.stroke=a.stroke||"black";a.strokeThickness=a.strokeThickness||0;a.wordWrap=a.wordWrap||!1;a.wordWrapWidth=a.wordWrapWidth||100;a.dropShadow=a.dropShadow||!1;a.dropShadowColor=a.dropShadowColor||"#000000";a.dropShadowAngle=void 0!==a.dropShadowAngle?a.dropShadowAngle:Math.PI/6;a.dropShadowDistance=void 0!==a.dropShadowDistance?a.dropShadowDistance:
5;a.dropShadowBlur=void 0!==a.dropShadowBlur?a.dropShadowBlur:0;a.padding=a.padding||0;a.textBaseline=a.textBaseline||"alphabetic";a.lineJoin=a.lineJoin||"miter";a.miterLimit=a.miterLimit||10;this._style=a;this.dirty=!0}},text:{get:function(){return this._text},set:function(a){a=a.toString()||" ";this._text!==a&&(this._text=a,this.dirty=!0)}}});b.prototype.updateText=function(){var a=this._style;this.context.font=a.font;for(var c=(a.wordWrap?this.wordWrap(this._text):this._text).split(/(?:\r\n|\r|\n)/),
b=Array(c.length),d=0,f=this.determineFontProperties(a.font),e=0;e<c.length;e++){var g=this.context.measureText(c[e]).width;b[e]=g;d=Math.max(d,g)}e=d+a.strokeThickness;a.dropShadow&&(e+=a.dropShadowDistance);this.canvas.width=(e+this.context.lineWidth)*this.resolution;g=this.style.lineHeight||f.fontSize+a.strokeThickness;e=g*c.length;a.dropShadow&&(e+=a.dropShadowDistance);this.canvas.height=(e+2*this._style.padding)*this.resolution;this.context.scale(this.resolution,this.resolution);navigator.isCocoonJS&&
this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.font=a.font;this.context.strokeStyle=a.stroke;this.context.lineWidth=a.strokeThickness;this.context.textBaseline=a.textBaseline;this.context.lineJoin=a.lineJoin;this.context.miterLimit=a.miterLimit;var h,l;if(a.dropShadow){0<a.dropShadowBlur?(this.context.shadowColor=a.dropShadowColor,this.context.shadowBlur=a.dropShadowBlur):this.context.fillStyle=a.dropShadowColor;for(var y=Math.cos(a.dropShadowAngle)*a.dropShadowDistance,
A=Math.sin(a.dropShadowAngle)*a.dropShadowDistance,e=0;e<c.length;e++)h=a.strokeThickness/2,l=a.strokeThickness/2+e*g+f.ascent,"right"===a.align?h+=d-b[e]:"center"===a.align&&(h+=(d-b[e])/2),a.fill&&this.context.fillText(c[e],h+y,l+A+this._style.padding)}this.context.fillStyle=a.fill;for(e=0;e<c.length;e++)h=a.strokeThickness/2,l=a.strokeThickness/2+e*g+f.ascent,"right"===a.align?h+=d-b[e]:"center"===a.align&&(h+=(d-b[e])/2),a.stroke&&a.strokeThickness&&this.context.strokeText(c[e],h,l+this._style.padding),
a.fill&&this.context.fillText(c[e],h,l+this._style.padding);this.updateTexture()};b.prototype.updateTexture=function(){var a=this._texture;a.baseTexture.hasLoaded=!0;a.baseTexture.resolution=this.resolution;a.baseTexture.width=this.canvas.width/this.resolution;a.baseTexture.height=this.canvas.height/this.resolution;a.crop.width=a._frame.width=this.canvas.width/this.resolution;a.crop.height=a._frame.height=this.canvas.height/this.resolution;a.trim.x=0;a.trim.y=-this._style.padding;a.trim.width=a._frame.width;
a.trim.height=a._frame.height-2*this._style.padding;this._width=this.canvas.width/this.resolution;this._height=this.canvas.height/this.resolution;a.baseTexture.emit("update",a.baseTexture);this.dirty=!1};b.prototype.renderWebGL=function(a){this.dirty&&this.updateText();g.prototype.renderWebGL.call(this,a)};b.prototype._renderCanvas=function(a){this.dirty&&this.updateText();g.prototype._renderCanvas.call(this,a)};b.prototype.determineFontProperties=function(a){var c=b.fontPropertiesCache[a];if(!c){var c=
{},d=b.fontPropertiesCanvas,f=b.fontPropertiesContext;f.font=a;var e=Math.ceil(f.measureText("|M\u00c9q").width),g=Math.ceil(f.measureText("M").width),h=2*g,g=1.4*g|0;d.width=e;d.height=h;f.fillStyle="#f00";f.fillRect(0,0,e,h);f.font=a;f.textBaseline="alphabetic";f.fillStyle="#000";f.fillText("|M\u00c9q",0,g);var d=f.getImageData(0,0,e,h).data,f=d.length,e=4*e,l,E,y=0,A=!1;for(l=0;l<g;l++){for(E=0;E<e;E+=4)if(255!==d[y+E]){A=!0;break}if(A)break;else y+=e}c.ascent=g-l;y=f-e;A=!1;for(l=h;l>g;l--){for(E=
0;E<e;E+=4)if(255!==d[y+E]){A=!0;break}if(A)break;else y-=e}c.descent=l-g;c.fontSize=c.ascent+c.descent;b.fontPropertiesCache[a]=c}return c};b.prototype.wordWrap=function(a){var c="";a=a.split("\n");for(var b=this._style.wordWrapWidth,d=0;d<a.length;d++){for(var f=b,e=a[d].split(" "),g=0;g<e.length;g++){var h=this.context.measureText(e[g]).width,l=h+this.context.measureText(" ").width;0===g||l>f?(0<g&&(c+="\n"),c+=e[g],f=b-h):(f-=l,c+=" "+e[g])}d<a.length-1&&(c+="\n")}return c};b.prototype.getBounds=
function(a){this.dirty&&this.updateText();return g.prototype.getBounds.call(this,a)};b.prototype.destroy=function(a){this._style=this.canvas=this.context=null;this._texture.destroy(void 0===a?!0:a)}},{"../const":16,"../math":26,"../sprites/Sprite":60,"../textures/Texture":65,"../utils":70}],63:[function(e,h,l){function b(c,b,e){f.call(this);this.uid=g.uid();this.resolution=e||1;this.realHeight=this.realWidth=this.height=this.width=100;this.scaleMode=b||a.SCALE_MODES.DEFAULT;this.isLoading=this.hasLoaded=
!1;this.source=null;this.premultipliedAlpha=!0;this.imageUrl=null;this.mipmap=this.isPowerOfTwo=!1;this._glTextures={};c&&this.loadSource(c)}var g=e("../utils"),a=e("../const"),f=e("eventemitter3");b.prototype=Object.create(f.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width;this.realHeight=this.source.naturalHeight||this.source.height;this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;
this.isPowerOfTwo=g.isPowerOfTwo(this.realWidth,this.realHeight);this.emit("update",this)};b.prototype.loadSource=function(a){var b=this.isLoading;this.isLoading=this.hasLoaded=!1;b&&this.source&&(this.source.onload=null,this.source.onerror=null);this.source=a;if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!a.getContext){this.isLoading=!0;var f=this;a.onload=function(){a.onload=null;a.onerror=null;f.isLoading&&(f.isLoading=!1,
f._sourceLoaded(),f.emit("loaded",f))};a.onerror=function(){a.onload=null;a.onerror=null;f.isLoading&&(f.isLoading=!1,f.emit("error",f))};a.complete&&a.src&&(this.isLoading=!1,a.onload=null,a.onerror=null,a.width&&a.height?(this._sourceLoaded(),b&&this.emit("loaded",this)):b&&this.emit("error",this))}};b.prototype._sourceLoaded=function(){this.hasLoaded=!0;this.update()};b.prototype.destroy=function(){this.imageUrl?(delete g.BaseTextureCache[this.imageUrl],delete g.TextureCache[this.imageUrl],this.imageUrl=
null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete g.BaseTextureCache[this.source._pixiId];this.source=null;this.dispose()};b.prototype.dispose=function(){this.emit("dispose",this)};b.prototype.updateSourceImage=function(a){this.source.src=a;this.loadSource(this.source)};b.fromImage=function(a,d,f){var e=g.BaseTextureCache[a];void 0===d&&0!==a.indexOf("data:")&&(d=!0);if(!e){var h=new Image;d&&(h.crossOrigin="");e=new b(h,f);e.imageUrl=a;h.src=a;g.BaseTextureCache[a]=
e;e.resolution=g.getResolutionOfUrl(a)}return e};b.fromCanvas=function(a,d){a._pixiId||(a._pixiId="canvas_"+g.uid());var f=g.BaseTextureCache[a._pixiId];f||(f=new b(a,d),g.BaseTextureCache[a._pixiId]=f);return f}},{"../const":16,"../utils":70,eventemitter3:10}],64:[function(e,h,l){function b(b,e,h,t,l){if(!b)throw Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100;h=h||100;l=l||k.RESOLUTION;var E=new g;E.width=e;E.height=h;E.resolution=l;E.scaleMode=t||
k.SCALE_MODES.DEFAULT;E.hasLoaded=!0;a.call(this,E,new m.Rectangle(0,0,e,h));this.width=e;this.height=h;this.resolution=l;this.render=null;this.renderer=b;this.renderer.type===k.RENDERER_TYPE.WEBGL?(b=this.renderer.gl,this.textureBuffer=new f(b,this.width,this.height,E.scaleMode,this.resolution),this.baseTexture._glTextures[b.id]=this.textureBuffer.texture,this.filterManager=new c(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,h),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),
this.renderer.currentRenderTarget.activate()):(this.render=this.renderCanvas,this.textureBuffer=new d(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas);this.valid=!0;this._updateUvs()}var g=e("./BaseTexture"),a=e("./Texture"),f=e("../renderers/webgl/utils/RenderTarget"),c=e("../renderers/webgl/managers/FilterManager"),d=e("../renderers/canvas/utils/CanvasBuffer"),m=e("../math"),k=e("../const"),t=new m.Matrix;b.prototype=Object.create(a.prototype);
b.prototype.constructor=b;h.exports=b;b.prototype.resize=function(a,b,c){if(a!==this.width||b!==this.height)this.valid=0<a&&0<b,this.width=this._frame.width=this.crop.width=a,this.height=this._frame.height=this.crop.height=b,c&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height))};b.prototype.clear=function(){this.valid&&(this.renderer.type===k.RENDERER_TYPE.WEBGL&&
this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())};b.prototype.renderWebGL=function(a,b,c,d){if(this.valid){d=void 0!==d?d:!0;this.textureBuffer.transform=b;this.textureBuffer.activate();a.worldAlpha=1;if(d){a.worldTransform.identity();a.currentBounds=null;b=a.children;var f;d=0;for(f=b.length;d<f;++d)b[d].updateTransform()}b=this.renderer.filterManager;this.renderer.filterManager=this.filterManager;this.renderer.renderDisplayObject(a,
this.textureBuffer,c);this.renderer.filterManager=b}};b.prototype.renderCanvas=function(a,b,c,d){if(this.valid){t.identity();b&&t.append(b);b=a.worldTransform;a.worldTransform=t;a.worldAlpha=1;d=a.children;var f,e;f=0;for(e=d.length;f<e;++f)d[f].updateTransform();c&&this.textureBuffer.clear();c=this.textureBuffer.context;d=this.renderer.resolution;this.renderer.resolution=this.resolution;this.renderer.renderDisplayObject(a,c);this.renderer.resolution=d;a.worldTransform===t&&(a.worldTransform=b)}};
b.prototype.destroy=function(){a.prototype.destroy.call(this,!0);this.textureBuffer.destroy();this.filterManager&&this.filterManager.destroy();this.renderer=null};b.prototype.getImage=function(){var a=new Image;a.src=this.getBase64();return a};b.prototype.getBase64=function(){return this.getCanvas().toDataURL()};b.prototype.getCanvas=function(){if(this.renderer.type===k.RENDERER_TYPE.WEBGL){var a=this.renderer.gl,b=this.textureBuffer.size.width,c=this.textureBuffer.size.height,f=new Uint8Array(4*
b*c);a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer);a.readPixels(0,0,b,c,a.RGBA,a.UNSIGNED_BYTE,f);a.bindFramebuffer(a.FRAMEBUFFER,null);a=new d(b,c);b=a.context.getImageData(0,0,b,c);b.data.set(f);a.context.putImageData(b,0,0);return a.canvas}return this.textureBuffer.canvas};b.prototype.getPixels=function(){var a,b;if(this.renderer.type===k.RENDERER_TYPE.WEBGL){var c=this.renderer.gl;a=this.textureBuffer.size.width;b=this.textureBuffer.size.height;var d=new Uint8Array(4*a*b);c.bindFramebuffer(c.FRAMEBUFFER,
this.textureBuffer.frameBuffer);c.readPixels(0,0,a,b,c.RGBA,c.UNSIGNED_BYTE,d);c.bindFramebuffer(c.FRAMEBUFFER,null);return d}a=this.textureBuffer.canvas.width;b=this.textureBuffer.canvas.height;return this.textureBuffer.canvas.getContext("2d").getImageData(0,0,a,b).data};b.prototype.getPixel=function(a,b){if(this.renderer.type===k.RENDERER_TYPE.WEBGL){var c=this.renderer.gl,d=new Uint8Array(4);c.bindFramebuffer(c.FRAMEBUFFER,this.textureBuffer.frameBuffer);c.readPixels(a,b,1,1,c.RGBA,c.UNSIGNED_BYTE,
d);c.bindFramebuffer(c.FRAMEBUFFER,null);return d}return this.textureBuffer.canvas.getContext("2d").getImageData(a,b,1,1).data}},{"../const":16,"../math":26,"../renderers/canvas/utils/CanvasBuffer":38,"../renderers/webgl/managers/FilterManager":47,"../renderers/webgl/utils/RenderTarget":58,"./BaseTexture":63,"./Texture":65}],65:[function(e,h,l){function b(a,f,e,g,m){c.call(this);this.noFrame=!1;f||(this.noFrame=!0,f=new d.Rectangle(0,0,1,1));a instanceof b&&(a=a.baseTexture);this.baseTexture=a;this._frame=
f;this.trim=g;this.requiresUpdate=this.valid=!1;this._uvs=null;this.height=this.width=0;this.crop=e||f;this.rotate=!!m;if(a.hasLoaded)this.noFrame&&(f=new d.Rectangle(0,0,a.width,a.height),a.on("update",this.onBaseTextureUpdated,this)),this.frame=f;else a.once("loaded",this.onBaseTextureLoaded,this)}var g=e("./BaseTexture"),a=e("./VideoBaseTexture"),f=e("./TextureUvs"),c=e("eventemitter3"),d=e("../math"),m=e("../utils");b.prototype=Object.create(c.prototype);b.prototype.constructor=b;h.exports=b;
Object.defineProperties(b.prototype,{frame:{get:function(){return this._frame},set:function(a){this._frame=a;this.noFrame=!1;this.width=a.width;this.height=a.height;if(!this.trim&&!this.rotate&&(a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height))throw Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded;this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=
this.trim.width,this._frame.height=this.trim.height):this.crop=a;this.valid&&this._updateUvs()}}});b.prototype.update=function(){this.baseTexture.update()};b.prototype.onBaseTextureLoaded=function(a){this.frame=this.noFrame?new d.Rectangle(0,0,a.width,a.height):this._frame;this.emit("update",this)};b.prototype.onBaseTextureUpdated=function(a){this._frame.width=a.width;this._frame.height=a.height;this.emit("update",this)};b.prototype.destroy=function(a){this.baseTexture&&(a&&this.baseTexture.destroy(),
this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null);this.crop=this.trim=this._uvs=this._frame=null;this.valid=!1;this.off("dispose",this.dispose,this);this.off("update",this.update,this)};b.prototype.clone=function(){return new b(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)};b.prototype._updateUvs=function(){this._uvs||(this._uvs=new f);this._uvs.set(this.crop,this.baseTexture,this.rotate)};
b.fromImage=function(a,c,d){var f=m.TextureCache[a];f||(f=new b(g.fromImage(a,c,d)),m.TextureCache[a]=f);return f};b.fromFrame=function(a){var b=m.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return b};b.fromCanvas=function(a,c){return new b(g.fromCanvas(a,c))};b.fromVideo=function(c,d){return"string"===typeof c?b.fromVideoUrl(c,d):new b(a.fromVideo(c,d))};b.fromVideoUrl=function(c,d){return new b(a.fromUrl(c,d))};b.addTextureToCache=function(a,b){m.TextureCache[b]=
a};b.removeTextureFromCache=function(a){var b=m.TextureCache[a];delete m.TextureCache[a];delete m.BaseTextureCache[a];return b};b.EMPTY=new b(new g)},{"../math":26,"../utils":70,"./BaseTexture":63,"./TextureUvs":66,"./VideoBaseTexture":67,eventemitter3:10}],66:[function(e,h,l){function b(){this.y0=this.x0=0;this.x1=1;this.y1=0;this.y2=this.x2=1;this.x3=0;this.y3=1}h.exports=b;b.prototype.set=function(b,a,f){var c=a.width;a=a.height;f?(this.x0=(b.x+b.height)/c,this.y0=b.y/a,this.x1=(b.x+b.height)/
c,this.y1=(b.y+b.width)/a,this.x2=b.x/c,this.y2=(b.y+b.width)/a,this.x3=b.x/c,this.y3=b.y/a):(this.x0=b.x/c,this.y0=b.y/a,this.x1=(b.x+b.width)/c,this.y1=b.y/a,this.x2=(b.x+b.width)/c,this.y2=(b.y+b.height)/a,this.x3=b.x/c,this.y3=(b.y+b.height)/a)}},{}],67:[function(e,h,l){function b(b,d){if(!b)throw Error("No video source element specified.");(b.readyState===b.HAVE_ENOUGH_DATA||b.readyState===b.HAVE_FUTURE_DATA)&&b.width&&b.height&&(b.complete=!0);a.call(this,b,d);this.autoUpdate=!1;this._onUpdate=
this._onUpdate.bind(this);this._onCanPlay=this._onCanPlay.bind(this);b.complete||(b.addEventListener("canplay",this._onCanPlay),b.addEventListener("canplaythrough",this._onCanPlay),b.addEventListener("play",this._onPlayStart.bind(this)),b.addEventListener("pause",this._onPlayStop.bind(this)));this.__loaded=!1}function g(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var f=document.createElement("source");f.src=a;f.type=b;return f}var a=e("./BaseTexture"),f=e("../utils");b.prototype=Object.create(a.prototype);
b.prototype.constructor=b;h.exports=b;b.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())};b.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)};b.prototype._onPlayStop=function(){this.autoUpdate=!1};b.prototype._onCanPlay=function(){this.hasLoaded=!0;this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),
this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))};b.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete f.BaseTextureCache[this.source._pixiId],delete this.source._pixiId);a.prototype.destroy.call(this)};b.fromVideo=function(a,d){a._pixiId||(a._pixiId="video_"+f.uid());var e=f.BaseTextureCache[a._pixiId];e||(e=new b(a,d),f.BaseTextureCache[a._pixiId]=e);return e};b.fromUrl=function(a,
d){var f=document.createElement("video");if(Array.isArray(a))for(var e=0;e<a.length;++e)f.appendChild(g(a[e].src||a[e],a[e].mime));else f.appendChild(g(a.src||a,a.mime));f.load();f.play();return b.fromVideo(f,d)};b.fromUrls=b.fromUrl},{"../utils":70,"./BaseTexture":63}],68:[function(e,h,l){function b(){var b=this;this._tick=function(a){b._requestId=null;b.started&&(b.update(a),b.started&&null===b._requestId&&b._emitter.listeners("tick",!0)&&(b._requestId=requestAnimationFrame(b._tick)))};this._emitter=
new a;this._requestId=null;this._maxElapsedMS=100;this.autoStart=!1;this.deltaTime=1;this.elapsedMS=1/g.TARGET_FPMS;this.lastTime=0;this.speed=1;this.started=!1}var g=e("../const"),a=e("eventemitter3");Object.defineProperties(b.prototype,{FPS:{get:function(){return 1E3/this.elapsedMS}},minFPS:{get:function(){return 1E3/this._maxElapsedMS},set:function(a){this._maxElapsedMS=1/Math.min(Math.max(0,a)/1E3,g.TARGET_FPMS)}}});b.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners("tick",
!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))};b.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)};b.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()};b.prototype.add=function(a,b){this._emitter.on("tick",a,b);this._startIfPossible();return this};b.prototype.addOnce=function(a,b){this._emitter.once("tick",a,b);this._startIfPossible();
return this};b.prototype.remove=function(a,b){this._emitter.off("tick",a,b);this._emitter.listeners("tick",!0)||this._cancelIfNeeded();return this};b.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())};b.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())};b.prototype.update=function(a){var b;a=a||performance.now();b=this.elapsedMS=a-this.lastTime;b>this._maxElapsedMS&&(b=this._maxElapsedMS);this.deltaTime=b*g.TARGET_FPMS*this.speed;this._emitter.emit("tick",
this.deltaTime);this.lastTime=a};h.exports=b},{"../const":16,eventemitter3:10}],69:[function(e,h,l){e=e("./Ticker");l=new e;l.autoStart=!0;h.exports={shared:l,Ticker:e}},{"./Ticker":68}],70:[function(e,h,l){var b=e("../const"),g=h.exports={_uid:0,_saidHello:!1,EventEmitter:e("eventemitter3"),pluginTarget:e("./pluginTarget"),async:e("async"),uid:function(){return++g._uid},hex2rgb:function(a,b){b=b||[];b[0]=(a>>16&255)/255;b[1]=(a>>8&255)/255;b[2]=(a&255)/255;return b},hex2string:function(a){a=a.toString(16);
a="000000".substr(0,6-a.length)+a;return"#"+a},rgb2hex:function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},canUseNewCanvasBlendModes:function(){if("undefined"===typeof document)return!1;var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/AP804Oa6AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";var b=new Image;b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX//wCKxvRFAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";
var c=document.createElement("canvas");c.width=6;c.height=1;c=c.getContext("2d");c.globalCompositeOperation="multiply";c.drawImage(a,0,0);c.drawImage(b,2,0);a=c.getImageData(2,0,1,1).data;return 255===a[0]&&0===a[1]&&0===a[2]},getNextPowerOfTwo:function(a){if(0<a&&0===(a&a-1))return a;for(var b=1;b<a;)b<<=1;return b},isPowerOfTwo:function(a,b){return 0<a&&0===(a&a-1)&&0<b&&0===(b&b-1)},getResolutionOfUrl:function(a){return(a=b.RETINA_PREFIX.exec(a))?parseFloat(a[1]):1},sayHello:function(a){g._saidHello||
(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?window.console.log.apply(console,["\n %c %c %c Pixi.js "+b.VERSION+" - \u2730 "+a+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;",
"color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("Pixi.js "+b.VERSION+" - "+a+" - http://www.pixijs.com/"),g._saidHello=!0)},isWebGLSupported:function(){var a={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a);return!(!c||!c.getContextAttributes().stencil)}catch(d){return!1}},sign:function(a){return a?
0>a?-1:1:0},removeItems:function(a,b,c){var d=a.length;if(!(b>=d||0===c)){c=b+c>d?d-b:c;for(d-=c;b<d;++b)a[b]=a[b+c];a.length=d}},TextureCache:{},BaseTextureCache:{}}},{"../const":16,"./pluginTarget":71,async:1,eventemitter3:10}],71:[function(e,h,l){function b(b){b.__plugins={};b.registerPlugin=function(a,f){b.__plugins[a]=f};b.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var a in b.__plugins)this.plugins[a]=new b.__plugins[a](this)};b.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),
this.plugins[a]=null;this.plugins=null}}h.exports={mixin:function(e){b(e)}}},{}],72:[function(e,h,l){var b=e("./core"),g=e("./mesh"),a=e("./extras");e=e("./filters");b.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.");};b.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.");};Object.defineProperties(b,{Stage:{get:function(){console.warn("You do not need to use a PIXI Stage any more, you can simply render any container.");
return b.Container}},DisplayObjectContainer:{get:function(){console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return b.Container}},Strip:{get:function(){console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");return g.Mesh}},Rope:{get:function(){console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");return g.Rope}},MovieClip:{get:function(){console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on.");
return a.MovieClip}},TilingSprite:{get:function(){console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");return a.TilingSprite}},BitmapText:{get:function(){console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return a.BitmapText}},blendModes:{get:function(){console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return b.BLEND_MODES}},
scaleModes:{get:function(){console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return b.SCALE_MODES}},BaseTextureCache:{get:function(){console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.");return b.utils.BaseTextureCache}},TextureCache:{get:function(){console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return b.utils.TextureCache}},
math:{get:function(){console.warn("The math namespace is deprecated, please access members already accessible on PIXI.");return b}}});b.Sprite.prototype.setTexture=function(a){this.texture=a;console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};a.BitmapText.prototype.setText=function(a){this.text=a;console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")};b.Text.prototype.setText=function(a){this.text=
a;console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};b.Text.prototype.setStyle=function(a){this.style=a;console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};b.Texture.prototype.setFrame=function(a){this.frame=a;console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")};Object.defineProperties(e,{AbstractFilter:{get:function(){console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on.");
return b.AbstractFilter}},FXAAFilter:{get:function(){console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on.");return b.FXAAFilter}},SpriteMaskFilter:{get:function(){console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");return b.SpriteMaskFilter}}});b.utils.uuid=function(){console.warn("utils.uuid() is deprecated, please use utils.uid() from now on.");return b.utils.uid()}},{"./core":23,"./extras":79,"./filters":96,
"./mesh":121}],73:[function(e,h,l){function b(a,b){g.Container.call(this);b=b||{};this.textHeight=this.textWidth=0;this._glyphs=[];this._font={tint:void 0!==b.tint?b.tint:16777215,align:b.align||"left",name:null,size:0};this.font=b.font;this._text=a;this.maxLineHeight=this.maxWidth=0;this.dirty=!1;this.updateText()}var g=e("../core");b.prototype=Object.create(g.Container.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{tint:{get:function(){return this._font.tint},
set:function(a){this._font.tint="number"===typeof a&&0<=a?a:16777215;this.dirty=!0}},align:{get:function(){return this._font.align},set:function(a){this._font.align=a||"left";this.dirty=!0}},font:{get:function(){return this._font},set:function(a){a&&("string"===typeof a?(a=a.split(" "),this._font.name=1===a.length?a[0]:a.slice(1).join(" "),this._font.size=2<=a.length?parseInt(a[0],10):b.fonts[this._font.name].size):(this._font.name=a.name,this._font.size="number"===typeof a.size?a.size:parseInt(a.size,
10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(a){a=a.toString()||" ";this._text!==a&&(this._text=a,this.dirty=!0)}}});b.prototype.updateText=function(){for(var a=b.fonts[this._font.name],f=new g.Point,c=null,d=[],e=0,k=0,h=[],n=0,l=this._font.size/a.size,q=-1,p=0,r=0;r<this.text.length;r++){var E=this.text.charCodeAt(r),q=/(\s)/.test(this.text.charAt(r))?r:q;if(/(?:\r\n|\r|\n)/.test(this.text.charAt(r)))h.push(e),k=Math.max(k,e),n++,f.x=0,f.y+=a.lineHeight,c=null;else if(-1!==
q&&0<this.maxWidth&&f.x*l>this.maxWidth)g.utils.removeItems(d,q,r-q),r=q,q=-1,h.push(e),k=Math.max(k,e),n++,f.x=0,f.y+=a.lineHeight,c=null;else{var y=a.chars[E];y&&(c&&y.kerning[c]&&(f.x+=y.kerning[c]),d.push({texture:y.texture,line:n,charCode:E,position:new g.Point(f.x+y.xOffset,f.y+y.yOffset)}),e=f.x+(y.texture.width+y.xOffset),f.x+=y.xAdvance,p=Math.max(p,y.yOffset+y.texture.height),c=E)}}h.push(e);k=Math.max(k,e);c=[];for(r=0;r<=n;r++)e=0,"right"===this._font.align?e=k-h[r]:"center"===this._font.align&&
(e=(k-h[r])/2),c.push(e);h=d.length;n=this.tint;for(r=0;r<h;r++)(e=this._glyphs[r])?e.texture=d[r].texture:(e=new g.Sprite(d[r].texture),this._glyphs.push(e)),e.position.x=(d[r].position.x+c[d[r].line])*l,e.position.y=d[r].position.y*l,e.scale.x=e.scale.y=l,e.tint=n,e.parent||this.addChild(e);for(r=h;r<this._glyphs.length;++r)this.removeChild(this._glyphs[r]);this.textWidth=k*l;this.textHeight=(f.y+a.lineHeight)*l;this.maxLineHeight=p*l};b.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};
b.prototype.getLocalBounds=function(){this.validate();return g.Container.prototype.getLocalBounds.call(this)};b.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)};b.fonts={}},{"../core":23}],74:[function(e,h,l){function b(a){g.Sprite.call(this,a[0]instanceof g.Texture?a[0]:a[0].texture);this._durations=this._textures=null;this.textures=a;this.animationSpeed=1;this.loop=!0;this.onComplete=null;this._currentTime=0;this.playing=!1}var g=e("../core");b.prototype=Object.create(g.Sprite.prototype);
b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(a){if(a[0]instanceof g.Texture)this._textures=a,this._durations=null;else{this._textures=[];this._durations=[];for(var b=0;b<a.length;b++)this._textures.push(a[b].texture),this._durations.push(a[b].time)}}},currentFrame:{get:function(){var a=Math.floor(this._currentTime)%this._textures.length;0>a&&(a+=this._textures.length);
return a}}});b.prototype.stop=function(){this.playing&&(this.playing=!1,g.ticker.shared.remove(this.update,this))};b.prototype.play=function(){this.playing||(this.playing=!0,g.ticker.shared.add(this.update,this))};b.prototype.gotoAndStop=function(a){this.stop();this._currentTime=a;this._texture=this._textures[this.currentFrame]};b.prototype.gotoAndPlay=function(a){this._currentTime=a;this.play()};b.prototype.update=function(a){var b=this.animationSpeed*a;if(null!==this._durations){for(var c=this._currentTime%
1*this._durations[this.currentFrame],c=c+b/60*1E3;0>c;)this._currentTime--,c+=this._durations[this.currentFrame];a=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);c>=this._durations[this.currentFrame];)c-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=c/this._durations[this.currentFrame]}else this._currentTime+=b;if(0>this._currentTime&&!this.loop){if(this.gotoAndStop(0),this.onComplete)this.onComplete()}else if(this._currentTime>=
this._textures.length&&!this.loop){if(this.gotoAndStop(this._textures.length-1),this.onComplete)this.onComplete()}else this._texture=this._textures[this.currentFrame]};b.prototype.destroy=function(){this.stop();g.Sprite.prototype.destroy.call(this)};b.fromFrames=function(a){for(var f=[],c=0;c<a.length;++c)f.push(new g.Texture.fromFrame(a[c]));return new b(f)};b.fromImages=function(a){for(var f=[],c=0;c<a.length;++c)f.push(new g.Texture.fromImage(a[c]));return new b(f)}},{"../core":23}],75:[function(e,
h,l){function b(a,b,f){g.Sprite.call(this,a);this.tileScale=new g.Point(1,1);this.tilePosition=new g.Point(0,0);this._width=b||100;this._height=f||100;this._uvs=new g.TextureUvs;this._canvasPattern=null;this.shader=new g.AbstractFilter("precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nuniform mat3 projectionMatrix;\nuniform vec4 uFrame;\nuniform vec4 uTransform;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vec2 coord = aTextureCoord;\n   coord -= uTransform.xy;\n   coord /= uTransform.zw;\n   vTextureCoord = coord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}",
"precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nuniform vec4 uFrame;\nuniform vec2 uPixelSize;\nvoid main(void){\n   vec2 coord = mod(vTextureCoord, uFrame.zw);\n   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);\n   coord += uFrame.xy;\n   gl_FragColor =  texture2D(uSampler, coord) * vColor ;\n}",{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var g=e("../core"),a=
new g.Point,f=e("../core/renderers/canvas/utils/CanvasTinter");b.prototype=Object.create(g.Sprite.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{width:{get:function(){return this._width},set:function(a){this._width=a}},height:{get:function(){return this._height},set:function(a){this._height=a}}});b.prototype._onTextureUpdate=function(){};b.prototype._renderWebGL=function(a){var b=this._texture;if(b&&b._uvs){var f=b._uvs,e=b._frame.width,g=b._frame.height,h=b.baseTexture.width,
l=b.baseTexture.height;b._uvs=this._uvs;b._frame.width=this.width;b._frame.height=this.height;this.shader.uniforms.uPixelSize.value[0]=1/h;this.shader.uniforms.uPixelSize.value[1]=1/l;this.shader.uniforms.uFrame.value[0]=f.x0;this.shader.uniforms.uFrame.value[1]=f.y0;this.shader.uniforms.uFrame.value[2]=f.x1-f.x0;this.shader.uniforms.uFrame.value[3]=f.y2-f.y0;this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(e*this.tileScale.x)/this._width;this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%
(g*this.tileScale.y)/this._height;this.shader.uniforms.uTransform.value[2]=h/this._width*this.tileScale.x;this.shader.uniforms.uTransform.value[3]=l/this._height*this.tileScale.y;a.setObjectRenderer(a.plugins.sprite);a.plugins.sprite.render(this);b._uvs=f;b._frame.width=e;b._frame.height=g}};b.prototype._renderCanvas=function(a){var b=this._texture;if(b.baseTexture.hasLoaded){var e=a.context,k=this.worldTransform,h=a.resolution,n=b.baseTexture,l=this.tilePosition.x/this.tileScale.x%b._frame.width,
q=this.tilePosition.y/this.tileScale.y%b._frame.height;if(!this._canvasPattern){var p=new g.CanvasBuffer(b._frame.width,b._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=f.getTintedTexture(this,this.tint)),p.context.drawImage(this.tintedTexture,0,0)):p.context.drawImage(n.source,-b._frame.x,-b._frame.y);this._canvasPattern=p.context.createPattern(p.canvas,"repeat")}e.globalAlpha=this.worldAlpha;e.setTransform(k.a*h,k.b*h,k.c*h,k.d*h,
k.tx*h,k.ty*h);e.scale(this.tileScale.x,this.tileScale.y);e.translate(l+this.anchor.x*-this._width,q+this.anchor.y*-this._height);b=a.blendModes[this.blendMode];b!==a.context.globalCompositeOperation&&(e.globalCompositeOperation=b);e.fillStyle=this._canvasPattern;e.fillRect(-l,-q,this._width/this.tileScale.x,this._height/this.tileScale.y)}};b.prototype.getBounds=function(){var a=this._width,b=this._height,f=a*(1-this.anchor.x),e=a*-this.anchor.x,g=b*(1-this.anchor.y),h=b*-this.anchor.y,b=this.worldTransform,
l=b.a,q=b.b,p=b.c,r=b.d,E=b.tx,y=b.ty,A=l*e+p*h+E,b=r*h+q*e+y,a=l*f+p*h+E,h=r*h+q*f+y,v=l*f+p*g+E,f=r*g+q*f+y,l=l*e+p*g+E,e=r*g+q*e+y,g=A,g=a<g?a:g,g=v<g?v:g,g=l<g?l:g,q=b,q=h<q?h:q,q=f<q?f:q,q=e<q?e:q,A=a>A?a:A,A=v>A?v:A,b=h>b?h:b,b=f>b?f:b,a=this._bounds;a.x=g;a.width=(l>A?l:A)-g;a.y=q;a.height=(e>b?e:b)-q;return this._currentBounds=a};b.prototype.containsPoint=function(b){this.worldTransform.applyInverse(b,a);var d=this._width;b=this._height;var f=-d*this.anchor.x;return a.x>f&&a.x<f+d&&(d=-b*
this.anchor.y,a.y>d&&a.y<d+b)?!0:!1};b.prototype.destroy=function(){g.Sprite.prototype.destroy.call(this);this._uvs=this.tilePosition=this._tileScaleOffset=this.tileScale=null};b.fromFrame=function(a,d,f){var e=g.utils.TextureCache[a];if(!e)throw Error('The frameId "'+a+'" does not exist in the texture cache '+this);return new b(e,d,f)};b.fromImage=function(a,d,f,e,h){return new b(g.Texture.fromImage(a,e,h),d,f)}},{"../core":23,"../core/renderers/canvas/utils/CanvasTinter":41}],76:[function(e,h,l){var b=
e("../core");e=b.DisplayObject;var g=new b.Matrix;e.prototype._cacheAsBitmap=!1;e.prototype._originalRenderWebGL=null;e.prototype._originalRenderCanvas=null;e.prototype._originalUpdateTransform=null;e.prototype._originalHitTest=null;e.prototype._originalDestroy=null;e.prototype._cachedSprite=null;Object.defineProperties(e.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap!==a&&((this._cacheAsBitmap=a)?(this._originalRenderWebGL=this.renderWebGL,
this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=
this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}});e.prototype._renderCachedWebGL=function(a){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObject(a),this._cachedSprite.worldAlpha=this.worldAlpha,a.setObjectRenderer(a.plugins.sprite),a.plugins.sprite.render(this._cachedSprite))};e.prototype._initCachedDisplayObject=function(a){if(!this._cachedSprite){a.currentRenderer.flush();
var f=this.getLocalBounds().clone();if(this._filters){var c=this._filters[0].padding;f.x-=c;f.y-=c;f.width+=2*c;f.height+=2*c}var c=a.currentRenderTarget,d=a.filterManager.filterStack,e=new b.RenderTexture(a,f.width|0,f.height|0);g.tx=-f.x;g.ty=-f.y;this.renderWebGL=this._originalRenderWebGL;e.render(this,g,!0,!0);a.setRenderTarget(c);a.filterManager.filterStack=d;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=
new b.Sprite(e);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(f.x/f.width);this._cachedSprite.anchor.y=-(f.y/f.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}};e.prototype._renderCachedCanvas=function(a){!this.visible||0>=this.worldAlpha||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(a))};e.prototype._initCachedDisplayObjectCanvas=
function(a){if(!this._cachedSprite){var f=this.getLocalBounds(),c=a.context,d=new b.RenderTexture(a,f.width|0,f.height|0);g.tx=-f.x;g.ty=-f.y;this.renderCanvas=this._originalRenderCanvas;d.render(this,g,!0);a.context=c;this.renderCanvas=this._renderCachedCanvas;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new b.Sprite(d);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(f.x/f.width);this._cachedSprite.anchor.y=
-(f.y/f.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}};e.prototype._getCachedBounds=function(){this._cachedSprite._currentBounds=null;return this._cachedSprite.getBounds()};e.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy();this._cachedSprite=null};e.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1;this._originalDestroy()}},{"../core":23}],77:[function(e,h,l){e=e("../core");e.DisplayObject.prototype.name=
null;e.Container.prototype.getChildByName=function(b){for(var e=0;e<this.children.length;e++)if(this.children[e].name===b)return this.children[e];return null}},{"../core":23}],78:[function(e,h,l){var b=e("../core");b.DisplayObject.prototype.getGlobalPosition=function(e){e=e||new b.Point;this.parent?(this.displayObjectUpdateTransform(),e.x=this.worldTransform.tx,e.y=this.worldTransform.ty):(e.x=this.position.x,e.y=this.position.y);return e}},{"../core":23}],79:[function(e,h,l){e("./cacheAsBitmap");
e("./getChildByName");e("./getGlobalPosition");h.exports={MovieClip:e("./MovieClip"),TilingSprite:e("./TilingSprite"),BitmapText:e("./BitmapText")}},{"./BitmapText":73,"./MovieClip":74,"./TilingSprite":75,"./cacheAsBitmap":76,"./getChildByName":77,"./getGlobalPosition":78}],80:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",
{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.uniforms.pixelSize.value=a}}})},{"../../core":23}],81:[function(e,h,l){function b(){g.AbstractFilter.call(this);this.blurXFilter=new a;this.blurYFilter=new f;this.defaultFilter=new g.AbstractFilter}
var g=e("../../core"),a=e("../blur/BlurXFilter"),f=e("../blur/BlurYFilter");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,f){var e=a.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(a,b,f);this.blurXFilter.applyFilter(a,b,e);a.blendModeManager.setBlendMode(g.BLEND_MODES.SCREEN);this.blurYFilter.applyFilter(a,e,f);a.blendModeManager.setBlendMode(g.BLEND_MODES.NORMAL);a.filterManager.returnRenderTarget(e)};
Object.defineProperties(b.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a}},blurX:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}},blurY:{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a}}})},{"../../core":23,"../blur/BlurXFilter":84,"../blur/BlurYFilter":85}],82:[function(e,h,l){function b(a,b){g.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",
{strength:{type:"1f",value:1},dirX:{type:"1f",value:a||0},dirY:{type:"1f",value:b||0}});this.defaultFilter=new g.AbstractFilter;this.passes=1;this.dirX=a||0;this.dirY=b||0;this.strength=4}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,c,d){var e=this.getShader(a);this.uniforms.strength.value=this.strength/4/this.passes*(b.frame.width/b.size.width);if(1===this.passes)a.filterManager.applyFilter(e,
b,c,d);else{var g=a.filterManager.getRenderTarget(!0);a.filterManager.applyFilter(e,b,g,d);for(b=0;b<this.passes-2;b++)a.filterManager.applyFilter(e,g,g,d);a.filterManager.applyFilter(e,g,c,d);a.filterManager.returnRenderTarget(g)}};Object.defineProperties(b.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*a;this.strength=a}},dirX:{get:function(){return this.dirX},set:function(a){this.uniforms.dirX.value=a}},dirY:{get:function(){return this.dirY},set:function(a){this.uniforms.dirY.value=
a}}})},{"../../core":23}],83:[function(e,h,l){function b(){g.AbstractFilter.call(this);this.blurXFilter=new a;this.blurYFilter=new f}var g=e("../../core"),a=e("./BlurXFilter"),f=e("./BlurYFilter");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,f){var e=a.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(a,b,e);this.blurYFilter.applyFilter(a,e,f);a.filterManager.returnRenderTarget(e)};Object.defineProperties(b.prototype,
{blur:{get:function(){return this.blurXFilter.blur},set:function(a){this.padding=.5*Math.abs(a);this.blurXFilter.blur=this.blurYFilter.blur=a}},passes:{get:function(){return this.blurXFilter.passes},set:function(a){this.blurXFilter.passes=this.blurYFilter.passes=a}},blurX:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}},blurY:{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a}}})},{"../../core":23,"./BlurXFilter":84,"./BlurYFilter":85}],
84:[function(e,h,l){function b(){g.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",
{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,c,d){var e=this.getShader(a);this.uniforms.strength.value=this.strength/4/this.passes*(b.frame.width/b.size.width);if(1===this.passes)a.filterManager.applyFilter(e,b,c,d);else{for(var g=a.filterManager.getRenderTarget(!0),h=g,n=0;n<this.passes-1;n++){a.filterManager.applyFilter(e,b,h,!0);
var l=h,h=b;b=l}a.filterManager.applyFilter(e,b,c,d);a.filterManager.returnRenderTarget(g)}};Object.defineProperties(b.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*Math.abs(a);this.strength=a}}})},{"../../core":23}],85:[function(e,h,l){function b(){g.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",
{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,c,d){var e=this.getShader(a);this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(b.frame.height/b.size.height);if(1===this.passes)a.filterManager.applyFilter(e,b,c,d);else{for(var g=a.filterManager.getRenderTarget(!0),h=g,n=0;n<this.passes-1;n++){a.filterManager.applyFilter(e,
b,h,!0);var l=h,h=b;b=l}a.filterManager.applyFilter(e,b,c,d);a.filterManager.returnRenderTarget(g)}};Object.defineProperties(b.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*Math.abs(a);this.strength=a}}})},{"../../core":23}],86:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",
{delta:{type:"v2",value:{x:.1,y:0}}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b},{"../../core":23}],87:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",
{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype._loadMatrix=function(a,b){var c=a;b&&(this._multiply(c,this.uniforms.m.value,a),c=this._colorMatrix(c));this.uniforms.m.value=c};b.prototype._multiply=function(a,b,c){a[0]=b[0]*c[0]+b[1]*c[5]+b[2]*c[10]+b[3]*c[15];a[1]=b[0]*c[1]+b[1]*c[6]+b[2]*c[11]+b[3]*c[16];a[2]=b[0]*c[2]+b[1]*c[7]+b[2]*c[12]+b[3]*c[17];a[3]=
b[0]*c[3]+b[1]*c[8]+b[2]*c[13]+b[3]*c[18];a[4]=b[0]*c[4]+b[1]*c[9]+b[2]*c[14]+b[3]*c[19];a[5]=b[5]*c[0]+b[6]*c[5]+b[7]*c[10]+b[8]*c[15];a[6]=b[5]*c[1]+b[6]*c[6]+b[7]*c[11]+b[8]*c[16];a[7]=b[5]*c[2]+b[6]*c[7]+b[7]*c[12]+b[8]*c[17];a[8]=b[5]*c[3]+b[6]*c[8]+b[7]*c[13]+b[8]*c[18];a[9]=b[5]*c[4]+b[6]*c[9]+b[7]*c[14]+b[8]*c[19];a[10]=b[10]*c[0]+b[11]*c[5]+b[12]*c[10]+b[13]*c[15];a[11]=b[10]*c[1]+b[11]*c[6]+b[12]*c[11]+b[13]*c[16];a[12]=b[10]*c[2]+b[11]*c[7]+b[12]*c[12]+b[13]*c[17];a[13]=b[10]*c[3]+b[11]*
c[8]+b[12]*c[13]+b[13]*c[18];a[14]=b[10]*c[4]+b[11]*c[9]+b[12]*c[14]+b[13]*c[19];a[15]=b[15]*c[0]+b[16]*c[5]+b[17]*c[10]+b[18]*c[15];a[16]=b[15]*c[1]+b[16]*c[6]+b[17]*c[11]+b[18]*c[16];a[17]=b[15]*c[2]+b[16]*c[7]+b[17]*c[12]+b[18]*c[17];a[18]=b[15]*c[3]+b[16]*c[8]+b[17]*c[13]+b[18]*c[18];a[19]=b[15]*c[4]+b[16]*c[9]+b[17]*c[14]+b[18]*c[19];return a};b.prototype._colorMatrix=function(a){a=new Float32Array(a);a[4]/=255;a[9]/=255;a[14]/=255;a[19]/=255;return a};b.prototype.brightness=function(a,b){this._loadMatrix([a,
0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0],b)};b.prototype.greyscale=function(a,b){this._loadMatrix([a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0],b)};b.prototype.grayscale=b.prototype.greyscale;b.prototype.blackAndWhite=function(a){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a)};b.prototype.hue=function(a,b){a=(a||0)/180*Math.PI;var c=Math.cos(a),d=Math.sin(a);this._loadMatrix([.213+.787*c+-.213*d,.715+-.715*c+-.715*d,.072+-.072*c+.928*d,0,0,.213+-.213*c+.143*d,.715+c*(1-.715)+.14*
d,.072+-.072*c+-.283*d,0,0,.213+-.213*c+-.787*d,.715+-.715*c+.715*d,.072+.928*c+.072*d,0,0,0,0,0,1,0],b)};b.prototype.contrast=function(a,b){var c=(a||0)+1,d=-128*(c-1);this._loadMatrix([c,0,0,0,d,0,c,0,0,d,0,0,c,0,d,0,0,0,1,0],b)};b.prototype.saturate=function(a,b){var c=2*(a||0)/3+1,d=-.5*(c-1);this._loadMatrix([c,d,d,0,0,d,c,d,0,0,d,d,c,0,0,0,0,0,1,0],b)};b.prototype.desaturate=function(a){this.saturate(-1)};b.prototype.negative=function(a){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,
1,0],a)};b.prototype.sepia=function(a){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a)};b.prototype.technicolor=function(a){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a)};b.prototype.polaroid=function(a){this._loadMatrix([1.438,
-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a)};b.prototype.toBGR=function(a){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],a)};b.prototype.kodachrome=function(a){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a)};b.prototype.browni=function(a){this._loadMatrix([.5997023498159715,
.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a)};b.prototype.vintage=function(a){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,
0,0,0,1,0],a)};b.prototype.colorTone=function(a,b,c,d,e){c=c||16770432;d=d||3375104;var g=(c>>16&255)/255,h=(c>>8&255)/255;c=(c&255)/255;var n=(d>>16&255)/255,l=(d>>8&255)/255;d=(d&255)/255;this._loadMatrix([.3,.59,.11,0,0,g,h,c,a||.2,0,n,l,d,b||.15,0,g-n,h-l,c-d,0,0],e)};b.prototype.night=function(a,b){a=a||.1;this._loadMatrix([-2*a,-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0],b)};b.prototype.predator=function(a,b){this._loadMatrix([11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*
a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0],b)};b.prototype.lsd=function(a){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a)};b.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)};Object.defineProperties(b.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(a){this.uniforms.m.value=
a}}})},{"../../core":23}],88:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,
{step:{get:function(){return this.uniforms.step.value},set:function(a){this.uniforms.step.value=a}}})},{"../../core":23}],89:[function(e,h,l){function b(a,b,c){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",
{matrix:{type:"1fv",value:new Float32Array(a)},texelSize:{type:"v2",value:{x:1/b,y:1/c}}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(a){this.uniforms.matrix.value=new Float32Array(a)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(a){this.uniforms.texelSize.value.x=1/a}},height:{get:function(){return 1/
this.uniforms.texelSize.value.y},set:function(a){this.uniforms.texelSize.value.y=1/a}}})},{"../../core":23}],90:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}
var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b},{"../../core":23}],91:[function(e,h,l){function b(a,b){var c=new g.Matrix;a.renderable=!1;g.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:a.texture},otherMatrix:{type:"mat3",value:c.toArray(!0)},scale:{type:"v2",
value:{x:1,y:1}}});this.maskSprite=a;this.maskMatrix=c;if(null===b||void 0===b)b=20;this.scale=new g.Point(b,b)}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,c){var d=a.filterManager;d.calculateMappedMatrix(b.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0);this.uniforms.scale.value.x=1/b.frame.width*this.scale.x;this.uniforms.scale.value.y=1/b.frame.height*
this.scale.y;a=this.getShader(a);d.applyFilter(a,b,c)};Object.defineProperties(b.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(a){this.uniforms.mapSampler.value=a}}})},{"../../core":23}],92:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",
{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(a){this.uniforms.scale.value=a}},angle:{get:function(){return this.uniforms.angle.value},set:function(a){this.uniforms.angle.value=a}}})},{"../../core":23}],93:[function(e,h,l){function b(){g.AbstractFilter.call(this,
"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",
"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",
{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}});this.passes=1;this.strength=4}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,c,d){var e=this.getShader(a);this.uniforms.strength.value=this.strength/4/this.passes*(b.frame.height/b.size.height);if(1===this.passes)a.filterManager.applyFilter(e,b,c,
d);else{for(var g=a.filterManager.getRenderTarget(!0),h=g,n=0;n<this.passes-1;n++){a.filterManager.applyFilter(e,b,h,d);var l=h,h=b;b=l}a.filterManager.applyFilter(e,b,c,d);a.filterManager.returnRenderTarget(g)}};Object.defineProperties(b.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*a;this.strength=a}}})},{"../../core":23}],94:[function(e,h,l){function b(){g.AbstractFilter.call(this);this.blurXFilter=new a;this.blurYTintFilter=new f;this.defaultFilter=new g.AbstractFilter;
this.padding=30;this._dirtyPosition=!0;this._angle=45*Math.PI/180;this._distance=10;this.alpha=.75;this.hideObject=!1;this.blendMode=g.BLEND_MODES.MULTIPLY}var g=e("../../core"),a=e("../blur/BlurXFilter"),f=e("./BlurYTintFilter");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,f){var e=a.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*
this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance);this.blurXFilter.applyFilter(a,b,e);a.blendModeManager.setBlendMode(this.blendMode);this.blurYTintFilter.applyFilter(a,e,f);a.blendModeManager.setBlendMode(g.BLEND_MODES.NORMAL);this.hideObject||this.defaultFilter.applyFilter(a,b,f);a.filterManager.returnRenderTarget(e)};Object.defineProperties(b.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYTintFilter.blur=
a}},blurX:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(a){this.blurYTintFilter.blur=a}},color:{get:function(){return g.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(a){this.blurYTintFilter.uniforms.color.value=g.utils.hex2rgb(a)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(a){this.blurYTintFilter.uniforms.alpha.value=a}},
distance:{get:function(){return this._distance},set:function(a){this._dirtyPosition=!0;this._distance=a}},angle:{get:function(){return this._angle},set:function(a){this._dirtyPosition=!0;this._angle=a}}})},{"../../core":23,"../blur/BlurXFilter":84,"./BlurYTintFilter":93}],95:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",
{gray:{type:"1f",value:1}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}})},{"../../core":23}],96:[function(e,h,l){h.exports={AsciiFilter:e("./ascii/AsciiFilter"),BloomFilter:e("./bloom/BloomFilter"),BlurFilter:e("./blur/BlurFilter"),BlurXFilter:e("./blur/BlurXFilter"),BlurYFilter:e("./blur/BlurYFilter"),
BlurDirFilter:e("./blur/BlurDirFilter"),ColorMatrixFilter:e("./color/ColorMatrixFilter"),ColorStepFilter:e("./color/ColorStepFilter"),ConvolutionFilter:e("./convolution/ConvolutionFilter"),CrossHatchFilter:e("./crosshatch/CrossHatchFilter"),DisplacementFilter:e("./displacement/DisplacementFilter"),DotScreenFilter:e("./dot/DotScreenFilter"),GrayFilter:e("./gray/GrayFilter"),DropShadowFilter:e("./dropshadow/DropShadowFilter"),InvertFilter:e("./invert/InvertFilter"),NoiseFilter:e("./noise/NoiseFilter"),
PixelateFilter:e("./pixelate/PixelateFilter"),RGBSplitFilter:e("./rgb/RGBSplitFilter"),ShockwaveFilter:e("./shockwave/ShockwaveFilter"),SepiaFilter:e("./sepia/SepiaFilter"),SmartBlurFilter:e("./blur/SmartBlurFilter"),TiltShiftFilter:e("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:e("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:e("./tiltshift/TiltShiftYFilter"),TwistFilter:e("./twist/TwistFilter")}},{"./ascii/AsciiFilter":80,"./bloom/BloomFilter":81,"./blur/BlurDirFilter":82,"./blur/BlurFilter":83,
"./blur/BlurXFilter":84,"./blur/BlurYFilter":85,"./blur/SmartBlurFilter":86,"./color/ColorMatrixFilter":87,"./color/ColorStepFilter":88,"./convolution/ConvolutionFilter":89,"./crosshatch/CrossHatchFilter":90,"./displacement/DisplacementFilter":91,"./dot/DotScreenFilter":92,"./dropshadow/DropShadowFilter":94,"./gray/GrayFilter":95,"./invert/InvertFilter":97,"./noise/NoiseFilter":98,"./pixelate/PixelateFilter":99,"./rgb/RGBSplitFilter":100,"./sepia/SepiaFilter":101,"./shockwave/ShockwaveFilter":102,
"./tiltshift/TiltShiftFilter":104,"./tiltshift/TiltShiftXFilter":105,"./tiltshift/TiltShiftYFilter":106,"./twist/TwistFilter":107}],97:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",
{invert:{type:"1f",value:1}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(a){this.uniforms.invert.value=a}}})},{"../../core":23}],98:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",
{noise:{type:"1f",value:.5}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(a){this.uniforms.noise.value=a}}})},{"../../core":23}],99:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",
{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.uniforms.pixelSize.value=a}}})},{"../../core":23}],100:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",
{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(a){this.uniforms.red.value=a}},green:{get:function(){return this.uniforms.green.value},set:function(a){this.uniforms.green.value=a}},blue:{get:function(){return this.uniforms.blue.value},
set:function(a){this.uniforms.blue.value=a}}})},{"../../core":23}],101:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",
{sepia:{type:"1f",value:1}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(a){this.uniforms.sepia.value=a}}})},{"../../core":23}],102:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",
{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(a){this.uniforms.center.value=a}},params:{get:function(){return this.uniforms.params.value},set:function(a){this.uniforms.params.value=a}},time:{get:function(){return this.uniforms.time.value},
set:function(a){this.uniforms.time.value=a}}})},{"../../core":23}],103:[function(e,h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",
{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}});this.updateDelta()}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.updateDelta=function(){this.uniforms.delta.value.x=0;this.uniforms.delta.value.y=
0};Object.defineProperties(b.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(a){this.uniforms.blur.value=a}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(a){this.uniforms.gradientBlur.value=a}},start:{get:function(){return this.uniforms.start.value},set:function(a){this.uniforms.start.value=a;this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(a){this.uniforms.end.value=a;this.updateDelta()}}})},
{"../../core":23}],104:[function(e,h,l){function b(){g.AbstractFilter.call(this);this.tiltShiftXFilter=new a;this.tiltShiftYFilter=new f}var g=e("../../core"),a=e("./TiltShiftXFilter"),f=e("./TiltShiftYFilter");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.applyFilter=function(a,b,f){var e=a.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(a,b,e);this.tiltShiftYFilter.applyFilter(a,e,f);a.filterManager.returnRenderTarget(e)};
Object.defineProperties(b.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(a){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=a}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(a){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=a}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(a){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=a}},end:{get:function(){return this.tiltShiftXFilter.end},
set:function(a){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=a}}})},{"../../core":23,"./TiltShiftXFilter":105,"./TiltShiftYFilter":106}],105:[function(e,h,l){function b(){g.call(this)}var g=e("./TiltShiftAxisFilter");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.updateDelta=function(){var a=this.uniforms.end.value.x-this.uniforms.start.value.x,b=this.uniforms.end.value.y-this.uniforms.start.value.y,c=Math.sqrt(a*a+b*b);this.uniforms.delta.value.x=
a/c;this.uniforms.delta.value.y=b/c}},{"./TiltShiftAxisFilter":103}],106:[function(e,h,l){function b(){g.call(this)}var g=e("./TiltShiftAxisFilter");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.updateDelta=function(){var a=this.uniforms.end.value.x-this.uniforms.start.value.x,b=this.uniforms.end.value.y-this.uniforms.start.value.y,c=Math.sqrt(a*a+b*b);this.uniforms.delta.value.x=-b/c;this.uniforms.delta.value.y=a/c}},{"./TiltShiftAxisFilter":103}],107:[function(e,
h,l){function b(){g.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",
{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var g=e("../../core");b.prototype=Object.create(g.AbstractFilter.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}},radius:{get:function(){return this.uniforms.radius.value},set:function(a){this.uniforms.radius.value=a}},angle:{get:function(){return this.uniforms.angle.value},
set:function(a){this.uniforms.angle.value=a}}})},{"../../core":23}],108:[function(e,h,l){l="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};e("./polyfill");h=h.exports=e("./core");h.extras=e("./extras");h.filters=e("./filters");h.interaction=e("./interaction");h.loaders=e("./loaders");h.mesh=e("./mesh");h.accessibility=e("./accessibility");h.loader=new h.loaders.Loader;Object.assign(h,e("./deprecation"));l.PIXI=h},{"./accessibility":15,"./core":23,
"./deprecation":72,"./extras":79,"./filters":96,"./interaction":111,"./loaders":114,"./mesh":121,"./polyfill":126}],109:[function(e,h,l){function b(){this.global=new g.Point;this.originalEvent=this.target=null}var g=e("../core");b.prototype.constructor=b;h.exports=b;b.prototype.getLocalPosition=function(a,b,c){return a.worldTransform.applyInverse(c||this.global,b)}},{"../core":23}],110:[function(e,h,l){function b(b,c){c=c||{};this.renderer=b;this.autoPreventDefault=void 0!==c.autoPreventDefault?c.autoPreventDefault:
!0;this.interactionFrequency=c.interactionFrequency||10;this.mouse=new a;this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}};this.interactiveDataPool=[];this.interactionDOMElement=null;this.eventsAdded=!1;this.onMouseUp=this.onMouseUp.bind(this);this.processMouseUp=this.processMouseUp.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.processMouseDown=this.processMouseDown.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.processMouseMove=
this.processMouseMove.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.processMouseOverOut=this.processMouseOverOut.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.processTouchStart=this.processTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.processTouchEnd=this.processTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.processTouchMove=this.processTouchMove.bind(this);this.last=0;this.currentCursorStyle="inherit";this._tempPoint=new g.Point;
this.resolution=1;this.setTargetElement(this.renderer.view,this.renderer.resolution)}var g=e("../core"),a=e("./InteractionData");Object.assign(g.DisplayObject.prototype,e("./interactiveTarget"));b.prototype.constructor=b;h.exports=b;b.prototype.setTargetElement=function(a,b){this.removeEvents();this.interactionDOMElement=a;this.resolution=b||1;this.addEvents()};b.prototype.addEvents=function(){this.interactionDOMElement&&(g.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]=
"none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,
!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)};b.prototype.removeEvents=function(){this.interactionDOMElement&&(g.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",
this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)};b.prototype.update=function(a){this._deltaTime+=a;this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.interactionDOMElement&&
(this.didMove?this.didMove=!1:(this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor))))};b.prototype.dispatchEvent=function(a,b,d){if(!d.stopped&&(d.target=a,d.type=b,a.emit(b,d),a[b]))a[b](d)};b.prototype.mapPositionToPoint=function(a,b,d){var e;try{e=this.interactionDOMElement.getBoundingClientRect()}catch(g){e=
{left:0,top:0}}a.x=this.interactionDOMElement.width/e.width*(b-e.left)/this.resolution;a.y=this.interactionDOMElement.height/e.height*(d-e.top)/this.resolution};b.prototype.processInteractive=function(a,b,d,e,g){if(!b||!b.visible)return!1;var h=!1,n=g=b.interactive||g;b.hitArea&&(n=!1);if(b.interactiveChildren)for(var l=b.children,q=l.length-1;0<=q;q--){var p=l[q];this.processInteractive(a,p,d,e,n)&&p.parent&&(h=!0,e=n=!1)}g&&(e&&!h&&(b.hitArea?(b.worldTransform.applyInverse(a,this._tempPoint),h=
b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):b.containsPoint&&(h=b.containsPoint(a))),b.interactive&&d(b,h));return h};b.prototype.onMouseDown=function(a){this.mouse.originalEvent=a;this.eventData.data=this.mouse;this.eventData.stopped=!1;this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY);this.autoPreventDefault&&this.mouse.originalEvent.preventDefault();this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)};b.prototype.processMouseDown=
function(a,b){var d=this.mouse.originalEvent,d=2===d.button||3===d.which;b&&(a[d?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(a,d?"rightdown":"mousedown",this.eventData))};b.prototype.onMouseUp=function(a){this.mouse.originalEvent=a;this.eventData.data=this.mouse;this.eventData.stopped=!1;this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)};b.prototype.processMouseUp=function(a,b){var d=
this.mouse.originalEvent,e=(d=2===d.button||3===d.which)?"_isRightDown":"_isLeftDown";b?(this.dispatchEvent(a,d?"rightup":"mouseup",this.eventData),a[e]&&(a[e]=!1,this.dispatchEvent(a,d?"rightclick":"click",this.eventData))):a[e]&&(a[e]=!1,this.dispatchEvent(a,d?"rightupoutside":"mouseupoutside",this.eventData))};b.prototype.onMouseMove=function(a){this.mouse.originalEvent=a;this.eventData.data=this.mouse;this.eventData.stopped=!1;this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY);this.didMove=
!0;this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0);this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)};b.prototype.processMouseMove=function(a,b){this.dispatchEvent(a,"mousemove",this.eventData);this.processMouseOverOut(a,b)};b.prototype.onMouseOut=function(a){this.mouse.originalEvent=a;this.eventData.stopped=!1;this.mapPositionToPoint(this.mouse.global,
a.clientX,a.clientY);this.interactionDOMElement.style.cursor="inherit";this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)};b.prototype.processMouseOverOut=function(a,b){b?(a._over||(a._over=!0,this.dispatchEvent(a,"mouseover",this.eventData)),a.buttonMode&&(this.cursor=a.defaultCursor)):a._over&&(a._over=!1,this.dispatchEvent(a,"mouseout",this.eventData))};b.prototype.onTouchStart=
function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,d=b.length,e=0;e<d;e++){var g=this.getTouchData(b[e]);g.originalEvent=a;this.eventData.data=g;this.eventData.stopped=!1;this.processInteractive(g.global,this.renderer._lastObjectRendered,this.processTouchStart,!0);this.returnTouchData(g)}};b.prototype.processTouchStart=function(a,b){b&&(a._touchDown=!0,this.dispatchEvent(a,"touchstart",this.eventData))};b.prototype.onTouchEnd=function(a){this.autoPreventDefault&&a.preventDefault();
for(var b=a.changedTouches,d=b.length,e=0;e<d;e++){var g=this.getTouchData(b[e]);g.originalEvent=a;this.eventData.data=g;this.eventData.stopped=!1;this.processInteractive(g.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0);this.returnTouchData(g)}};b.prototype.processTouchEnd=function(a,b){b?(this.dispatchEvent(a,"touchend",this.eventData),a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"tap",this.eventData))):a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"touchendoutside",
this.eventData))};b.prototype.onTouchMove=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,d=b.length,e=0;e<d;e++){var g=this.getTouchData(b[e]);g.originalEvent=a;this.eventData.data=g;this.eventData.stopped=!1;this.processInteractive(g.global,this.renderer._lastObjectRendered,this.processTouchMove,!0);this.returnTouchData(g)}};b.prototype.processTouchMove=function(a,b){this.dispatchEvent(a,"touchmove",this.eventData)};b.prototype.getTouchData=function(b){var c=this.interactiveDataPool.pop();
c||(c=new a);c.identifier=b.identifier;this.mapPositionToPoint(c.global,b.clientX,b.clientY);navigator.isCocoonJS&&(c.global.x/=this.resolution,c.global.y/=this.resolution);b.globalX=c.global.x;b.globalY=c.global.y;return c};b.prototype.returnTouchData=function(a){this.interactiveDataPool.push(a)};b.prototype.destroy=function(){this.removeEvents();this._tempPoint=this.processTouchMove=this.onTouchMove=this.processTouchEnd=this.onTouchEnd=this.processTouchStart=this.onTouchStart=this.processMouseOverOut=
this.onMouseOut=this.processMouseMove=this.onMouseMove=this.processMouseDown=this.onMouseDown=this.processMouseUp=this.onMouseUp=this.interactionDOMElement=this.interactiveDataPool=this.eventData=this.mouse=this.renderer=null};g.WebGLRenderer.registerPlugin("interaction",b);g.CanvasRenderer.registerPlugin("interaction",b)},{"../core":23,"./InteractionData":109,"./interactiveTarget":112}],111:[function(e,h,l){h.exports={InteractionData:e("./InteractionData"),InteractionManager:e("./InteractionManager"),
interactiveTarget:e("./interactiveTarget")}},{"./InteractionData":109,"./InteractionManager":110,"./interactiveTarget":112}],112:[function(e,h,l){h.exports={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1}},{}],113:[function(e,h,l){function b(b,c){var e={},g=b.data.getElementsByTagName("info")[0],h=b.data.getElementsByTagName("common")[0];e.font=g.getAttribute("face");e.size=parseInt(g.getAttribute("size"),10);e.lineHeight=parseInt(h.getAttribute("lineHeight"),
10);e.chars={};h=b.data.getElementsByTagName("char");for(g=0;g<h.length;g++){var l=parseInt(h[g].getAttribute("id"),10),q=new a.Rectangle(parseInt(h[g].getAttribute("x"),10)+c.frame.x,parseInt(h[g].getAttribute("y"),10)+c.frame.y,parseInt(h[g].getAttribute("width"),10),parseInt(h[g].getAttribute("height"),10));e.chars[l]={xOffset:parseInt(h[g].getAttribute("xoffset"),10),yOffset:parseInt(h[g].getAttribute("yoffset"),10),xAdvance:parseInt(h[g].getAttribute("xadvance"),10),kerning:{},texture:new a.Texture(c.baseTexture,
q)}}h=b.data.getElementsByTagName("kerning");for(g=0;g<h.length;g++){var l=parseInt(h[g].getAttribute("first"),10),q=parseInt(h[g].getAttribute("second"),10),p=parseInt(h[g].getAttribute("amount"),10);e.chars[q].kerning[l]=p}b.bitmapFont=e;f.BitmapText.fonts[e.font]=e}var g=e("resource-loader").Resource,a=e("../core"),f=e("../extras"),c=e("path");h.exports=function(){return function(d,f){if(!d.data||!d.isXml||0===d.data.getElementsByTagName("page").length||0===d.data.getElementsByTagName("info").length||
null===d.data.getElementsByTagName("info")[0].getAttribute("face"))return f();var e=c.dirname(d.url);"."===e&&(e="");this.baseUrl&&e&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(e+="/"),e=e.replace(this.baseUrl,""));e&&"/"!==e.charAt(e.length-1)&&(e+="/");e+=d.data.getElementsByTagName("page")[0].getAttribute("file");a.utils.TextureCache[e]?(b(d,a.utils.TextureCache[e]),f()):this.add(d.name+"_image",e,{crossOrigin:d.crossOrigin,loadType:g.LOAD_TYPE.IMAGE,metadata:d.metadata.imageMetadata},
function(a){b(d,a.texture);f()})}}},{"../core":23,"../extras":79,path:2,"resource-loader":133}],114:[function(e,h,l){h.exports={Loader:e("./loader"),bitmapFontParser:e("./bitmapFontParser"),spritesheetParser:e("./spritesheetParser"),textureParser:e("./textureParser"),Resource:e("resource-loader").Resource}},{"./bitmapFontParser":113,"./loader":115,"./spritesheetParser":116,"./textureParser":117,"resource-loader":133}],115:[function(e,h,l){function b(a,c){g.call(this,a,c);for(var d=0;d<b._pixiMiddleware.length;++d)this.use(b._pixiMiddleware[d]())}
var g=e("resource-loader");l=e("./textureParser");var a=e("./spritesheetParser");e=e("./bitmapFontParser");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b._pixiMiddleware=[g.middleware.parsing.blob,l,a,e];b.addPixiMiddleware=function(a){b._pixiMiddleware.push(a)};h=g.Resource;h.setExtensionXhrType("fnt",h.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":113,"./spritesheetParser":116,"./textureParser":117,"resource-loader":133}],116:[function(e,h,l){var b=e("resource-loader").Resource,
g=e("path"),a=e("../core");h.exports=function(){return function(f,c){if(!f.data||!f.isJson||!f.data.frames)return c();var d={crossOrigin:f.crossOrigin,loadType:b.LOAD_TYPE.IMAGE,metadata:f.metadata.imageMetadata},e=g.dirname(f.url.replace(this.baseUrl,"")),k=a.utils.getResolutionOfUrl(f.url);this.add(f.name+"_image",e+"/"+f.data.meta.image,d,function(b){f.textures={};var d=f.data.frames,e;for(e in d){var g=d[e].frame;if(g){var h=null,g=d[e].rotated?new a.Rectangle(g.x,g.y,g.h,g.w):new a.Rectangle(g.x,
g.y,g.w,g.h);d[e].trimmed&&(h=new a.Rectangle(d[e].spriteSourceSize.x/k,d[e].spriteSourceSize.y/k,d[e].sourceSize.w/k,d[e].sourceSize.h/k));if(d[e].rotated){var m=g.width;g.width=g.height;g.height=m}g.x/=k;g.y/=k;g.width/=k;g.height/=k;f.textures[e]=new a.Texture(b.texture.baseTexture,g,g.clone(),h,d[e].rotated);a.utils.TextureCache[e]=f.textures[e]}}c()})}}},{"../core":23,path:2,"resource-loader":133}],117:[function(e,h,l){var b=e("../core");h.exports=function(){return function(e,a){if(e.data&&e.isImage){var f=
new b.BaseTexture(e.data,null,b.utils.getResolutionOfUrl(e.url));f.imageUrl=e.url;e.texture=new b.Texture(f);b.utils.BaseTextureCache[e.url]=f;b.utils.TextureCache[e.url]=e.texture}a()}}},{"../core":23}],118:[function(e,h,l){function b(a,d,f,e,h){g.Container.call(this);this._texture=null;this.uvs=f||new Float32Array([0,0,1,0,1,1,0,1]);this.vertices=d||new Float32Array([0,0,100,0,100,100,0,100]);this.indices=e||new Uint16Array([0,1,3,2]);this.dirty=!0;this.blendMode=g.BLEND_MODES.NORMAL;this.canvasPadding=
0;this.drawMode=h||b.DRAW_MODES.TRIANGLE_MESH;this.texture=a;this.shader=null}var g=e("../core"),a=new g.Point,f=new g.Polygon;b.prototype=Object.create(g.Container.prototype);b.prototype.constructor=b;h.exports=b;Object.defineProperties(b.prototype,{texture:{get:function(){return this._texture},set:function(a){if(this._texture!==a&&(this._texture=a))if(a.baseTexture.hasLoaded)this._onTextureUpdate();else a.once("update",this._onTextureUpdate,this)}}});b.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins.mesh);
a.plugins.mesh.render(this)};b.prototype._renderCanvas=function(a){var d=a.context,f=this.worldTransform;a.roundPixels?d.setTransform(f.a,f.b,f.c,f.d,f.tx|0,f.ty|0):d.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty);this.drawMode===b.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(d):this._renderCanvasTriangles(d)};b.prototype._renderCanvasTriangleMesh=function(a){for(var b=this.vertices,f=this.uvs,e=b.length/2,g=0;g<e-2;g++){var h=2*g;this._renderCanvasDrawTriangle(a,b,f,h,h+2,h+4)}};b.prototype._renderCanvasTriangles=
function(a){for(var b=this.vertices,f=this.uvs,e=this.indices,g=e.length,h=0;h<g;h+=3)this._renderCanvasDrawTriangle(a,b,f,2*e[h],2*e[h+1],2*e[h+2])};b.prototype._renderCanvasDrawTriangle=function(a,b,f,e,g,h){var l=this._texture.baseTexture.source,q=this._texture.baseTexture.width,p=this._texture.baseTexture.height,r=b[e],E=b[g],y=b[h],A=b[e+1],v=b[g+1];b=b[h+1];var C=f[e]*q,G=f[g]*q,q=f[h]*q;e=f[e+1]*p;g=f[g+1]*p;f=f[h+1]*p;if(0<this.canvasPadding){h=this.canvasPadding/this.worldTransform.a;var p=
this.canvasPadding/this.worldTransform.d,L=(r+E+y)/3,F=(A+v+b)/3,x=r-L,M=A-F,D=Math.sqrt(x*x+M*M),r=L+x/D*(D+h),A=F+M/D*(D+p),x=E-L,M=v-F,D=Math.sqrt(x*x+M*M),E=L+x/D*(D+h),v=F+M/D*(D+p),x=y-L,M=b-F,D=Math.sqrt(x*x+M*M),y=L+x/D*(D+h);b=F+M/D*(D+p)}a.save();a.beginPath();a.moveTo(r,A);a.lineTo(E,v);a.lineTo(y,b);a.closePath();a.clip();h=C*g+e*q+G*f-g*q-e*G-C*f;a.transform((r*g+e*y+E*f-g*y-e*E-r*f)/h,(A*g+e*b+v*f-g*b-e*v-A*f)/h,(C*E+r*q+G*y-E*q-r*G-C*y)/h,(C*v+A*q+G*b-v*q-A*G-C*b)/h,(C*g*y+e*E*q+r*
G*f-r*g*q-e*G*y-C*E*f)/h,(C*g*b+e*v*q+A*G*f-A*g*q-e*G*b-C*v*f)/h);a.drawImage(l,0,0);a.restore()};b.prototype.renderMeshFlat=function(a){var b=this.context;a=a.vertices;var f=a.length/2;b.beginPath();for(var e=1;e<f-2;e++){var g=2*e,h=a[g+2],l=a[g+4],q=a[g+3],p=a[g+5];b.moveTo(a[g],a[g+1]);b.lineTo(h,q);b.lineTo(l,p)}b.fillStyle="#FF0000";b.fill();b.closePath()};b.prototype._onTextureUpdate=function(){this.updateFrame=!0};b.prototype.getBounds=function(a){if(!this._currentBounds){var b=a||this.worldTransform;
a=b.a;for(var f=b.b,e=b.c,h=b.d,n=b.tx,l=b.ty,q=b=-Infinity,p=Infinity,r=Infinity,E=this.vertices,y=0,A=E.length;y<A;y+=2)var v=E[y],C=E[y+1],G=a*v+e*C+n,v=h*C+f*v+l,p=G<p?G:p,r=v<r?v:r,b=G>b?G:b,q=v>q?v:q;if(-Infinity===p||Infinity===q)return g.Rectangle.EMPTY;a=this._bounds;a.x=p;a.width=b-p;a.y=r;a.height=q-r;this._currentBounds=a}return this._currentBounds};b.prototype.containsPoint=function(c){if(!this.getBounds().contains(c.x,c.y))return!1;this.worldTransform.applyInverse(c,a);c=this.vertices;
var d=f.points,e,g;if(this.drawMode===b.DRAW_MODES.TRIANGLES){var h=this.indices;g=this.indices.length;for(e=0;e<g;e+=3){var n=2*h[e],l=2*h[e+1],q=2*h[e+2];d[0]=c[n];d[1]=c[n+1];d[2]=c[l];d[3]=c[l+1];d[4]=c[q];d[5]=c[q+1];if(f.contains(a.x,a.y))return!0}}else for(g=c.length,e=0;e<g;e+=6)if(d[0]=c[e],d[1]=c[e+1],d[2]=c[e+2],d[3]=c[e+3],d[4]=c[e+4],d[5]=c[e+5],f.contains(a.x,a.y))return!0;return!1};b.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":23}],119:[function(e,h,l){function b(a,b,c){g.call(this,
a);this._ready=!0;this.segmentsX=b||10;this.segmentsY=c||10;this.drawMode=g.DRAW_MODES.TRIANGLES;this.refresh()}var g=e("./Mesh");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.refresh=function(){for(var a=this.segmentsX*this.segmentsY,b=[],c=[],d=[],e=this.texture,g=this.segmentsX-1,h=this.segmentsY-1,n=e.width/g,l=e.height/h,e=0;e<a;e++){var q=e%this.segmentsX,p=e/this.segmentsX|0;b.push(q*n,p*l);c.push(q/(this.segmentsX-1),p/(this.segmentsY-1))}a=g*h;for(e=
0;e<a;e++)h=e%g,n=e/g|0,l=n*this.segmentsX+h+1,q=(n+1)*this.segmentsX+h,p=(n+1)*this.segmentsX+h+1,d.push(n*this.segmentsX+h,l,q),d.push(l,p,q);this.vertices=new Float32Array(b);this.uvs=new Float32Array(c);this.colors=new Float32Array([]);this.indices=new Uint16Array(d)};b.prototype._onTextureUpdate=function(){g.prototype._onTextureUpdate.call(this);this._ready&&this.refresh()}},{"./Mesh":118}],120:[function(e,h,l){function b(a,b){g.call(this,a);this.points=b;this.vertices=new Float32Array(4*b.length);
this.uvs=new Float32Array(4*b.length);this.colors=new Float32Array(2*b.length);this.indices=new Uint16Array(2*b.length);this._ready=!0;this.refresh()}var g=e("./Mesh"),a=e("../core");b.prototype=Object.create(g.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.refresh=function(){var b=this.points;if(!(1>b.length)&&this._texture._uvs){var c=this.uvs,d=this.indices,e=this.colors,g=this._texture._uvs,h=new a.Point(g.x0,g.y0),g=new a.Point(g.x2-g.x0,g.y2-g.y0);c[0]=0+h.x;c[1]=0+h.y;c[2]=0+
h.x;c[3]=1*g.y+h.y;e[0]=1;e[1]=1;d[0]=0;d[1]=1;for(var b=b.length,l,B,q=1;q<b;q++)l=4*q,B=q/(b-1),c[l]=B*g.x+h.x,c[l+1]=0+h.y,c[l+2]=B*g.x+h.x,c[l+3]=1*g.y+h.y,l=2*q,e[l]=1,e[l+1]=1,l=2*q,d[l]=l,d[l+1]=l+1;this.dirty=!0}};b.prototype._onTextureUpdate=function(){g.prototype._onTextureUpdate.call(this);this._ready&&this.refresh()};b.prototype.updateTransform=function(){var a=this.points;if(!(1>a.length)){for(var b=a[0],d,e,g=this.vertices,h=a.length,l,B,q,p=0;p<h;p++)l=a[p],B=4*p,d=p<a.length-1?a[p+
1]:l,e=-(d.x-b.x),b=d.y-b.y,d=Math.sqrt(b*b+e*e),q=this._texture.height/2,b/=d,e/=d,b*=q,e*=q,g[B]=l.x+b,g[B+1]=l.y+e,g[B+2]=l.x-b,g[B+3]=l.y-e,b=l;this.containerUpdateTransform()}}},{"../core":23,"./Mesh":118}],121:[function(e,h,l){h.exports={Mesh:e("./Mesh"),Plane:e("./Plane"),Rope:e("./Rope"),MeshRenderer:e("./webgl/MeshRenderer"),MeshShader:e("./webgl/MeshShader")}},{"./Mesh":118,"./Plane":119,"./Rope":120,"./webgl/MeshRenderer":122,"./webgl/MeshShader":123}],122:[function(e,h,l){function b(a){g.ObjectRenderer.call(this,
a);this.indices=new Uint16Array(15E3);for(var b=a=0;15E3>a;a+=6,b+=4)this.indices[a+0]=b+0,this.indices[a+1]=b+1,this.indices[a+2]=b+2,this.indices[a+3]=b+0,this.indices[a+4]=b+2,this.indices[a+5]=b+3;this.currentShader=null}var g=e("../../core"),a=e("../Mesh");b.prototype=Object.create(g.ObjectRenderer.prototype);b.prototype.constructor=b;h.exports=b;g.WebGLRenderer.registerPlugin("mesh",b);b.prototype.onContextChange=function(){};b.prototype.render=function(b){b._vertexBuffer||this._initWebGL(b);
var c=this.renderer,d=c.gl,e=b._texture.baseTexture,g=b.shader,h=b.drawMode===a.DRAW_MODES.TRIANGLE_MESH?d.TRIANGLE_STRIP:d.TRIANGLES;c.blendModeManager.setBlendMode(b.blendMode);g=g?g.shaders[d.id]||g.getShader(c):c.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(g);g.uniforms.translationMatrix.value=b.worldTransform.toArray(!0);g.uniforms.projectionMatrix.value=c.currentRenderTarget.projectionMatrix.toArray(!0);g.uniforms.alpha.value=b.worldAlpha;g.syncUniforms();b.dirty?
(b.dirty=!1,d.bindBuffer(d.ARRAY_BUFFER,b._vertexBuffer),d.bufferData(d.ARRAY_BUFFER,b.vertices,d.STATIC_DRAW),d.vertexAttribPointer(g.attributes.aVertexPosition,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,b._uvBuffer),d.bufferData(d.ARRAY_BUFFER,b.uvs,d.STATIC_DRAW),d.vertexAttribPointer(g.attributes.aTextureCoord,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),e._glTextures[d.id]?d.bindTexture(d.TEXTURE_2D,e._glTextures[d.id]):this.renderer.updateTexture(e),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b._indexBuffer),
d.bufferData(d.ELEMENT_ARRAY_BUFFER,b.indices,d.STATIC_DRAW)):(d.bindBuffer(d.ARRAY_BUFFER,b._vertexBuffer),d.bufferSubData(d.ARRAY_BUFFER,0,b.vertices),d.vertexAttribPointer(g.attributes.aVertexPosition,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,b._uvBuffer),d.vertexAttribPointer(g.attributes.aTextureCoord,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),e._glTextures[d.id]?d.bindTexture(d.TEXTURE_2D,e._glTextures[d.id]):this.renderer.updateTexture(e),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b._indexBuffer),
d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,b.indices));d.drawElements(h,b.indices.length,d.UNSIGNED_SHORT,0)};b.prototype._initWebGL=function(a){var b=this.renderer.gl;a._vertexBuffer=b.createBuffer();a._indexBuffer=b.createBuffer();a._uvBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,a._vertexBuffer);b.bufferData(b.ARRAY_BUFFER,a.vertices,b.DYNAMIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,a._uvBuffer);b.bufferData(b.ARRAY_BUFFER,a.uvs,b.STATIC_DRAW);a.colors&&(a._colorBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,
a._colorBuffer),b.bufferData(b.ARRAY_BUFFER,a.colors,b.STATIC_DRAW));b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a._indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.indices,b.STATIC_DRAW)};b.prototype.flush=function(){};b.prototype.start=function(){this.currentShader=null};b.prototype.destroy=function(){g.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":23,"../Mesh":118}],123:[function(e,h,l){function b(a){g.Shader.call(this,a,"precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}",
"precision lowp float;\nvarying vec2 vTextureCoord;\nuniform float alpha;\nuniform sampler2D uSampler;\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;\n}",{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var g=e("../../core");b.prototype=Object.create(g.Shader.prototype);b.prototype.constructor=b;h.exports=b;g.ShaderManager.registerPlugin("meshShader",
b)},{"../../core":23}],124:[function(e,h,l){Math.sign||(Math.sign=function(b){b=+b;return 0===b||isNaN(b)?b:0<b?1:-1})},{}],125:[function(e,h,l){Object.assign||(Object.assign=e("object-assign"))},{"object-assign":11}],126:[function(e,h,l){e("./Object.assign");e("./requestAnimationFrame");e("./Math.sign")},{"./Math.sign":124,"./Object.assign":125,"./requestAnimationFrame":127}],127:[function(e,h,l){(function(b){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()});if(!b.performance||
!b.performance.now){var e=Date.now();b.performance||(b.performance={});b.performance.now=function(){return Date.now()-e}}for(var a=Date.now(),f=["ms","moz","webkit","o"],c=0;c<f.length&&!b.requestAnimationFrame;++c)b.requestAnimationFrame=b[f[c]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[f[c]+"CancelAnimationFrame"]||b[f[c]+"CancelRequestAnimationFrame"];b.requestAnimationFrame||(b.requestAnimationFrame=function(b){if("function"!==typeof b)throw new TypeError(b+"is not a function");var c=Date.now(),
e=16+a-c;0>e&&(e=0);a=c;return setTimeout(function(){a=Date.now();b(performance.now())},e)});b.cancelAnimationFrame||(b.cancelAnimationFrame=function(a){clearTimeout(a)})}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],128:[function(e,h,l){(function(b){(function(){function e(a){var b=!1;return function(){if(b)throw Error("Callback was already called.");b=!0;a.apply(f,arguments)}}var a={},f,c;f=this;null!=f&&(c=f.async);a.noConflict=
function(){f.async=c;return a};var d=Object.prototype.toString,m=Array.isArray||function(a){return"[object Array]"===d.call(a)},k=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},l=function(a,b){if(a.map)return a.map(b);var c=[];k(a,function(a,d,e){c.push(b(a,d,e))});return c},n=function(a,b,c){if(a.reduce)return a.reduce(b,c);k(a,function(a,d,e){c=b(c,a,d,e)});return c},B=function(a){if(Object.keys)return Object.keys(a);var b=[],c;for(c in a)a.hasOwnProperty(c)&&
b.push(c);return b};"undefined"!==typeof b&&b.nextTick?(a.nextTick=b.nextTick,a.setImmediate="undefined"!==typeof setImmediate?function(a){setImmediate(a)}:a.nextTick):(a.nextTick="function"===typeof setImmediate?function(a){setImmediate(a)}:function(a){setTimeout(a,0)},a.setImmediate=a.nextTick);a.each=function(a,b,c){function d(b){b?(c(b),c=function(){}):(f+=1,f>=a.length&&c())}c=c||function(){};if(!a.length)return c();var f=0;k(a,function(a){b(a,e(d))})};a.forEach=a.each;a.eachSeries=function(a,
b,c){c=c||function(){};if(!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c():e())})};e()};a.forEachSeries=a.eachSeries;a.eachLimit=function(a,b,c,d){q(b).apply(null,[a,c,d])};a.forEachLimit=a.eachLimit;var q=function(a){return function(b,c,d){d=d||function(){};if(!b.length||0>=a)return d();var e=0,f=0,g=0;(function K(){if(e>=b.length)return d();for(;g<a&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,--g,e>=b.length?
d():K())})})()}},p=function(b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[a.each].concat(c))}},r=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[q(a)].concat(c))}},E=function(b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[a.eachSeries].concat(c))}},y=function(a,b,c,d){b=l(b,function(a,b){return{index:b,value:a}});if(d){var e=[];a(b,function(a,b){c(a.value,function(c,d){e[a.index]=
d;b(c)})},function(a){d(a,e)})}else a(b,function(a,b){c(a.value,function(a){b(a)})})};a.map=p(y);a.mapSeries=E(y);a.mapLimit=function(a,b,c,d){return r(b,y)(a,c,d)};a.reduce=function(b,c,d,e){a.eachSeries(b,function(a,b){d(c,a,function(a,d){c=d;b(a)})},function(a){e(a,c)})};a.inject=a.reduce;a.foldl=a.reduce;a.reduceRight=function(b,c,d,e){b=l(b,function(a){return a}).reverse();a.reduce(b,c,d,e)};a.foldr=a.reduceRight;var A=function(a,b,c,d){var e=[];b=l(b,function(a,b){return{index:b,value:a}});
a(b,function(a,b){c(a.value,function(c){c&&e.push(a);b()})},function(a){d(l(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};a.filter=p(A);a.filterSeries=E(A);a.select=a.filter;a.selectSeries=a.filterSeries;A=function(a,b,c,d){var e=[];b=l(b,function(a,b){return{index:b,value:a}});a(b,function(a,b){c(a.value,function(c){c||e.push(a);b()})},function(a){d(l(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};a.reject=p(A);a.rejectSeries=E(A);
A=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(a){d()})};a.detect=p(A);a.detectSeries=E(A);a.some=function(b,c,d){a.each(b,function(a,b){c(a,function(a){a&&(d(!0),d=function(){});b()})},function(a){d(!1)})};a.any=a.some;a.every=function(b,c,d){a.each(b,function(a,b){c(a,function(a){a||(d(!1),d=function(){});b()})},function(a){d(!0)})};a.all=a.every;a.sortBy=function(b,c,d){a.map(b,function(a,b){c(a,function(c,d){c?b(c):b(null,{value:a,criteria:d})})},
function(a,b){if(a)return d(a);d(null,l(b.sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),function(a){return a.value}))})};a.auto=function(b,c){c=c||function(){};var d=B(b),e=d.length;if(!e)return c();var f={},g=[],h=function(){e--;k(g.slice(0),function(a){a()})};g.unshift(function(){if(!e){var a=c;c=function(){};a(null,f)}});k(d,function(d){var e=m(b[d])?b[d]:[b[d]],l=function(b){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);if(b){var g={};k(B(f),function(a){g[a]=
f[a]});g[d]=e;c(b,g);c=function(){}}else f[d]=e,a.setImmediate(h)},p=e.slice(0,Math.abs(e.length-1))||[],t=function(){return n(p,function(a,b){return a&&f.hasOwnProperty(b)},!0)&&!f.hasOwnProperty(d)};if(t())e[e.length-1](l,f);else{var q=function(){if(t()){a:for(var a=q,b=0;b<g.length;b+=1)if(g[b]===a){g.splice(b,1);break a}e[e.length-1](l,f)}};g.unshift(q)}})};a.retry=function(b,c,d){var e=[];"function"===typeof b&&(d=c,c=b,b=5);b=parseInt(b,10)||5;var f=function(f,g){for(var h=function(a,b){return function(c){a(function(a,
d){c(!a||b,{err:a,result:d})},g)}};b;)e.push(h(c,!--b));a.series(e,function(a,b){b=b[b.length-1];(f||d)(b.err,b.result)})};return d?f():f};a.waterfall=function(b,c){c=c||function(){};if(!m(b))return c(Error("First argument to waterfall must be an array of functions"));if(!b.length)return c();var d=function(b){return function(e){if(e)c.apply(null,arguments),c=function(){};else{var f=Array.prototype.slice.call(arguments,1),g=b.next();g?f.push(d(g)):f.push(c);a.setImmediate(function(){b.apply(null,f)})}}};
d(a.iterator(b))()};var v=function(a,b,c){c=c||function(){};if(m(b))a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);b.call(null,a,c)})},c);else{var d={};a.each(B(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);d[a]=e;c(b)})},function(a){c(a,d)})}};a.parallel=function(b,c){v({map:a.map,each:a.each},b,c)};a.parallelLimit=function(a,b,c){v({map:r(b,y),each:q(b)},a,c)};a.series=function(b,
c){c=c||function(){};if(m(b))a.mapSeries(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);b.call(null,a,c)})},c);else{var d={};a.eachSeries(B(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);d[a]=e;c(b)})},function(a){c(a,d)})}};a.iterator=function(a){var b=function(c){var d=function(){a.length&&a[c].apply(null,arguments);return d.next()};d.next=function(){return c<a.length-1?b(c+1):null};return d};
return b(0)};a.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};A=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]);b(a)})},function(a){d(a,e)})};a.concat=p(A);a.concatSeries=E(A);a.whilst=function(b,c,d){b()?c(function(e){if(e)return d(e);a.whilst(b,c,d)}):d()};a.doWhilst=function(b,c,d){b(function(e){if(e)return d(e);var f=Array.prototype.slice.call(arguments,1);
c.apply(null,f)?a.doWhilst(b,c,d):d()})};a.until=function(b,c,d){b()?d():c(function(e){if(e)return d(e);a.until(b,c,d)})};a.doUntil=function(b,c,d){b(function(e){if(e)return d(e);var f=Array.prototype.slice.call(arguments,1);c.apply(null,f)?d():a.doUntil(b,c,d)})};a.queue=function(b,c){function d(b,c,e,f){b.started||(b.started=!0);m(c)||(c=[c]);if(0==c.length)return a.setImmediate(function(){b.drain&&b.drain()});k(c,function(c){c={data:c,callback:"function"===typeof f?f:null};e?b.tasks.unshift(c):
b.tasks.push(c);b.saturated&&b.tasks.length===b.concurrency&&b.saturated();a.setImmediate(b.process)})}void 0===c&&(c=1);var f=0,h={tasks:[],concurrency:c,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(a,b){d(h,a,!1,b)},kill:function(){h.drain=null;h.tasks=[]},unshift:function(a,b){d(h,a,!0,b)},process:function(){if(!h.paused&&f<h.concurrency&&h.tasks.length){var a=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty();f+=1;var c=e(function(){--f;a.callback&&a.callback.apply(a,
arguments);h.drain&&0===h.tasks.length+f&&h.drain();h.process()});b(a.data,c)}},length:function(){return h.tasks.length},running:function(){return f},idle:function(){return 0===h.tasks.length+f},pause:function(){!0!==h.paused&&(h.paused=!0,h.process())},resume:function(){!1!==h.paused&&(h.paused=!1,h.process())}};return h};a.priorityQueue=function(b,c){function d(a,b){return a.priority-b.priority}function e(a,b,c){for(var d=-1,f=a.length-1;d<f;){var g=d+(f-d+1>>>1);0<=c(b,a[g])?d=g:f=g-1}return d}
function f(b,c,g,h){b.started||(b.started=!0);m(c)||(c=[c]);if(0==c.length)return a.setImmediate(function(){b.drain&&b.drain()});k(c,function(c){c={data:c,priority:g,callback:"function"===typeof h?h:null};b.tasks.splice(e(b.tasks,c,d)+1,0,c);b.saturated&&b.tasks.length===b.concurrency&&b.saturated();a.setImmediate(b.process)})}var g=a.queue(b,c);g.push=function(a,b,c){f(g,a,b,c)};delete g.unshift;return g};a.cargo=function(b,c){var d=!1,e=[],f={tasks:e,payload:c,saturated:null,empty:null,drain:null,
drained:!0,push:function(b,d){m(b)||(b=[b]);k(b,function(a){e.push({data:a,callback:"function"===typeof d?d:null});f.drained=!1;f.saturated&&e.length===c&&f.saturated()});a.setImmediate(f.process)},process:function D(){if(!d)if(0===e.length)f.drain&&!f.drained&&f.drain(),f.drained=!0;else{var a="number"===typeof c?e.splice(0,c):e.splice(0,e.length),g=l(a,function(a){return a.data});f.empty&&f.empty();d=!0;b(g,function(){d=!1;var b=arguments;k(a,function(a){a.callback&&a.callback.apply(null,b)});D()})}},
length:function(){return e.length},running:function(){return d}};return f};A=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!==typeof console&&(b?console.error&&console.error(b):console[a]&&k(c,function(b){console[a](b)}))}]))}};a.log=A("log");a.dir=A("dir");a.memoize=function(b,c){var d={},e={};c=c||function(a){return a};var f=function(){var f=Array.prototype.slice.call(arguments),
g=f.pop(),h=c.apply(null,f);h in d?a.nextTick(function(){g.apply(null,d[h])}):h in e?e[h].push(g):(e[h]=[g],b.apply(null,f.concat([function(){d[h]=arguments;var a=e[h];delete e[h];for(var b=0,c=a.length;b<c;b++)a[b].apply(null,arguments)}])))};f.memo=d;f.unmemoized=b;return f};a.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}};a.times=function(b,c,d){for(var e=[],f=0;f<b;f++)e.push(f);return a.map(e,c,d)};a.timesSeries=function(b,c,d){for(var e=[],f=0;f<b;f++)e.push(f);
return a.mapSeries(e,c,d)};a.seq=function(){var b=arguments;return function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();a.reduce(b,d,function(a,b,d){b.apply(c,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,b){e.apply(c,[a].concat(b))})}};a.compose=function(){return a.seq.apply(null,Array.prototype.reverse.call(arguments))};A=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,
function(a,b){a.apply(c,d.concat([b]))},e)};if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};a.applyEach=p(A);a.applyEachSeries=E(A);a.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d;}a(c)}c()};"undefined"!==typeof h&&h.exports?h.exports=a:f.async=a})()}).call(this,e("_process"))},{_process:3}],129:[function(e,h,l){function b(a,b,d){this.fn=a;this.context=b;this.once=d||!1}function g(){}var a="function"!==typeof Object.create?
"~":!1;g.prototype._events=void 0;g.prototype.listeners=function(b,c){var d=a?a+b:b,e=this._events&&this._events[d];if(c)return!!e;if(!e)return[];if(this._events[d].fn)return[this._events[d].fn];for(var e=0,g=this._events[d].length,h=Array(g);e<g;e++)h[e]=this._events[d][e].fn;return h};g.prototype.emit=function(b,c,d,e,g,h){var l=a?a+b:b;if(!this._events||!this._events[l])return!1;var l=this._events[l],B=arguments.length,q,p;if("function"===typeof l.fn){l.once&&this.removeListener(b,l.fn,void 0,
!0);switch(B){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,c),!0;case 3:return l.fn.call(l.context,c,d),!0;case 4:return l.fn.call(l.context,c,d,e),!0;case 5:return l.fn.call(l.context,c,d,e,g),!0;case 6:return l.fn.call(l.context,c,d,e,g,h),!0}p=1;for(q=Array(B-1);p<B;p++)q[p-1]=arguments[p];l.fn.apply(l.context,q)}else{var r=l.length,E;for(p=0;p<r;p++)switch(l[p].once&&this.removeListener(b,l[p].fn,void 0,!0),B){case 1:l[p].fn.call(l[p].context);break;case 2:l[p].fn.call(l[p].context,
c);break;case 3:l[p].fn.call(l[p].context,c,d);break;default:if(!q)for(E=1,q=Array(B-1);E<B;E++)q[E-1]=arguments[E];l[p].fn.apply(l[p].context,q)}}return!0};g.prototype.on=function(e,c,d){c=new b(c,d||this);e=a?a+e:e;this._events||(this._events=a?{}:Object.create(null));this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],c]:this._events[e].push(c):this._events[e]=c;return this};g.prototype.once=function(e,c,d){c=new b(c,d||this,!0);e=a?a+e:e;this._events||(this._events=a?{}:Object.create(null));
this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],c]:this._events[e].push(c):this._events[e]=c;return this};g.prototype.removeListener=function(b,c,d,e){b=a?a+b:b;if(!this._events||!this._events[b])return this;var g=this._events[b],h=[];if(c)if(g.fn)(g.fn!==c||e&&!g.once||d&&g.context!==d)&&h.push(g);else for(var l=0,B=g.length;l<B;l++)(g[l].fn!==c||e&&!g[l].once||d&&g[l].context!==d)&&h.push(g[l]);h.length?this._events[b]=1===h.length?h[0]:h:delete this._events[b];return this};
g.prototype.removeAllListeners=function(b){if(!this._events)return this;b?delete this._events[a?a+b:b]:this._events=a?{}:Object.create(null);return this};g.prototype.off=g.prototype.removeListener;g.prototype.addListener=g.prototype.on;g.prototype.setMaxListeners=function(){return this};g.prefixed=a;h.exports=g},{}],130:[function(e,h,l){function b(a,b){c.call(this);b=b||10;this.baseUrl=a||"";this.progress=0;this.loading=!1;this._progressChunk=0;this._beforeMiddleware=[];this._afterMiddleware=[];this._boundLoadResource=
this._loadResource.bind(this);this._boundOnLoad=this._onLoad.bind(this);this._buffer=[];this._numToLoad=0;this._queue=g.queue(this._boundLoadResource,b);this.resources={}}var g=e("async"),a=e("url"),f=e("./Resource"),c=e("eventemitter3");b.prototype=Object.create(c.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.add=b.prototype.enqueue=function(a,b,c,e){if(Array.isArray(a)){for(b=0;b<a.length;++b)this.add(a[b]);return this}"object"===typeof a&&(e=b||a.callback||a.onComplete,c=a,b=a.url,
a=a.name||a.key||a.url);"string"!==typeof b&&(e=c,c=b,b=a);if("string"!==typeof b)throw Error("No url passed to add resource to loader.");"function"===typeof c&&(e=c,c=null);if(this.resources[a])throw Error('Resource with name "'+a+'" already exists.');b=this._handleBaseUrl(b);this.resources[a]=new f(a,b,c);if("function"===typeof e)this.resources[a].once("afterMiddleware",e);this._numToLoad++;this._queue.started?(this._queue.push(this.resources[a]),this._progressChunk=(100-this.progress)/(this._queue.length()+
this._queue.running())):(this._buffer.push(this.resources[a]),this._progressChunk=100/this._buffer.length);return this};b.prototype._handleBaseUrl=function(b){var c=a.parse(b);return c.protocol||0===c.pathname.indexOf("//")?b:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==b.charAt(0)?this.baseUrl+"/"+b:this.baseUrl+b};b.prototype.before=b.prototype.pre=function(a){this._beforeMiddleware.push(a);return this};b.prototype.after=b.prototype.use=function(a){this._afterMiddleware.push(a);
return this};b.prototype.reset=function(){this.progress=0;this.loading=!1;this._progressChunk=0;this._numToLoad=this._buffer.length=0;this._queue.kill();this._queue.started=!1;this.resources={}};b.prototype.load=function(a){if("function"===typeof a)this.once("complete",a);if(this._queue.started)return this;this.emit("start",this);for(a=0;a<this._buffer.length;++a)this._queue.push(this._buffer[a]);this._buffer.length=0;return this};b.prototype._loadResource=function(a,b){var c=this;a._dequeue=b;this._runMiddleware(a,
this._beforeMiddleware,function(){a.load(c._boundOnLoad)})};b.prototype._onComplete=function(){this.emit("complete",this,this.resources)};b.prototype._onLoad=function(a){this.progress+=this._progressChunk;this.emit("progress",this,a);this._runMiddleware(a,this._afterMiddleware,function(){a.emit("afterMiddleware",a);this._numToLoad--;0===this._numToLoad&&(this.progress=100,this._onComplete());a.error?this.emit("error",a.error,this,a):this.emit("load",this,a)});a._dequeue()};b.prototype._runMiddleware=
function(a,b,c){var e=this;g.eachSeries(b,function(b,c){b.call(e,a,c)},c.bind(this,a))};b.LOAD_TYPE=f.LOAD_TYPE;b.XHR_READY_STATE=f.XHR_READY_STATE;b.XHR_RESPONSE_TYPE=f.XHR_RESPONSE_TYPE},{"./Resource":131,async:128,eventemitter3:129,url:8}],131:[function(e,h,l){function b(a,b,c){f.call(this);c=c||{};if("string"!==typeof a||"string"!==typeof b)throw Error("Both name and url are required for constructing a resource.");this.name=a;this.url=b;this.isDataUrl=0===this.url.indexOf("data:");this.data=null;
this.crossOrigin=!0===c.crossOrigin?"anonymous":c.crossOrigin;this.loadType=c.loadType||this._determineLoadType();this.xhrType=c.xhrType;this.metadata=c.metadata||{};this.xhr=this.error=null;this.isVideo=this.isAudio=this.isImage=this.isXml=this.isJson=!1;this._dequeue=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);
this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function g(a){return a.toString().replace("object ","")}function a(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1));b&&(a[b]=c)}var f=e("eventemitter3"),c=e("url"),d=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),m=null;b.prototype=Object.create(f.prototype);b.prototype.constructor=b;h.exports=b;b.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",
this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete));this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=
null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null));this.emit("complete",this)};b.prototype.load=function(a){this.emit("start",this);if(a)this.once("complete",a);if(!1===this.crossOrigin||"string"!==typeof this.crossOrigin)this.crossOrigin=this._determineCrossOrigin(this.url);switch(this.loadType){case b.LOAD_TYPE.IMAGE:this._loadImage();break;case b.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case b.LOAD_TYPE.VIDEO:this._loadElement("video");break;default:d&&this.crossOrigin?
this._loadXdr():this._loadXhr()}};b.prototype._loadImage=function(){this.data=new Image;this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin);this.data.src=this.url;this.isImage=!0;this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1)};b.prototype._loadElement=function(a){this.data="audio"===a&&"undefined"!==typeof Audio?new Audio:document.createElement(a);if(null===this.data)this.error=
Error("Unsupported element "+a),this.complete();else{if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=0;b<this.url.length;++b)this.data.appendChild(this._createSource(a,this.url[b]));else this.data.appendChild(this._createSource(a,this.url));this["is"+a[0].toUpperCase()+a.substring(1)]=!0;this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",
this._boundOnProgress,!1);this.data.addEventListener("canplaythrough",this._boundComplete,!1);this.data.load()}};b.prototype._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XMLHttpRequest;a.open("GET",this.url,!0);a.responseType=this.xhrType===b.XHR_RESPONSE_TYPE.JSON||this.xhrType===b.XHR_RESPONSE_TYPE.DOCUMENT?b.XHR_RESPONSE_TYPE.TEXT:this.xhrType;a.addEventListener("error",this._boundXhrOnError,!1);a.addEventListener("abort",this._boundXhrOnAbort,
!1);a.addEventListener("progress",this._boundOnProgress,!1);a.addEventListener("load",this._boundXhrOnLoad,!1);a.send()};b.prototype._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5E3;a.onerror=this._boundXhrOnError;a.ontimeout=this._boundXdrOnTimeout;a.onprogress=this._boundOnProgress;a.onload=this._boundXhrOnLoad;a.open("GET",this.url,!0);setTimeout(function(){a.send()},0)};b.prototype._createSource=function(a,
b,c){c||(c=a+"/"+b.substr(b.lastIndexOf(".")+1));a=document.createElement("source");a.src=b;a.type=c;return a};b.prototype._onError=function(a){this.error=Error("Failed to load element using "+a.target.nodeName);this.complete()};b.prototype._onProgress=function(a){a&&a.lengthComputable&&this.emit("progress",this,a.loaded/a.total)};b.prototype._xhrOnError=function(){this.error=Error(g(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"');this.complete()};b.prototype._xhrOnAbort=
function(){this.error=Error(g(this.xhr)+" Request was aborted by the user.");this.complete()};b.prototype._xdrOnTimeout=function(){this.error=Error(g(this.xhr)+" Request timed out.");this.complete()};b.prototype._xhrOnLoad=function(){var a=this.xhr,c=void 0!==a.status?a.status:200;if(200===c||204===c||0===c&&0<a.responseText.length)if(this.xhrType===b.XHR_RESPONSE_TYPE.TEXT)this.data=a.responseText;else if(this.xhrType===b.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(a.responseText),this.isJson=
!0}catch(d){this.error=Error("Error trying to parse loaded json:",d)}else if(this.xhrType===b.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser)this.data=(new DOMParser).parseFromString(a.responseText,"text/xml");else{var e=document.createElement("div");e.innerHTML=a.responseText;this.data=e}this.isXml=!0}catch(d){this.error=Error("Error trying to parse loaded xml:",d)}else this.data=a.response||a.responseText;else this.error=Error("["+a.status+"]"+a.statusText+":"+a.responseURL);this.complete()};
b.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location;m||(m=document.createElement("a"));m.href=a;a=c.parse(m.href);var d=!a.port&&""===b.port||a.port===b.port;return a.hostname===b.hostname&&d&&a.protocol===b.protocol?"":"anonymous"};b.prototype._determineXhrType=function(){return b._xhrTypeMap[this._getExtension()]||b.XHR_RESPONSE_TYPE.TEXT};b.prototype._determineLoadType=function(){return b._loadTypeMap[this._getExtension()]||b.LOAD_TYPE.XHR};b.prototype._getExtension=
function(){var a=this.url;if(this.isDataUrl)var b=a.indexOf("/"),a=a.substring(b+1,a.indexOf(";",b));else b=a.indexOf("?"),-1!==b&&(a=a.substring(0,b)),a=a.substring(a.lastIndexOf(".")+1);return a};b.prototype._getMimeFromXhrType=function(a){switch(a){case b.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case b.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case b.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case b.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}};
b.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};b.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};b.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};b._loadTypeMap={gif:b.LOAD_TYPE.IMAGE,png:b.LOAD_TYPE.IMAGE,bmp:b.LOAD_TYPE.IMAGE,jpg:b.LOAD_TYPE.IMAGE,jpeg:b.LOAD_TYPE.IMAGE,tif:b.LOAD_TYPE.IMAGE,tiff:b.LOAD_TYPE.IMAGE,webp:b.LOAD_TYPE.IMAGE,tga:b.LOAD_TYPE.IMAGE};b._xhrTypeMap={xhtml:b.XHR_RESPONSE_TYPE.DOCUMENT,html:b.XHR_RESPONSE_TYPE.DOCUMENT,
htm:b.XHR_RESPONSE_TYPE.DOCUMENT,xml:b.XHR_RESPONSE_TYPE.DOCUMENT,tmx:b.XHR_RESPONSE_TYPE.DOCUMENT,tsx:b.XHR_RESPONSE_TYPE.DOCUMENT,svg:b.XHR_RESPONSE_TYPE.DOCUMENT,gif:b.XHR_RESPONSE_TYPE.BLOB,png:b.XHR_RESPONSE_TYPE.BLOB,bmp:b.XHR_RESPONSE_TYPE.BLOB,jpg:b.XHR_RESPONSE_TYPE.BLOB,jpeg:b.XHR_RESPONSE_TYPE.BLOB,tif:b.XHR_RESPONSE_TYPE.BLOB,tiff:b.XHR_RESPONSE_TYPE.BLOB,webp:b.XHR_RESPONSE_TYPE.BLOB,tga:b.XHR_RESPONSE_TYPE.BLOB,json:b.XHR_RESPONSE_TYPE.JSON,text:b.XHR_RESPONSE_TYPE.TEXT,txt:b.XHR_RESPONSE_TYPE.TEXT};
b.setExtensionLoadType=function(c,d){a(b._loadTypeMap,c,d)};b.setExtensionXhrType=function(c,d){a(b._xhrTypeMap,c,d)}},{eventemitter3:129,url:8}],132:[function(e,h,l){h.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(b){for(var e="",a,f=Array(4),c=0,d;c<b.length;){a=Array(3);for(d=0;d<a.length;d++)a[d]=c<b.length?b.charCodeAt(c++)&255:0;f[0]=a[0]>>2;f[1]=(a[0]&3)<<4|a[1]>>4;f[2]=(a[1]&15)<<2|a[2]>>6;f[3]=a[2]&63;a=c-(b.length-1);switch(a){case 2:f[3]=
64;f[2]=64;break;case 1:f[3]=64}for(d=0;d<f.length;d++)e+=this._keyStr.charAt(f[d])}return e}}},{}],133:[function(e,h,l){h.exports=e("./Loader");h.exports.Resource=e("./Resource");h.exports.middleware={caching:{memory:e("./middlewares/caching/memory")},parsing:{blob:e("./middlewares/parsing/blob")}}},{"./Loader":130,"./Resource":131,"./middlewares/caching/memory":134,"./middlewares/parsing/blob":135}],134:[function(e,h,l){var b={};h.exports=function(){return function(e,a){if(b[e.url])e.data=b[e.url],
e.complete();else e.once("complete",function(){b[this.url]=this.data});a()}}},{}],135:[function(e,h,l){var b=e("../../Resource"),g=e("../../b64");window.URL=window.URL||window.webkitURL;h.exports=function(){return function(a,e){if(!a.data)return e();if(a.xhr&&a.xhrType===b.XHR_RESPONSE_TYPE.BLOB)if(!window.Blob||"string"===typeof a.data){var c=a.xhr.getResponseHeader("content-type");c&&0===c.indexOf("image")&&(a.data=new Image,a.data.src="data:"+c+";base64,"+g.encodeBinary(a.xhr.responseText),a.isImage=
!0,a.data.onload=function(){a.data.onload=null;e()})}else{if(0===a.data.type.indexOf("image")){var d=URL.createObjectURL(a.data);a.blob=a.data;a.data=new Image;a.data.src=d;a.isImage=!0;a.data.onload=function(){URL.revokeObjectURL(d);a.data.onload=null;e()}}}else e()}}},{"../../Resource":131,"../../b64":132}]},{},[108])(108)});PIXI.TransparencyHitArea=function(u){this.sprite=u};PIXI.TransparencyHitArea.create=function(u,e){var h;h=e?new PIXI.WebGLTransparencyHitArea(u):new PIXI.CanvasTransparencyHitArea(u);h.init();return h};PIXI.TransparencyHitArea.prototype.init=function(){};
PIXI.TransparencyHitArea.prototype.contains=function(u,e){if(0===Math.abs(this.sprite.width)||0===Math.abs(this.sprite.height))return!1;var h=this.sprite.texture.frame.width,l=this.sprite.texture.frame.height;u+=this.sprite.anchor.x*h;e+=this.sprite.anchor.y*l;return 0<=u&&u<=h&&0<=e&&e<=l?!this.isTextureTransparentAt(Math.round(u+this.sprite.texture.frame.x),Math.round(e+this.sprite.texture.frame.y)):!1};PIXI.TransparencyHitArea.prototype.getTexture=function(){return this.sprite.texture};
PIXI.CanvasTransparencyHitArea=function(u){PIXI.TransparencyHitArea.call(this,u);this.textureWidth=this.textureData=null};PIXI.CanvasTransparencyHitArea.prototype=Object.create(PIXI.TransparencyHitArea.prototype);PIXI.CanvasTransparencyHitArea.constructor=PIXI.CanvasTransparencyHitArea;PIXI.CanvasTransparencyHitArea.prototype.clone=function(){return new PIXI.CanvasTransparencyHitArea(this.sprite)};
PIXI.CanvasTransparencyHitArea.prototype.init=function(){PIXI.TransparencyHitArea.prototype.init.call(this);null===PIXI.CanvasTransparencyHitArea.cachedRenderer&&(PIXI.CanvasTransparencyHitArea.cachedRenderer=new PIXI.CanvasRenderer(1,1));this.initTextureData()};
PIXI.CanvasTransparencyHitArea.prototype.initTextureData=function(){if(!this.textureData){var u=this.getTexture(),e=u.baseTexture.source;this.textureWidth=e.width;e=e.src;void 0===PIXI.CanvasTransparencyHitArea.TextureData[e]&&(u=this.createTextureData(u),PIXI.CanvasTransparencyHitArea.TextureData[e]=u);this.textureData=PIXI.CanvasTransparencyHitArea.TextureData[e]}};
PIXI.CanvasTransparencyHitArea.prototype.createTextureData=function(u){u=u.baseTexture.source;var e=PIXI.CanvasTransparencyHitArea.cachedRenderer,h=e.view;h.width=u.width;h.height=u.height;e=e.view.getContext("2d");e.clearRect(0,0,u.width,u.height);e.drawImage(u,0,0);return e.getImageData(0,0,u.width,u.height).data};
PIXI.CanvasTransparencyHitArea.prototype.isTextureTransparentAt=function(u,e){if(!this.textureData)throw Error("CanvasTransparencyHitArea#init() not called.");return 1>this.textureData[4*(u+e*this.textureWidth)+3]};PIXI.CanvasTransparencyHitArea.TextureData=[];PIXI.CanvasTransparencyHitArea.cachedRenderer=null;PIXI.WebGLTransparencyHitArea=function(u){PIXI.TransparencyHitArea.call(this,u);this.textureWidth=this.textureData=null};PIXI.WebGLTransparencyHitArea.prototype=Object.create(PIXI.TransparencyHitArea.prototype);
PIXI.WebGLTransparencyHitArea.constructor=PIXI.WebGLTransparencyHitArea;PIXI.WebGLTransparencyHitArea.prototype.clone=function(){return new PIXI.WebGLTransparencyHitArea(this.sprite)};PIXI.WebGLTransparencyHitArea.prototype.init=function(){PIXI.TransparencyHitArea.prototype.init.call(this);null===PIXI.WebGLTransparencyHitArea.cachedRenderer&&(PIXI.WebGLTransparencyHitArea.cachedRenderer=new PIXI.WebGLRenderer(1,1));this.initTextureData()};
PIXI.WebGLTransparencyHitArea.prototype.initTextureData=function(){if(!this.textureData){var u=this.getTexture(),e=u.baseTexture.source;this.textureWidth=e.width;e=e.src;void 0===PIXI.WebGLTransparencyHitArea.TextureData[e]&&(u=this.createTextureData(u),PIXI.WebGLTransparencyHitArea.TextureData[e]=u);this.textureData=PIXI.WebGLTransparencyHitArea.TextureData[e]}};
PIXI.WebGLTransparencyHitArea.prototype.createTextureData=function(u){var e=u.baseTexture.source,h=PIXI.WebGLTransparencyHitArea.cachedRenderer.view;h.width=e.width;h.height=e.height;var h=PIXI.WebGLTransparencyHitArea.cachedRenderer.gl,l=h.createFramebuffer();h.bindFramebuffer(h.FRAMEBUFFER,l);void 0===u.baseTexture._glTextures[h.id]&&PIXI.WebGLTransparencyHitArea.cachedRenderer.updateTexture(u.baseTexture);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,u.baseTexture._glTextures[h.id],
0);u=new Uint8Array(e.width*e.height*4);try{h.readPixels(0,0,e.width,e.height,h.RGBA,h.UNSIGNED_BYTE,u)}catch(b){console.log(error)}h.bindFramebuffer(h.FRAMEBUFFER,null);return u};PIXI.WebGLTransparencyHitArea.prototype.isTextureTransparentAt=function(u,e){if(!this.textureData)throw Error("WebGLTransparencyHitArea#init() not called.");return 255>this.textureData[4*(u+e*this.textureWidth)+3]};PIXI.WebGLTransparencyHitArea.TextureData=[];PIXI.WebGLTransparencyHitArea.cachedRenderer=null;function getCurvePoints(u,e,h,l){function b(a,b,e,f){for(var g=2,k;g<e;g+=2){var l=a[g],m=a[g+1],n=a[g+2],p=a[g+3],q=(n-a[g-2])*f,t=(p-a[g-1])*f,u=(a[g+4]-l)*f,B=(a[g+5]-m)*f,J=0,N,I,H,O;for(k=0;k<h;k++)N=b[J++],I=b[J++],H=b[J++],O=b[J++],d[c++]=N*l+I*n+H*q+O*u,d[c++]=N*m+I*p+H*t+O*B}}e="number"===typeof e?e:.5;h="number"===typeof h?h:25;var g,a=1,f=u.length,c=0,d=new Float32Array((f-2)*h+2+(l?2*h:0)),m=new Float32Array(4*(h+2)),k=4;g=u.slice(0);l?(g.unshift(u[f-1]),g.unshift(u[f-2]),g.push(u[0],
u[1])):(g.unshift(u[1]),g.unshift(u[0]),g.push(u[f-2],u[f-1]));for(m[0]=1;a<h;a++){var t=a/h,n=t*t,B=n*t,q=2*B,p=3*n;m[k++]=q-p+1;m[k++]=p-q;m[k++]=B-2*n+t;m[k++]=B-n}m[++k]=1;b(g,m,f,e);l&&(g=[],g.push(u[f-4],u[f-3],u[f-2],u[f-1],u[0],u[1],u[2],u[3]),b(g,m,4,e));f=l?0:u.length-2;d[c++]=u[f++];d[c]=u[f];return d}"undefined"!==typeof exports&&(exports.getCurvePoints=getCurvePoints);